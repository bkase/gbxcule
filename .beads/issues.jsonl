{"id":"bd-10f","title":"WS2: DGX smoke run for warp_vec_cuda","description":"Run a minimal harness invocation on DGX using warp_vec_cuda.\n\nDoD:\n- uv run python bench/harness.py --backend warp_vec_cuda --rom ... --steps 10 completes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:34:49.239575732Z","created_by":"bkase","updated_at":"2026-01-22T13:34:26.015199748Z","closed_at":"2026-01-22T13:34:26.015171252Z","close_reason":"Ran warp_vec_cuda harness smoke on CUDA","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-10f","depends_on_id":"bd-39h","type":"parent-child","created_at":"2026-01-22T12:34:49.246625246Z","created_by":"bkase"}]}
{"id":"bd-117e","title":"m1.1: backend wiring for downsampled pixels","description":"Wire the new downsampled pixel renderer into the Warp backends per history/m1-plan.md (M1.1).\n\nScope:\n- Add an opt-in flag (recommend: render_pixels: bool = False) to WarpVecBaseBackend and derived backends.\n- Allocate persistent pixel buffer when enabled: wp.zeros(num_envs*H*W, uint8, device).\n- Launch the new renderer kernel after the step kernel (no host readback; no forced global sync).\n- Expose accessors:\n  - pixels_wp() -> Warp array\n  - pixels_torch() -> torch.uint8[N,H,W] view via wp.to_torch (raise cleanly if torch not installed).\n- Keep existing render_bg behavior unchanged.\n\nConstraints:\n- No action space changes (no NOOP).\n- Avoid new deps; torch interop must be optional.\n- CUDA path must preserve async behavior (no forced wp.synchronize()).\n\nAcceptance:\n- render_pixels=True results in a stable device buffer updated every step.\n- Torch view uses stable data_ptr across steps (validated later in M2 tests).\n- Existing tests for render_bg continue to pass (no behavior change).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:28:22.304820073Z","created_by":"bkase","updated_at":"2026-01-25T16:34:28.330879291Z","closed_at":"2026-01-25T16:34:28.330849803Z","close_reason":"Wired renderer into backend","compaction_level":0,"original_size":0}
{"id":"bd-11d","title":"WS3: CUDA-safe memory reads for verify","description":"Implement CUDA read_memory slice-copy to avoid full device->host copies during verify.\n\nDoD:\n- mem-region verify on CUDA avoids O(num_envs*64KB) transfers.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-22T12:34:49.736020106Z","created_by":"bkase","updated_at":"2026-01-22T13:51:56.057138681Z","closed_at":"2026-01-22T13:51:56.057111305Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-11d","depends_on_id":"bd-39h","type":"blocks","created_at":"2026-01-22T12:34:50.256365835Z","created_by":"bkase"}]}
{"id":"bd-11e","title":"WS2: Refactor WarpVec backends into base + CPU/CUDA subclasses","description":"Create WarpVecBaseBackend with shared ABI/ROM/step plumbing, then derive WarpVecCpuBackend and WarpVecCudaBackend with device-specific overrides.","acceptance_criteria":"1) `WarpVecBaseBackend` owns shared init/reset/step/close logic and ABI buffer allocation.\n2) `WarpVecCpuBackend` uses `device=\"cpu\"` and keeps current behavior/correctness.\n3) `WarpVecCudaBackend` uses Warp device `cuda:0` with `device=\"cuda\"` and does not unconditionally synchronize in `step()`.\n4) CPU tests remain green (at least `tests/test_warp_vec_cpu_backend.py` and `tests/test_warp_vec_ws2.py`).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T12:34:47.818057844Z","created_by":"bkase","updated_at":"2026-01-22T13:30:47.603056476Z","closed_at":"2026-01-22T13:30:47.602999004Z","close_reason":"Refactored WarpVec base + added CPU/CUDA subclasses","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-11e","depends_on_id":"bd-39h","type":"parent-child","created_at":"2026-01-22T12:34:47.824971567Z","created_by":"bkase"}]}
{"id":"bd-11r","title":"Epic8: Action trace recording + replay","description":"Implement actions.jsonl recording and --actions-file replay support.\n\nScope:\n- Action trace format: one JSON array per line (int32 actions).\n- In verify mode: always record actions.jsonl.\n- If --actions-file provided: ignore seed/gen and replay exact actions deterministically.\n\nAcceptance:\n- Replaying actions reproduces same steps; trace file length equals verify_steps.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:43:08.754372298Z","created_by":"bkase","updated_at":"2026-01-21T15:26:43.706198762Z","closed_at":"2026-01-21T15:26:43.706142602Z","close_reason":"Implemented actions.jsonl recording on mismatch and --actions-file replay support.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-11r","depends_on_id":"bd-1pl","type":"parent-child","created_at":"2026-01-21T14:43:08.770099328Z","created_by":"bkase"}]}
{"id":"bd-11xm","title":"F0 Cartridge header parser + cart spec","description":"Create a pure cartridge header parser (0x0147/0x0148/0x0149) that yields a canonical cart spec.\n\nDeliverables:\n- New `core/cartridge.py` (or similar) with:\n  - cart type enum (ROM_ONLY, MBC1, MBC3) + flags (RAM/BATTERY/RTC)\n  - ROM size -> bank count + byte length\n  - RAM size -> bank count + byte length\n  - helpers for bank clamping/masking\n- Fail-fast on unsupported cart types or invalid headers.\n- Unit tests for header parsing + size mapping (pure, deterministic).\n\nNotes:\n- Keep it dependency-free and pure (no numpy, no PyBoy).\n- Use exact header offsets (0x0147-0x0149).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:21:49.823593191Z","created_by":"bkase","updated_at":"2026-01-24T15:30:50.379917890Z","closed_at":"2026-01-24T15:30:50.379890274Z","close_reason":"Completed (tests attempted; pytest timed out under uv)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-11xm","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:21:49.830569369Z","created_by":"bkase"}]}
{"id":"bd-12hs","title":"A2C WB B5: Document scale-mode knobs","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-27T14:01:37.862291634Z","created_by":"bkase","updated_at":"2026-01-27T14:11:02.474691514Z","closed_at":"2026-01-27T14:11:02.474663273Z","close_reason":"Documented scale-mode knobs and mem guard","compaction_level":0,"original_size":0,"comments":[{"id":12,"issue_id":"bd-12hs","author":"bkase","text":"Reopened: Reopening: should remain open until implementation is complete","created_at":"2026-01-27T14:05:14Z"}]}
{"id":"bd-12vy","title":"A2C WB B3: Subsampled info/logging guard","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-27T14:01:35.720070615Z","created_by":"bkase","updated_at":"2026-01-27T14:09:30.878464428Z","closed_at":"2026-01-27T14:09:30.878435355Z","close_reason":"Added info_mode stats/none to limit info payload","compaction_level":0,"original_size":0,"comments":[{"id":10,"issue_id":"bd-12vy","author":"bkase","text":"Reopened: Reopening: should remain open until implementation is complete","created_at":"2026-01-27T14:05:14Z"}]}
{"id":"bd-13j","title":"Epic3: Enforce pyright strict for common.py","description":"Update pyproject.toml (or add pyright config) so src/gbxcule/backends/common.py is type-checked in strict mode, per ARCHITECTURE.md.\n\nScope:\n- Adjust [tool.pyright] config to apply strict for common.py (and any new shared schema module).\n- Keep other modules at current strictness to preserve fast dev loop.\n\nAcceptance:\n- pyright reports strict-mode issues for common.py; no new errors introduced.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:15:47.692101268Z","created_by":"bkase","updated_at":"2026-01-21T14:24:54.230198051Z","closed_at":"2026-01-21T14:24:54.230140259Z","close_reason":"Added pyright strict mode for common.py","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-13j","depends_on_id":"bd-2m1","type":"parent-child","created_at":"2026-01-21T14:15:47.708691309Z","created_by":"bkase"}]}
{"id":"bd-13mm","title":"M5 Eval: D2 shared eval core","description":"Implement reducer-style shared eval core module per spec.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T15:21:49.249014779Z","created_by":"bkase","updated_at":"2026-01-27T15:28:53.560449866Z","closed_at":"2026-01-27T15:28:53.560422394Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-13sy","title":"Milestone E: Window + Sprites + STAT + DMA","description":"Goal:\n- Deliver Milestone E features on top of completed Milestone D: window, sprites, STAT interrupts, and OAM DMA with PyBoy oracle parity.\n\nScope:\n- DMG only, scanline-latch model (no mid-scanline effects beyond existing D constraints).\n- Env0 framebuffer hashing for verification.\n- DMA copy correctness; bus-block timing can be refined later.\n\nExit criteria:\n- New micro-ROMs pass vs PyBoy (frame hashes + counters).\n- Warp CPU matches PyBoy; Warp CUDA matches Warp CPU where available.\n- Mismatch bundles contain enough state for repro.\n\nNotes:\n- Child tasks E0–E6 track spec, DMA, window, sprites, STAT IRQs, harness artifacts, and CUDA parity.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-24T13:11:52.296337692Z","created_by":"bkase","updated_at":"2026-01-24T13:11:52.316592941Z","compaction_level":0,"original_size":0,"labels":["milestone-e","ppu"]}
{"id":"bd-145","title":"Story 6.2: Basic reliability checks for MP backend","description":"Scope\n- Add a test or smoke run to verify startup, shutdown, and error propagation.\n\nAcceptance\n- Failing worker causes non-zero exit and no leaked processes.\n\nRefs\n- history/m0-epics.md (Story 6.2)\n- CONSTITUTION.md (Section V: crash-only software)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:39.818206443Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.044119385Z","deleted_at":"2026-01-21T09:15:23.044113769Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-14dy","title":"fix: pyright errors in reset_mask and reset_cache tests","description":"Pyright currently fails with reportInvalidTypeForm in warp reset_mask kernels and optional attribute errors in tests/test_reset_cache.py.\n\nDeliverables:\n- Suppress invalid Warp type forms in reset_mask.py via local pyright directive.\n- Add explicit non-None assertions in tests/test_reset_cache.py so pyright can narrow backend/cache fields.\n\nAcceptance:\n- `uv run pyright` returns 0 errors.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:36:01.378034316Z","created_by":"bkase","updated_at":"2026-01-26T06:38:18.167749886Z","closed_at":"2026-01-26T06:38:18.167673278Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-14nz","title":"A2C WB B1: Implement stack_k=1 fast path","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T14:01:33.566912283Z","created_by":"bkase","updated_at":"2026-01-27T14:07:43.207224641Z","closed_at":"2026-01-27T14:07:43.207195632Z","close_reason":"Added stack_k=1 fast path in reset/step","compaction_level":0,"original_size":0,"comments":[{"id":8,"issue_id":"bd-14nz","author":"bkase","text":"Reopened: Reopening: should remain open until implementation is complete","created_at":"2026-01-27T14:05:14Z"}]}
{"id":"bd-14x","title":"Epic6: MP reliability + smoke tests","description":"Add tests to verify pyboy_vec_mp reliability.\n\nRefs: tests/test_backends_common.py, bench/roms/build_micro_rom.py, bench/roms/suite.yaml.\n\nTests:\n- Start backend with num_envs=4, num_workers=2; reset(seed=123).\n- Run a small number of steps (8–32); ensure no hang.\n- close() joins workers within timeout.\n- Optional: get_cpu_state(0) returns canonical keys.\n\nAcceptance:\n- Tests are fast (<2 min gate) and fail fast on worker failure.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:41:53.678100712Z","created_by":"bkase","updated_at":"2026-01-21T15:07:07.755825218Z","closed_at":"2026-01-21T15:07:07.755797810Z","close_reason":"Added 26 tests covering config validation, reset/step reliability, get_cpu_state RPC, close() cleanup, and deterministic seeding","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-14x","depends_on_id":"bd-2sm","type":"parent-child","created_at":"2026-01-21T14:41:53.694568583Z","created_by":"bkase"}]}
{"id":"bd-15d","title":"Epic7: Tests with fake backend for SPS math + schema","description":"Add tests for harness math and schema using an in-memory fake backend (no PyBoy).\n\nScope:\n- Fake VecBackend returns fixed outputs; step increments a counter.\n- Test SPS formulas (total/per-env) and frames_per_sec computed correctly.\n- Validate artifact keys exist and json.dumps succeeds.\n- Avoid timing flakiness: assert formulas based on mocked seconds or injected timer.\n\nAcceptance:\n- Tests are deterministic and fast; no external deps required.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:42:39.733516012Z","created_by":"bkase","updated_at":"2026-01-21T15:19:40.164549816Z","closed_at":"2026-01-21T15:19:40.164493575Z","close_reason":"Added FakeVecBackend and 11 tests for SPS formulas and artifact schema validation.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-15d","depends_on_id":"bd-dcz","type":"parent-child","created_at":"2026-01-21T14:42:39.750136847Z","created_by":"bkase"}]}
{"id":"bd-15h","title":"WS4: tests for mem-region hashing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T07:45:26.279832166Z","created_by":"bkase","updated_at":"2026-01-22T07:55:24.452994948Z","closed_at":"2026-01-22T07:55:24.452967860Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-15q","title":"WS2 Part 4: Stage kernel cache + warmup","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T05:47:12.719243661Z","created_by":"bkase","updated_at":"2026-01-23T05:58:13.139897062Z","closed_at":"2026-01-23T05:58:13.139869558Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-174","title":"WS2 Part 1: Lock fused-kernel ABI + stage semantics","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T05:47:01.150084248Z","created_by":"bkase","updated_at":"2026-01-23T05:50:12.108497979Z","closed_at":"2026-01-23T05:50:12.108471356Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1a17","title":"E1: Implement OAM DMA (0xFF46) + ROM + tests","description":"Goal:\n- Add OAM DMA copy correctness with a repo-owned test ROM and memory-region verification.\n\nDeliverables:\n- Implement `write8(0xFF46, v)` in Warp MMIO:\n  - source = v << 8\n  - copy 160 bytes to 0xFE00..0xFE9F\n  - initial model: copy occurs immediately (no bus-block timing yet)\n- Add micro-ROM `DMA_OAM_COPY.gb` that:\n  - fills a source page with known bytes\n  - triggers DMA\n  - verifies OAM contents (serial \"PASS\" or WRAM signature)\n- Add tests:\n  - PyBoy vs Warp CPU mem-region compare on 0xFE00..0xFEA0\n  - optional Warp CPU vs CUDA parity where available\n\nFiles likely touched:\n- src/gbxcule/kernels/cpu_step_builder.py (MMIO write8)\n- bench/roms/build_micro_rom.py (new ROM)\n- bench/roms/suite.yaml (register ROM)\n- tests/test_* (new DMA verification test)\n\nAcceptance checks:\n- `make roms`\n- `make test` (DMA tests green)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T13:11:54.096048692Z","created_by":"bkase","updated_at":"2026-01-24T13:23:38.650736937Z","closed_at":"2026-01-24T13:23:38.650708841Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["dma","milestone-e","mmio","ppu"],"dependencies":[{"issue_id":"bd-1a17","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:54.116566835Z","created_by":"bkase"}]}
{"id":"bd-1au","title":"WS6: Tighten MAX_MEM_DUMP_BYTES to 1024","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:26:20.463810997Z","created_by":"bkase","updated_at":"2026-01-22T14:32:27.105262093Z","closed_at":"2026-01-22T14:32:27.105235020Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1bn","title":"Story 1.1: Create repository structure exactly as spec","description":"Scope\n- Create all directories and files specified in PRD structure.\n- Add placeholder modules that are import-safe (no heavy imports at module import time).\n- Add minimal __main__.py that prints guidance for uv run.\n- Add .gitignore for .venv, __pycache__, bench/roms/out, bench/runs.\n\nAcceptance\n- uv run python -c \"import gbxcule; print('ok')\" succeeds.\n- uv run python -c \"import gbxcule.backends; import gbxcule.core; import gbxcule.kernels; print('ok')\" succeeds.\n\nRefs\n- history/epic1.md (Story 1.1)\n- history/prd.md (Section 6: Repo structure)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:37.842273091Z","created_by":"bkase","updated_at":"2026-01-21T09:21:04.616003082Z","closed_at":"2026-01-21T09:21:04.615947946Z","close_reason":"Implemented: repo structure created with all directories and placeholder modules","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1bn","depends_on_id":"bd-2sn","type":"parent-child","created_at":"2026-01-21T09:12:37.850770876Z","created_by":"bkase"}]}
{"id":"bd-1bnu","title":"C4: Interrupt controller (IME/EI delay) + DI/EI/RETI","description":"Context\n- Need interrupt controller: IE/IF bits, IME gating, EI delay, RETI restores IME.\n- DI/EI opcodes are currently UNIMPL in ISA and must be implemented.\n\nScope\n- Add ISA specs + templates:\n  - `DI` (0xF3): IME=0 immediately; clear EI delay\n  - `EI` (0xFB): set EI delay per spec (IME set after following instruction)\n- Update `RETI` semantics to set IME=1 (and clear EI delay).\n- Implement interrupt servicing at instruction boundaries and during HALT wake:\n  - pending = IE & IF & 0x1F\n  - if IME && pending: service highest-priority bit\n  - push PC to stack, set PC=vector, clear IF bit, clear IME, add 20 cycles\n  - timers advance during the 20-cycle service window\n\nDoD\n- New interrupt micro-ROM(s) match PyBoy (step-exact for small runs).\n- No regressions in existing micro-ROM verify suite.\n\nTests\n- New verify tests for interrupt ROM(s) (added in C6), plus:\n- `uv run pytest -q tests/test_warp_vec_ws3_verify.py`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T08:26:04.367889115Z","created_by":"bkase","updated_at":"2026-01-24T09:11:09.018198894Z","closed_at":"2026-01-24T09:11:09.018170812Z","close_reason":"Implemented interrupt servicing + DI/EI/RETI IME","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1bnu","depends_on_id":"bd-33pz","type":"blocks","created_at":"2026-01-24T08:26:08.206993379Z","created_by":"bkase"},{"issue_id":"bd-1bnu","depends_on_id":"bd-t2ta","type":"parent-child","created_at":"2026-01-24T08:26:04.377175747Z","created_by":"bkase"}]}
{"id":"bd-1bs5","title":"M4E: Determinism gate for M4 wrapper (tool + optional pytest)","description":"Add a deterministic gate for M4 that proves the full loop (step -> pixels -> reward/done/trunc -> reset_mask) is reproducible.\n\nWork:\n- Add tools/rl_m4_smoke.py modeled after tools/rl_m2_smoke.py:\n  - requires CUDA torch + warp CUDA; otherwise prints JSON {skipped: ...} and exits 0\n  - runs the new M4 wrapper twice with the same seed and action generation\n  - records per-step: pixel hash per env, reward vector (or hash), done/trunc masks, and reset events\n  - fails (exit 1) if sequences differ\n- Optionally add a pytest test that is skipped when torch/cuda unavailable and runs a tiny version (N small, T small).\n\nAcceptance:\n- One command provides exit-0/exit-1 deterministic verification of M4 behavior.\n- Runtime is seconds at most, and no heavy artifacts on success.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T04:49:57.679665125Z","created_by":"bkase","updated_at":"2026-01-26T06:10:51.685018023Z","closed_at":"2026-01-26T06:10:51.684950567Z","close_reason":"Fixed rl_m4_smoke hash for CUDA and reran smoke (ok).","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1bs5","depends_on_id":"bd-1lpa","type":"parent-child","created_at":"2026-01-26T04:49:57.695482839Z","created_by":"bkase"}]}
{"id":"bd-1cf","title":"Story 8.2: Implement mismatch repro bundle writer","description":"Scope\n- Implement repro bundle writer with atomic directory creation.\n- Include metadata.json, ref_state.json, dut_state.json, diff.json, repro.sh.\n\nAcceptance\n- Repro bundle is JSON-only and idempotent to write.\n\nRefs\n- history/m0-epics.md (Story 8.2)\n- ARCHITECTURE.md (Section 7.4: mismatch automation)\n- CONSTITUTION.md (Section V: crash-only, structured logs)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:40.959539175Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.075524221Z","deleted_at":"2026-01-21T09:15:23.075518189Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-1dk","title":"WS0: Document M3 GPU gate commands","description":"Update README with M3/DGX gate commands and add to Common Commands.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:21:28.946857660Z","created_by":"bkase","updated_at":"2026-01-22T12:34:46.485568233Z","closed_at":"2026-01-22T12:24:43.133974798Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1dk","depends_on_id":"bd-1kg","type":"blocks","created_at":"2026-01-22T12:34:46.485554457Z","created_by":"bkase"}]}
{"id":"bd-1dx","title":"WS2: Register explicit backend names (warp_vec_cpu/warp_vec_cuda)","description":"Wire `warp_vec_cuda` through the harness backend registry and constructor dispatch (so Makefile GPU targets don't fail with \"Unknown backend\").\n\nNotes:\n- CLI choices already include warp_vec_cuda (WS0 done); this task is the missing registry + create_backend plumbing.","acceptance_criteria":"1) `bench/harness.py::register_backends()` registers `warp_vec_cuda`.\n2) `bench/harness.py::create_backend()` can construct `warp_vec_cuda` with the same kwargs as `warp_vec_cpu` (num_envs, frames_per_step, obs_dim, etc.).\n3) On DGX: `uv run python bench/harness.py --backend warp_vec_cuda --rom bench/roms/out/ALU_LOOP.gb --steps 1 --warmup-steps 0` starts and writes an artifact.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T12:34:48.275979063Z","created_by":"bkase","updated_at":"2026-01-22T13:31:46.603738729Z","closed_at":"2026-01-22T13:31:46.603668440Z","close_reason":"Registered warp_vec_cuda in harness registry and constructor","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1dx","depends_on_id":"bd-39h","type":"parent-child","created_at":"2026-01-22T12:34:48.282173871Z","created_by":"bkase"}]}
{"id":"bd-1e07","title":"E0: Milestone E PPU spec + edge-detector helpers","description":"Goal:\n- Lock Milestone E behavioral contracts to match current scanline-latch model and prevent invalid states.\n\nDeliverables:\n- Add/extend a spec doc (prefer history/ or docs/) that explicitly defines:\n  - Window timing under scanline-latch (WX/WY use, window_line increment rules).\n  - Sprite priority model (OBJ behind BG when BG/Window color index != 0).\n  - STAT interrupt edge-trigger semantics (mode 0/1/2 + LYC).\n- Add pure helper functions for STAT edge detection and sprite priority decisions (non-Warp, testable).\n- Add unit tests for those helpers (fast, deterministic).\n\nFiles likely touched:\n- history/gameboy-milestone-e-plan.md (or new history/gameboy-milestone-e-spec.md)\n- src/gbxcule/core/ or src/gbxcule/ppu_helpers.py (new helper module)\n- tests/test_ppu_* (new unit tests)\n\nAcceptance checks:\n- `make test` (or `uv run pytest -k ppu_unit`) passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T13:11:53.223049039Z","created_by":"bkase","updated_at":"2026-01-24T13:14:16.821144132Z","closed_at":"2026-01-24T13:14:16.821079668Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["milestone-e","ppu","spec"],"dependencies":[{"issue_id":"bd-1e07","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:53.239625417Z","created_by":"bkase"}]}
{"id":"bd-1e50","title":"D6: Scanline-robust graphics micro-ROMs + tests","description":"Goal:\n- Add deterministic graphics ROMs and tests that are robust to scanline-accurate rendering.\n\nROM requirements (scanline-robust):\n- No mid-scanline register tricks (SCX/SCY/BGP/LCDC updates only when LCD off or during VBlank).\n- No dot-synchronized polling or per-dot timing assumptions.\n- No reliance on VRAM/OAM access blocking.\n- Prefer static or VBlank-updated frames.\n\nImplementation details:\n- Extend `bench/roms/build_micro_rom.py`:\n  - BG_STATIC.gb: LCD off, write tile data + BG map + BGP, SCX/SCY=0, enable LCD, loop.\n  - BG_SCROLL_SIGNED.gb: uses SCX/SCY and signed tile addressing; VRAM writes only while LCD off or VBlank.\n- Update `bench/roms/suite.yaml`:\n  - add both ROMs with frames_per_step=1\n- Add tests:\n  - `tests/test_ppu_bg_hash_vs_pyboy.py` (PyBoy vs Warp CPU frame-hash compare for 1–2 ROMs)\n  - Optional: warmup 1–2 frames after LCD enable before hash compare\n\nAcceptance:\n- ROMs are generated and loadable.\n- Tests pass vs PyBoy under scanline-accurate model.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T11:36:18.861821354Z","created_by":"bkase","updated_at":"2026-01-24T12:10:17.749689966Z","closed_at":"2026-01-24T12:10:17.749662334Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1e50","depends_on_id":"bd-363i","type":"blocks","created_at":"2026-01-24T11:36:31.620247545Z","created_by":"bkase"}]}
{"id":"bd-1f2t","title":"WSA: Repo-wide migration to 8-action space (strings, constants, docs)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T13:44:13.805899918Z","created_by":"bkase","updated_at":"2026-01-27T13:44:20.169691778Z","closed_at":"2026-01-27T13:44:20.169641826Z","close_reason":"Completed (plan updated in history/a2c-wa.md)","compaction_level":0,"original_size":0}
{"id":"bd-1f5","title":"WS1: Add core action schedule helper + tests","description":"Centralize press/release timing logic so PyBoy backends share one definition.\\n\\nImplementation:\\n- Add src/gbxcule/core/action_schedule.py\\n  - Validate 0 <= release_after_frames <= frames_per_step\\n  - Helpers for determining pressed state / ticks\\n\\nTests:\\n- Add tests/test_action_schedule.py (boundary cases: 0, 1, equal, invalid)\\n\\nDoD:\\n- Pure module (no PyBoy/Warp imports).\\n- Unit tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:10.278755694Z","created_by":"bkase","updated_at":"2026-01-23T04:46:27.814690083Z","closed_at":"2026-01-23T04:46:27.814662180Z","close_reason":"Implemented action schedule helpers and tests","compaction_level":0,"original_size":0}
{"id":"bd-1h28","title":"RL M3-E: calibration mode + minimal docs","description":"Add calibration support to replay gate (or separate script) to report min/mean/end dist + histogram and recommend tau. Do not auto-overwrite templates without --force. Add minimal docs (README or docs/rl_m3.md) explaining capture + replay gate commands, action trace format (JSON list per line), and note: no NOOP action (use inert inputs).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T03:55:21.324840153Z","created_by":"bkase","updated_at":"2026-01-26T04:09:59.712332202Z","closed_at":"2026-01-26T04:09:59.712274505Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1hi","title":"Workstream 0: embed ROM in mismatch bundles","description":"Plan (Workstream 0):\n1) Inspect current bundle behavior: check bench/harness.py write_mismatch_bundle and tests/test_harness.py TestMismatchBundle for file layout + ROM path usage.\n2) Write/extend tests first (verifiable reward): ensure bundle contains rom.gb, repro.sh uses embedded ROM path, and metadata.json includes rom_filename (optionally rom_size/hash if present).\n3) Implement minimal change in write_mismatch_bundle: copy ROM bytes into temp bundle dir as rom.gb, update metadata.json, and update repro.sh to use the embedded ROM path. Keep atomic bundle finalize.\n4) Validate locally: run pytest -k mismatch, then make check to confirm <=2 min gate and no regressions.\n5) If green, close issue + sync beads JSONL.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T03:51:46.091357510Z","created_by":"bkase","updated_at":"2026-01-22T03:53:05.107920711Z","closed_at":"2026-01-22T03:53:05.107893606Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1hz","title":"WS2 Part 6: Tests for stage correctness + invariants","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T05:47:20.679627083Z","created_by":"bkase","updated_at":"2026-01-23T06:03:47.679326138Z","closed_at":"2026-01-23T06:03:47.679298698Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1i0","title":"Epic7: Scaling run support","description":"Add --env-counts support for scaling sweeps.\n\nScope:\n- Parse --env-counts 1,2,4,... and run benchmark per env count.\n- Emit scaling artifact JSON with sweep config and ordered results list.\n- Keep deterministic ordering and fields.\n\nAcceptance:\n- Scaling JSON written to bench/runs/<timestamp>/<run_id>__scaling.json (or similar).\n- Each entry includes env_count + results metrics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:42:33.015298183Z","created_by":"bkase","updated_at":"2026-01-21T15:17:59.289197636Z","closed_at":"2026-01-21T15:17:59.289171348Z","close_reason":"Implemented --env-counts scaling sweeps with ordered results list in _scaling.json artifact.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1i0","depends_on_id":"bd-dcz","type":"parent-child","created_at":"2026-01-21T14:42:33.031591978Z","created_by":"bkase"}]}
{"id":"bd-1ij","title":"WS4: add mem-region parsing + hash compare","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T07:45:10.858263606Z","created_by":"bkase","updated_at":"2026-01-22T07:50:38.786118969Z","closed_at":"2026-01-22T07:50:38.786063865Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1ju","title":"WS1: Regenerate uv.lock for cu13 source override(s)","description":"Run uv lock after adding warp-lang source override(s) and commit the updated uv.lock.\\n\\nDoD:\\n- uv.lock updated deterministically after the pyproject change.\\n- Lock contains appropriate entries to install Warp on macOS and linux/aarch64 (cu13 via URL source).\\n- uv lock --check passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:25:24.952160298Z","created_by":"bkase","updated_at":"2026-01-22T12:39:16.472028225Z","closed_at":"2026-01-22T12:39:16.471972065Z","close_reason":"uv.lock updated for cu13 sources","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1ju","depends_on_id":"bd-297","type":"blocks","created_at":"2026-01-22T12:26:31.884426761Z","created_by":"bkase"},{"issue_id":"bd-1ju","depends_on_id":"bd-t7w","type":"parent-child","created_at":"2026-01-22T12:25:24.959343555Z","created_by":"bkase"}],"comments":[{"id":3,"issue_id":"bd-1ju","author":"bkase","text":"Ran uv lock and uv lock --check; uv.lock now includes warp-lang v1.11.0+cu13 for Linux sources.","created_at":"2026-01-22T12:39:11Z"}]}
{"id":"bd-1kg","title":"WS0: M3 spec + gates (contract stream)","description":"Lock M3 definition of done and make GPU gates executable via Make targets and docs.\n\nDoD:\n- verify-gpu/bench-gpu/check-gpu targets defined and documented.\n- DGX user can run the commands once CUDA backend is correct.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T12:34:45.084898970Z","created_by":"bkase","updated_at":"2026-01-22T13:20:46.246963562Z","closed_at":"2026-01-22T13:20:46.246936858Z","close_reason":"Completed: GPU Make targets + docs + harness CLI choices","compaction_level":0,"original_size":0}
{"id":"bd-1ks","title":"Epic6: Implement pyboy_vec_mp backend core","description":"Implement src/gbxcule/backends/pyboy_vec_mp.py as a VecBackend.\n\nScope:\n- Define a frozen config dataclass (num_envs, num_workers, frames_per_step, release_after_frames, rom_path, base_seed, headless, obs_dim). Validate in __post_init__ with clear ValueError messages.\n- Master/worker architecture using multiprocessing with top-level worker functions for spawn safety.\n- Partition env indices across workers (static), each worker owns its PyBoy instances.\n- Master sends commands: RESET, STEP, GET_CPU_STATE, CLOSE.\n- Worker returns OK/STATE/ERR messages with error detail.\n\nAcceptance:\n- Protocol fields: name=\"pyboy_vec_mp\", device=\"cpu\", num_envs set, action_spec/obs_spec set.\n- step accepts int32[num_envs] and returns obs/reward/done/trunc with correct shapes/dtypes.\n- IPC payloads minimal (actions + ack); obs can be zeros for M0.\n- Fail fast on worker error or dead pipe.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:41:24.201499633Z","created_by":"bkase","updated_at":"2026-01-21T15:00:04.100128767Z","closed_at":"2026-01-21T15:00:04.100072223Z","close_reason":"Implemented core MP backend with master/worker architecture, IPC protocol, and VecBackend interface","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1ks","depends_on_id":"bd-2sm","type":"parent-child","created_at":"2026-01-21T14:41:24.208165657Z","created_by":"bkase"}]}
{"id":"bd-1l1s","title":"m0: make CUDA smoke test optional/deterministic","description":"Adjust CUDA smoke test to be optional and check CUDA determinism/invariants instead of CPU parity.\n\nDetails:\n- CUDA parity currently fails for Pokemon Red; still want CUDA coverage.\n- Gate CUDA test behind an explicit env var (e.g., GBXCULE_M0_CUDA_PARITY=1 or GBXCULE_M0_CUDA=1), default skip.\n- When enabled, assert CUDA run is deterministic for the same trace and meets frame invariants (0..3, non-constant).\n- Keep CPU deterministic test unchanged.\n\nAcceptance:\n- tests/test_m0_pixel_smoke.py passes with ROM/state assets on CPU.\n- CUDA test can be enabled explicitly and then passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:19:53.071548034Z","created_by":"bkase","updated_at":"2026-01-25T16:20:50.292098739Z","closed_at":"2026-01-25T16:20:50.292070754Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1l5","title":"Epic 3: Backend contract and shared types","description":"Goal\n- Define a stable backend interface and shared result types for harness/backends.\n\nScope\n- VecBackend protocol in src/gbxcule/backends/common.py.\n- Shared dataclasses for step/reset outputs and run metadata.\n- Schema fields required for reporting.\n\nAcceptance\n- Interface includes reset/step/get_cpu_state/close and metadata properties.\n- Harness can depend on the contract without backend-specific imports.\n\nRefs\n- history/m0-epics.md (Epic 3)\n- history/prd.md (Section 8: backend contract)\n- ARCHITECTURE.md (Section 5.1: VecBackend protocol)\n- CONSTITUTION.md (Section I: correctness by construction)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:38.382965866Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.060403750Z","deleted_at":"2026-01-21T09:15:23.060398086Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-1l7","title":"WS5.3 Striped generator metadata + divergence receipt","description":"Improve action generation metadata and divergence integrity signals. Make striped generator codec-aware (uses action names or codec mapping), record generator pattern in artifacts, and add a post-timing divergence receipt (e.g., unique_pc_count) for backends that can expose PC snapshots (Warp). Receipt should be computed after the timed loop so benchmarks are not perturbed.","acceptance_criteria":"1. striped generator is codec-aware (directional actions when available).\n2. action_generator metadata includes pattern or pattern_action_names.\n3. scaling results include divergence receipt for warp backends when available.\n4. receipt computed post-timing; does not affect measured loop.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T07:27:33.504877312Z","created_by":"bkase","updated_at":"2026-01-23T07:40:01.402737855Z","closed_at":"2026-01-23T07:40:01.402709935Z","close_reason":"Added striped metadata + divergence receipt","compaction_level":0,"original_size":0}
{"id":"bd-1la","title":"Story 5.2: Add minimal state snapshot normalization","description":"Scope\n- Normalize get_cpu_state output to JSON-friendly scalars and stable keys.\n- Derive flags from F register if applicable.\n\nAcceptance\n- get_cpu_state output matches the canonical schema shape.\n\nRefs\n- history/m0-epics.md (Story 5.2)\n- ARCHITECTURE.md (Section 7.1: canonical CPU state schema)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:39.404291686Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.123645473Z","deleted_at":"2026-01-21T09:15:23.123634993Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-1lpa","title":"M4: Pixel reward + reset_mask (simple-rl)","description":"Implements Simple-RL Milestone 4 (reward shaping from pixels + per-env reset_mask + truncation + determinism gates) using the repo’s binding spec in CONSTITUTION.md.\n\nInputs / references:\n- Plan: history/simple-rl-m4-plan.md\n- Existing M1–M3 code: downsampled renderer (src/gbxcule/kernels/ppu_render_downsampled.py), goal matching (src/gbxcule/rl/goal_match.py), goal templates (src/gbxcule/rl/goal_template.py), torch pixel wrapper (src/gbxcule/rl/pokered_pixels_env.py).\n\nHard constraints:\n- Keep action space as-is (no NOOP added).\n- Hot path stays GPU-only (no host copies/sync in step loop; tests may sync).\n\nDefinition of done:\n- A torch-facing RL wrapper returns (obs_stack_u8, reward_f32, done, trunc, info) and autoresets using reset_mask.\n- ResetCache resets emulator state on GPU via Warp kernels.\n- Deterministic gate exists (fixed seed + trace -> stable hashes + reward/done/trunc).\n\nWork is tracked via child tasks M4A–M4E.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-26T04:43:22.341552452Z","created_by":"bkase","updated_at":"2026-01-26T04:43:22.341552452Z","compaction_level":0,"original_size":0}
{"id":"bd-1lu","title":"Milestone A: SERIAL_HELLO micro-ROM + harness dump + tests","description":"Goal:\n- Add a self-contained serial test ROM and verification harness support.\n\nScope / Files:\n- bench/roms/build_micro_rom.py: add build_serial_hello() and include in build_all().\n- tests/test_micro_roms.py: update counts/determinism/checksum tests; optional PyBoy smoke if needed.\n- tests: add test that runs WarpVecCpuBackend and asserts serial bytes contain \"OK\".\n- bench/harness.py: add --dump-serial (env0) and/or include serial snapshot in mismatch bundles.\n\nAcceptance:\n- Running SERIAL_HELLO.gb prints/returns \"OK\" via serial buffer.\n- Tests validate serial capture without requiring PPU.\n- Harness can dump serial output when requested (quiet by default).\n\nNotes:\n- Use only currently-supported opcodes in the ROM (LD HL,d16 / LD A,d8 / LD (HL),A / INC HL / JR).\n- Keep output deterministic.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T01:59:48.765942434Z","created_by":"bkase","updated_at":"2026-01-24T02:09:43.070237772Z","closed_at":"2026-01-24T02:09:43.070209980Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1m1a","title":"Load start-of-game state and run randomized input steps; compare parity vs PyBoy","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:38:44.812423023Z","created_by":"bkase","updated_at":"2026-01-24T17:14:19.205513576Z","closed_at":"2026-01-24T17:14:19.205486088Z","close_reason":"Completed (mismatch found)","compaction_level":0,"original_size":0}
{"id":"bd-1mp","title":"Epic3: Define backend contract + core types in common.py","description":"Implement the backend interface contract and shared core types in src/gbxcule/backends/common.py.\n\nScope:\n- Add Device and Stage literals and NDArray aliases.\n- Add ArraySpec + BackendSpec dataclasses with to_json_dict (tuples->lists, dtype as string).\n- Add StepOutput dataclass (obs/reward/done/trunc/info).\n- Add CpuFlags + CpuState TypedDict with canonical keys and optional counters.\n- Define VecBackend Protocol matching reset/step/get_cpu_state/close with batched semantics.\n- Add fast validation helpers: flags_from_f, validate_actions, as_i32_actions, validate_step_output, empty_obs.\n\nAcceptance:\n- Shapes/dtypes align with Epic3 invariants (actions int32[num_envs], obs float32[num_envs, obs_dim], reward float32[num_envs], done/trunc bool[num_envs]).\n- Validation raises ValueError with actionable messages.\n- No heavy deps added; pure dataclasses/typing + numpy only.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:15:21.930551349Z","created_by":"bkase","updated_at":"2026-01-21T14:20:12.811838477Z","closed_at":"2026-01-21T14:20:12.811681309Z","close_reason":"Implemented backend contract + core types in common.py","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1mp","depends_on_id":"bd-2m1","type":"parent-child","created_at":"2026-01-21T14:15:21.947091240Z","created_by":"bkase"}]}
{"id":"bd-1nf","title":"WS4.5 Puffer deps + DGX setup docs","description":"Goal: document and wire pufferlib dependency setup for DGX and local use.\n\nScope\n- pyproject.toml: add [dependency-groups].puffer with pufferlib pin and required runtime deps (gymnasium, pygame, opencv-python, cython, etc.).\n- Makefile: add targets:\n  - setup-puffer (uv sync --group puffer)\n  - bench-cpu-puffer (runs scaling sweep with pyboy_puffer_vec)\n- Add docs/DGX_PUFFER_SETUP.md with:\n  - OS package prerequisites (libgl, libglib2.0-0, libsdl2, build tools)\n  - uv sync commands\n  - smoke commands for a 1-env Serial run\n  - note about numpy==1.23.3 constraint from pufferlib and potential conflict with base env\n\nDoD\n- Docs explain how to install and run puffer baselines on DGX Spark.\n- Make targets documented and functional when deps installed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:50:59.405081653Z","created_by":"bkase","updated_at":"2026-01-23T07:03:25.868099601Z","closed_at":"2026-01-23T07:03:25.868044289Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1nq8","title":"Clamp large cycle counts when applying PyBoy state","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T10:39:14.251626046Z","created_by":"bkase","updated_at":"2026-01-25T10:39:27.331378638Z","closed_at":"2026-01-25T10:39:27.331349757Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1o8","title":"Story 7.1: Implement harness CLI skeleton","description":"Scope\n- Implement bench/harness.py with backend selection and ROM/suite inputs.\n- Support stage emulate_only, steps, warmup, and output dir.\n- Emit JSON artifact per run.\n\nAcceptance\n- CLI runs pyboy_single baseline and writes JSON under bench/runs/.\n\nRefs\n- history/m0-epics.md (Story 7.1)\n- ARCHITECTURE.md (Section 8: benchmarking protocol)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:40.110046613Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.071493050Z","deleted_at":"2026-01-21T09:15:23.071483226Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-1omt","title":"RL M3-B: goal template artifact IO + metadata validation","description":"Implement strict goal template artifact handling. Add src/gbxcule/rl/goal_template.py with GoalTemplateMeta dataclass (schema_version, rom/state/actions hashes, action_codec_id, frames_per_step, release_after_frames, downsample dims, stack_k, shade_levels, dist_metric, tau, k_consecutive, pipeline_version, created_at). Provide compute_sha256(path), load_actions_trace_jsonl (expects JSON list per line, supports multi-env), save_goal_template (atomic write .npy + .meta.json), load_goal_template (validates dtype/shape + meta vs runtime overrides). Tests in tests/test_rl_goal_template.py for invalid shapes/meta mismatch and hashing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T03:55:18.609150240Z","created_by":"bkase","updated_at":"2026-01-26T04:01:35.358066005Z","closed_at":"2026-01-26T04:01:35.358008564Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1ong","title":"WSA: Update Warp joypad mapping to new v1 indices","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T13:44:12.787000422Z","created_by":"bkase","updated_at":"2026-01-27T13:44:20.166343944Z","closed_at":"2026-01-27T13:44:20.166292425Z","close_reason":"Completed (plan updated in history/a2c-wa.md)","compaction_level":0,"original_size":0}
{"id":"bd-1pa","title":"WS0: Allow warp_vec_cuda in harness CLI choices","description":"Update bench/harness.py CLI choices to accept warp_vec_cuda for --backend and --dut-backend.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:21:24.553760186Z","created_by":"bkase","updated_at":"2026-01-22T12:34:46.027125604Z","closed_at":"2026-01-22T12:23:36.921739319Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1pa","depends_on_id":"bd-1kg","type":"blocks","created_at":"2026-01-22T12:34:46.027102548Z","created_by":"bkase"}]}
{"id":"bd-1pb","title":"WS3: JOY_DIVERGE_PERSIST verification + divergence tests","description":"Goal: prove JOYP-driven divergence and correctness with deterministic tests and verify profiles.\n\nScope / changes:\n- Add a deterministic action generator for divergence (e.g., `striped`) in `bench/harness.py`:\n  - For env_idx mod 4, pick fixed directional actions (UP/DOWN/LEFT/RIGHT) within current action codec.\n  - Record generator metadata in artifacts.\n- Add verify test(s):\n  - `pyboy_single` vs `warp_vec_cpu` on `JOY_DIVERGE_PERSIST.gb` with `frames_per_step=24`, `release_after_frames=8`, `verify_steps≈16–64`, `--mem-region C000:C010`.\n- Add warp-only multi-env divergence test:\n  - `warp_vec_cpu` with `num_envs=4`, fixed actions `[UP, DOWN, LEFT, RIGHT]`.\n  - After N steps, hash `0xC000:0xC010` per env and assert not all equal.\n\nAcceptance criteria:\n- Tests pass on CPU-only environments without CUDA.\n- Divergence test provides a clear, deterministic receipt that per-env JOYP state is respected.\n\nNotes:\n- Keep tests fast (<1s each).\n- Avoid brittle action sequences; use deterministic patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:13:32.366599488Z","created_by":"bkase","updated_at":"2026-01-23T06:28:27.688697312Z","closed_at":"2026-01-23T06:28:27.688669631Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1pl","title":"Epic 8: Verification scaffold + mismatch repro bundles","description":"Intent: Add verify mode to the harness that compares ref vs DUT, fails fast on mismatch, and emits a reproducible mismatch bundle (JSON-only + repro.sh).\n\nKey refs to read: ARCHITECTURE.md (correctness + mismatch bundle), CONSTITUTION.md (verifiable rewards), history/epic6789.md, src/gbxcule/backends/common.py, src/gbxcule/core/signatures.py, bench/harness.py, src/gbxcule/backends/warp_vec.py.\n\nMusts:\n- MISMATCH_SCHEMA_VERSION=1; stable JSON bundle.\n- Actions trace recorded (actions.jsonl) to ensure reproducibility.\n- --actions-file replay path supported (overrides generator).\n- Mismatch bundle written atomically; mismatch exits non-zero with short summary.\n\nAcceptance: verify test fails as expected against DUT stub and produces full bundle with repro.sh.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:42:48.747174241Z","created_by":"bkase","updated_at":"2026-01-21T15:31:12.929316869Z","closed_at":"2026-01-21T15:31:12.929260068Z","close_reason":"Epic 8 complete: verification scaffold with mismatch repro bundles","compaction_level":0,"original_size":0}
{"id":"bd-1ps","title":"WS1: Refactor PyBoySingleBackend to use action codec + schedule","description":"Refactor PyBoySingleBackend to interpret actions exclusively via ActionCodec and use shared schedule helpers.\\n\\nImplementation:\\n- src/gbxcule/backends/pyboy_single.py\\n  - Accept action_codec: str (default legacy_v0 initially)\\n  - Validate release_after_frames <= frames_per_step at init\\n  - Use codec.to_pyboy_button(action) and shared schedule helpers\\n  - Expose backend.num_actions + backend.action_codec metadata\\n\\nDoD:\\n- Existing verify/tests still pass under default codec.\\n- Out-of-range actions error messages reference codec range.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:24.245060118Z","created_by":"bkase","updated_at":"2026-01-23T04:49:47.064320287Z","closed_at":"2026-01-23T04:49:47.064293791Z","close_reason":"Updated pyboy_single to use codec + schedule helpers","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1ps","depends_on_id":"bd-1f5","type":"blocks","created_at":"2026-01-23T04:42:04.195789074Z","created_by":"bkase"},{"issue_id":"bd-1ps","depends_on_id":"bd-32r","type":"blocks","created_at":"2026-01-23T04:42:03.554167325Z","created_by":"bkase"},{"issue_id":"bd-1ps","depends_on_id":"bd-a7j","type":"blocks","created_at":"2026-01-23T04:42:04.889259765Z","created_by":"bkase"}]}
{"id":"bd-1pyq","title":"F5 MBC micro-ROMs + verification tests","description":"Add license-safe MBC micro-ROMs and PyBoy vs Warp verification tests.\n\nDeliverables:\n- Extend ROM generator to build MBC1/MBC3 ROMs with multiple banks:\n  - MBC1_SWITCH.gb\n  - MBC1_RAM.gb\n  - MBC3_SWITCH.gb\n  - MBC3_RAM.gb\n  - optional MBC3_RTC.gb (if RTC implemented)\n- Update suite.yaml to include new ROMs + descriptions.\n- Add/extend verify tests similar to `test_warp_vec_ws3_verify.py`:\n  - pyboy_single vs warp_vec_cpu (step-exact)\n  - CUDA parity if available\n- Prefer WRAM signatures instead of ROM reads for validation.\n\nNotes:\n- Update any existing tests that assumed ROM bytes were mirrored in mem.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:22:32.443325269Z","created_by":"bkase","updated_at":"2026-01-24T16:12:09.176918428Z","closed_at":"2026-01-24T16:12:09.176861947Z","close_reason":"Completed (MBC ROMs + suite/tests updates)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1pyq","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:22:32.449975909Z","created_by":"bkase"},{"issue_id":"bd-1pyq","depends_on_id":"bd-2ajs","type":"blocks","created_at":"2026-01-24T15:22:32.456636869Z","created_by":"bkase"},{"issue_id":"bd-1pyq","depends_on_id":"bd-37c3","type":"blocks","created_at":"2026-01-24T15:22:32.453752503Z","created_by":"bkase"}]}
{"id":"bd-1re","title":"Story 9.1: README why + how to run","description":"Scope\n- README includes premise/hypothesis, uv setup, generate micro-ROMs, run baselines.\n- Explain artifacts under bench/runs/ and how to interpret SPS.\n\nAcceptance\n- README provides a minimal runbook for pyboy_single and pyboy_vec_mp.\n\nRefs\n- history/m0-epics.md (Story 9.1)\n- history/prd.md (Section 15: marketing deliverables)\n- ARCHITECTURE.md (Section 15: docs)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-21T09:12:41.312595415Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.094158630Z","deleted_at":"2026-01-21T09:15:23.094149174Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-1rsc","title":"Milestone F: Cartridge banking + real ROM bring-up","description":"Deliver MBC1 + MBC3 cartridge support and deterministic real-ROM bring-up.\n\nScope:\n- Cartridge header parsing + ROM/RAM sizing\n- Warp backend buffers for ROM + cart RAM + cart state\n- Kernel MMIO mapping for ROM/RAM/RTC + bootrom disable\n- MBC1 banking (ROM/RAM mode)\n- MBC3 banking + deterministic RTC (no wall clock)\n- License-safe MBC micro-ROMs + PyBoy vs Warp verification tests\n- Harness artifacts for cartridge state on mismatch\n\nNon-goals: sound/APU, CGB-specific features, perfect DMA timing.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-24T15:21:31.594935766Z","created_by":"bkase","updated_at":"2026-01-24T15:21:31.594935766Z","compaction_level":0,"original_size":0}
{"id":"bd-1sv","title":"Story 4.2: Add micro-ROM suite file","description":"Scope\n- Add bench/roms/suite.yaml listing at least two ROMs.\n- Each entry includes id/name, relative path, step config fields, and description.\n\nAcceptance\n- suite.yaml is consumed by harness and resolves ROM paths under bench/roms/out/.\n\nRefs\n- history/m0-epics.md (Story 4.2)\n- history/prd.md (Section 10.1: verification scope)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.889092074Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.052548945Z","deleted_at":"2026-01-21T09:15:23.052538897Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-1t5","title":"B4: Implement ALU16 + SP family","description":"Goal: implement 16-bit arithmetic and SP/HL signed add behaviors.\n\nOpcode groups:\n- ADD HL,rr\n- INC/DEC rr\n- ADD SP,e8\n- LD HL,SP+e8\n\nDeliverables:\n- Templates in alu.py (or new module if it fits better).\n- Correct flag behavior for SP+e8 (Z=0, N=0, H/C per low byte add).\n- Micro-ROM that exercises signed offsets and verifies results in WRAM.\n- Step-exact verify test vs PyBoy.\n\nAcceptance criteria:\n- All ALU16/SP opcodes covered in ISA table.\n- New ROM passes verify vs PyBoy.\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B4).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T03:22:52.887837588Z","created_by":"bkase","updated_at":"2026-01-24T04:14:59.495087196Z","closed_at":"2026-01-24T04:14:59.495061100Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1t5","depends_on_id":"bd-g78","type":"blocks","created_at":"2026-01-24T03:23:43.568631877Z","created_by":"bkase"}]}
{"id":"bd-1t7","title":"Epic 2: Makefile + commit-hook automation","description":"Goal\n- Provide fast, consistent local gates via Makefile and pre-commit hook.\n\nScope\n- Makefile targets for setup/fmt/lint/test/roms/bench/smoke/verify/check/hooks.\n- Hook installer via git config core.hooksPath.\n- Smoke target for quick sanity.\n\nAcceptance\n- make setup/test/bench/verify/check work via uv run.\n- Pre-commit hook exists and runs make check.\n- Hook output is actionable and failures are clear.\n\nRefs\n- history/epic2.md\n- history/m0-epics.md (Epic 2)\n- ARCHITECTURE.md (Sections 11.4-11.5)","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-21T11:09:55.397940539Z","created_by":"bkase","updated_at":"2026-01-21T11:14:25.428250136Z","closed_at":"2026-01-21T11:14:25.428196022Z","close_reason":"All stories (2.1, 2.2, 2.3) completed","compaction_level":0,"original_size":0}
{"id":"bd-1tkh","title":"C2: Add streaming A2C trainer script","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T15:02:05.216037541Z","created_by":"bkase","updated_at":"2026-01-27T15:05:47.669081357Z","closed_at":"2026-01-27T15:05:47.669053165Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1ts","title":"WS4: extend VecBackend read_memory + pyboy_single","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T07:45:14.619238124Z","created_by":"bkase","updated_at":"2026-01-22T07:46:04.235072122Z","closed_at":"2026-01-22T07:46:04.235015864Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1u0","title":"WS3: Opcode additions for JOY_DIVERGE_PERSIST","description":"Goal: add the minimal GB opcodes needed by the new JOY_DIVERGE_PERSIST micro-ROM, with correct flags + cycle counts to keep verify alignment.\n\nScope / changes:\n- Add opcode templates in `src/gbxcule/kernels/cpu_templates` (ALU/jumps/loads):\n  - `LD A,(HL)` (0x7E) via `template_ld_r8_hl` (DST = a_i).\n  - `AND d8` (0xE6): A &= imm8, flags: Z set if zero, N=0, H=1, C=0, cycles=8.\n  - `DEC r8` (0x05 for B): flags: Z set if result 0, N=1, H set if borrow from bit 4; cycles=4.\n  - `JR NZ,r8` (0x20) and `JR Z,r8` (0x28): conditional branch, cycles=12 when taken, 8 when not.\n- Wire opcodes into `src/gbxcule/kernels/cpu_step.py` with proper replacements.\n\nAcceptance criteria:\n- New opcode templates compile into the kernel without errors.\n- `make verify` still passes for ALU_LOOP and MEM_RWB (no regressions).\n\nNotes:\n- Keep semantics aligned with PyBoy; don't add more opcodes than necessary.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:13:13.853009317Z","created_by":"bkase","updated_at":"2026-01-23T06:21:48.247420360Z","closed_at":"2026-01-23T06:21:48.247364840Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1ue","title":"Story 4.1: Implement micro-ROM builder","description":"Scope\n- Implement bench/roms/build_micro_rom.py to generate at least ALU_LOOP.gb and MEM_RWB.gb.\n- Output location: bench/roms/out/.\n\nAcceptance\n- ROMs load and execute under PyBoy headless without crashing for a small step count.\n\nRefs\n- history/m0-epics.md (Story 4.1)\n- history/prd.md (Section 12: E1-E3 ROMs)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.783108381Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.088489035Z","deleted_at":"2026-01-21T09:15:23.088479275Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-1ue0","title":"M5 Eval: D1 audit failure modes","description":"Document current eval failure modes and acceptance checks.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T15:21:47.927371913Z","created_by":"bkase","updated_at":"2026-01-27T15:24:33.301145881Z","closed_at":"2026-01-27T15:24:33.301088585Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1uu","title":"WS7: Bench-gpu report pipeline + README update","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:43:16.700970602Z","created_by":"bkase","updated_at":"2026-01-22T14:49:10.191224899Z","closed_at":"2026-01-22T14:49:10.191198627Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1v6z","title":"Load/apply cartridge RAM from PyBoy state files","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T09:46:04.935850063Z","created_by":"bkase","updated_at":"2026-01-25T09:48:06.457548962Z","closed_at":"2026-01-25T09:48:06.457521857Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1vo","title":"WS5: verify-mismatch gate for repro bundles","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T09:18:34.454848260Z","created_by":"bkase","updated_at":"2026-01-22T09:28:40.651580429Z","closed_at":"2026-01-22T09:28:40.651523996Z","close_reason":"Add stub_bad backend + make verify-mismatch","compaction_level":0,"original_size":0}
{"id":"bd-1wm8","title":"A2C WB B4: Tests + alloc regression guard","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T14:01:36.755288624Z","created_by":"bkase","updated_at":"2026-01-27T14:52:51.379834949Z","closed_at":"2026-01-27T14:52:51.379777637Z","close_reason":"Adjusted PyBoy state load test to avoid skip","compaction_level":0,"original_size":0,"comments":[{"id":11,"issue_id":"bd-1wm8","author":"bkase","text":"Reopened: Reopening: should remain open until implementation is complete","created_at":"2026-01-27T14:05:14Z"},{"id":13,"issue_id":"bd-1wm8","author":"bkase","text":"Reopened: Additional test fixes needed after CUDA run","created_at":"2026-01-27T14:45:26Z"},{"id":14,"issue_id":"bd-1wm8","author":"bkase","text":"Reopened: Adjust CUDA reset-cache and pixel stream tests","created_at":"2026-01-27T14:50:47Z"},{"id":15,"issue_id":"bd-1wm8","author":"bkase","text":"Reopened: Remove skip in PyBoy state load test","created_at":"2026-01-27T14:52:35Z"}]}
{"id":"bd-1xn","title":"WS3: Implement CUDA slice-copy read_memory","description":"WarpVecCudaBackend.read_memory uses wp.copy with src_offset/count into a small CPU buffer.\n\nDoD:\n- No full-buffer .numpy() on CUDA; only requested range copied.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T12:34:50.730503244Z","created_by":"bkase","updated_at":"2026-01-22T13:49:49.808115588Z","closed_at":"2026-01-22T13:49:49.808059204Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1xn","depends_on_id":"bd-11d","type":"parent-child","created_at":"2026-01-22T12:34:50.741559927Z","created_by":"bkase"}]}
{"id":"bd-1xy","title":"WS2: Add CUDA warmup path","description":"Add a CUDA warmup function so CUDA benchmarks don't include first-time kernel compilation.\n\nImplementation note: warmup should be per-device (CPU warmup must not accidentally mark CUDA warmed, and vice versa).","acceptance_criteria":"1) Add `warmup_warp_cuda(device=\"cuda:0\")` that allocates minimal buffers on CUDA, launches `cpu_step` once, then synchronizes.\n2) Warmup tracking is per-device (CPU and CUDA warmup are independent).\n3) Called from `WarpVecCudaBackend` init or first reset on DGX.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:34:48.738616828Z","created_by":"bkase","updated_at":"2026-01-22T13:28:51.655001667Z","closed_at":"2026-01-22T13:28:51.654975523Z","close_reason":"Implemented per-device warmup_warp_cuda","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1xy","depends_on_id":"bd-39h","type":"parent-child","created_at":"2026-01-22T12:34:48.745514935Z","created_by":"bkase"}]}
{"id":"bd-1yb","title":"WS6: Capture GPU + driver info in mismatch bundles","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:26:07.727319160Z","created_by":"bkase","updated_at":"2026-01-22T14:28:25.744843683Z","closed_at":"2026-01-22T14:28:25.744784944Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1z4h","title":"m0: canonical inputs config (ROM/state/actions)","description":"Select canonical inputs for the m0 pixel-smoke run and store them in-repo for reuse.\n\nDetails:\n- Define a single canonical Pokemon Red ROM path (red.gb) and a stable .state path under states/.\n- Define a deterministic short action trace using only existing action indices [0..6] (A,B,START,UP,DOWN,LEFT,RIGHT).\n- Record frames_per_step=24 and release_after_frames=8.\n- Store these inputs in a machine-readable config file (e.g., configs/m0_pokered_smoke.json) for use by the CLI + tests.\n- Include metadata fields for steps and save_every defaults.\n\nAcceptance:\n- New config file exists with the above fields and values.\n- No changes to action codecs or action space.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:08:10.131022577Z","created_by":"bkase","updated_at":"2026-01-25T16:09:46.068232594Z","closed_at":"2026-01-25T16:09:46.068173777Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-1ze","title":"Epic5 (optional): Action mapping constants","description":"Optional: Add action mapping constants/helper in common.py to keep action meanings stable across backends (noop/up/down/left/right/A/B/start/select).\n\nAcceptance:\n- Single canonical mapping used by pyboy_single and future backends.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T14:24:26.045455855Z","created_by":"bkase","updated_at":"2026-01-21T14:48:08.766212211Z","closed_at":"2026-01-21T14:48:08.766184851Z","close_reason":"Added action mapping constants and action_to_button helper","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1ze","depends_on_id":"bd-2ik","type":"parent-child","created_at":"2026-01-21T14:24:26.052653716Z","created_by":"bkase"}]}
{"id":"bd-1zkl","title":"E6: Oracle ladder + CUDA parity for Milestone E ROMs","description":"Goal:\n- Close the oracle ladder: PyBoy → Warp CPU → Warp CUDA for new Milestone E ROMs.\n\nDeliverables:\n- Add verify tests for new ROMs:\n  - PyBoy vs Warp CPU (frame hashes + any needed mem regions)\n  - Warp CPU vs Warp CUDA (guarded by CUDA availability)\n- Keep tests short (respect 2-minute suite budget); ensure CUDA tests are skip-if-unavailable.\n\nFiles likely touched:\n- tests/test_ppu_* (new verify tests)\n- tests/test_verify_cuda_micro_roms.py (add new ROMs)\n- bench/roms/suite.yaml (new ROMs referenced)\n\nAcceptance checks:\n- `make test` on CPU-only works\n- CUDA tests pass when available","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T13:11:58.196545469Z","created_by":"bkase","updated_at":"2026-01-24T15:16:28.152730848Z","closed_at":"2026-01-24T15:16:28.152659759Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["cuda","milestone-e","verification"],"dependencies":[{"issue_id":"bd-1zkl","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:58.215110148Z","created_by":"bkase"}]}
{"id":"bd-21b","title":"WS1: Validate uv sync behavior on linux/aarch64 and macOS","description":"Execute/install validation once WS1 changes land.\\n\\nDoD:\\n- On linux/aarch64 (DGX Spark): uv sync installs Warp from pinned cu13 URL; proof captured via direct_url.json and warp init.\\n- On macOS: uv sync works with no special steps (Warp from registry).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:25:25.380593584Z","created_by":"bkase","updated_at":"2026-01-22T13:13:29.717260369Z","closed_at":"2026-01-22T13:13:29.717232497Z","close_reason":"macOS validation passed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-21b","depends_on_id":"bd-1ju","type":"blocks","created_at":"2026-01-22T12:26:32.349786267Z","created_by":"bkase"},{"issue_id":"bd-21b","depends_on_id":"bd-t7w","type":"parent-child","created_at":"2026-01-22T12:25:25.387554616Z","created_by":"bkase"}],"comments":[{"id":5,"issue_id":"bd-21b","author":"bkase","text":"DGX Spark validation: uv sync --frozen installed warp-lang==1.11.0+cu13 from direct URL. warp init shows CUDA Toolkit 13.0 / Driver 13.0; devices include cuda:0. direct_url.json points to https://github.com/NVIDIA/warp/releases/download/v1.11.0/warp_lang-1.11.0+cu13-py3-none-manylinux_2_34_aarch64.whl.\\nMacOS validation still pending.","created_at":"2026-01-22T12:40:40Z"},{"id":6,"issue_id":"bd-21b","author":"bkase","text":"macOS validation reported: warp version 1.11.0; CUDA not enabled; devices ['cpu']; direct_url.json: None (expected for PyPI).","created_at":"2026-01-22T13:13:29Z"}]}
{"id":"bd-22a","title":"Doc: add mem-region verify example","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-22T09:00:09.532358140Z","created_by":"bkase","updated_at":"2026-01-22T09:00:52.578403091Z","closed_at":"2026-01-22T09:00:52.578376323Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-23z","title":"Epic 7: Harness CLI for benchmark + reporting","description":"Goal\n- Provide a single harness CLI to run baselines and emit structured JSON results.\n\nScope\n- CLI options for backend selection, ROM/suite, steps/warmup, output dir.\n- Scaling run support with env-counts list.\n- Deterministic action generation recorded in artifacts.\n\nAcceptance\n- pyboy_single and pyboy_vec_mp runs produce JSON artifacts under bench/runs/.\n- Artifacts include schema_version and required fields.\n\nRefs\n- history/m0-epics.md (Epic 7)\n- history/prd.md (Sections 11, 12, 19)\n- ARCHITECTURE.md (Sections 2.2, 4, 8)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:39.954255465Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.108992700Z","deleted_at":"2026-01-21T09:15:23.108983164Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-24r7","title":"m0: document plan in history/m0-plan.md","description":"Write and commit the m0 plan document under history/.\n\nDetails to include:\n- Derive constraints from history/simple-rl.md and CONSTITUTION.md.\n- Explicitly state non-negotiables: GPU-first, pixel-only observations, 24 frames/step, deterministic fast gate.\n- Record user constraint: keep action space as-is (7 actions, no NOOP).\n- Define deliverables, acceptance criteria, and non-goals.\n\nAcceptance:\n- history/m0-plan.md exists and captures all of the above.\n- No code changes beyond the plan doc.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:08:02.321481613Z","created_by":"bkase","updated_at":"2026-01-25T16:09:14.767067019Z","closed_at":"2026-01-25T16:09:14.767009273Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-254","title":"WS5: CUDA correctness vs PyBoy micro-ROMs","description":"Fix CPU-vs-CUDA semantic differences so verify passes for ALU_LOOP and MEM_RWB on DGX.\n\nDoD:\n- make verify-gpu passes on DGX repeatedly.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-22T12:34:53.587583700Z","created_by":"bkase","updated_at":"2026-01-22T14:19:44.318252403Z","closed_at":"2026-01-22T14:19:44.318225427Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-254","depends_on_id":"bd-11d","type":"blocks","created_at":"2026-01-22T12:34:54.545248843Z","created_by":"bkase"},{"issue_id":"bd-254","depends_on_id":"bd-39h","type":"blocks","created_at":"2026-01-22T12:34:54.086057267Z","created_by":"bkase"}]}
{"id":"bd-267r","title":"m0: CLI env0 pixel smoke tool","description":"Implement the m0 pixel-smoke CLI tool for env0 BG shade frames.\n\nDetails:\n- Add tools/pokered_pixel_smoke.py.\n- Use WarpVec backend with render_bg=True, frames_per_step=24, release_after_frames=8.\n- Load canonical inputs from the m0 config file (ROM/state/actions).\n- Support flags to override backend, ROM/state, steps, save cadence, and actions source (file or seed).\n- Validate frames_per_step == 24 and action range [0..6].\n- Each step: step env, read read_frame_bg_shade_env0(), hash frame, optionally write PNG.\n- Emit meta.json + actions.jsonl + frames.jsonl in output dir.\n\nAcceptance:\n- CLI runs on CPU and CUDA (when available).\n- Output artifacts are deterministic given the same actions.\n- No new dependencies beyond ones already used in repo (Pillow is OK).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:08:17.940453810Z","created_by":"bkase","updated_at":"2026-01-25T16:11:12.570392815Z","closed_at":"2026-01-25T16:11:12.570364702Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-275o","title":"D3: PPU renderer kernel (BG, scanline latches)","description":"Goal:\n- Implement renderer kernel to produce env0 BG framebuffer using scanline latches.\n\nSpec (Milestone D D0.5):\n- Renderer consumes per-scanline latches (LCDC/SCX/SCY/BGP) captured by CPU kernel.\n- No mid-scanline effects; one latch set per scanline.\n- VRAM reads at render time; ROMs must not rely on VRAM writes during visible scanlines.\n- Output shade indices (0..3) into frame_bg_shade_env0[160*144].\n\nImplementation details:\n- Implement in `src/gbxcule/kernels/ppu_step.py`:\n  - Provide a warp kernel, e.g. `ppu_render_bg_env0(mem, bg_*_latch_env0, frame_bg_shade_env0)`.\n  - Preferred launch: 2D grid (y,x) = one thread per pixel.\n  - Tile map/tile data addressing per spec (LCDC bit3/bit4, signed/unsigned).\n  - Apply BGP mapping to shade (0..3) and store.\n- Optional: compute frame hash later (not required here).\n\nTouch points:\n- `src/gbxcule/kernels/ppu_step.py`\n- (Maybe) `src/gbxcule/kernels/__init__.py` to expose kernel getter.\n\nTests:\n- Add unit-ish test to render a tiny, known VRAM pattern (if feasible) or rely on D6 integration tests.\n\nAcceptance:\n- Kernel renders a full env0 frame from latches deterministically.\n- No dependence on dot-level timing.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T11:36:16.407994618Z","created_by":"bkase","updated_at":"2026-01-24T11:51:04.016444806Z","closed_at":"2026-01-24T11:51:04.016388613Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-275o","depends_on_id":"bd-2l51","type":"blocks","created_at":"2026-01-24T11:36:28.850406484Z","created_by":"bkase"}]}
{"id":"bd-27f","title":"Epic8: Verify-mode bundle test","description":"Add an end-to-end test for verify mode and mismatch bundle creation.\n\nScope:\n- Run bench/harness.py --verify with ref=pyboy_single, dut=warp_vec stub, small verify_steps (e.g., 4).\n- Assert non-zero exit.\n- Assert bundle directory exists with required files: metadata.json, ref_state.json, dut_state.json, diff.json, actions.jsonl, repro.sh.\n- Validate metadata includes required keys and repro.sh uses uv run + --actions-file.\n\nAcceptance:\n- Test is deterministic and fast; failures are actionable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:43:24.436051199Z","created_by":"bkase","updated_at":"2026-01-21T15:30:53.387140072Z","closed_at":"2026-01-21T15:30:53.387081959Z","close_reason":"Added 6 tests for state diff and mismatch bundle (TestStateDiff, TestMismatchBundle)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27f","depends_on_id":"bd-1pl","type":"parent-child","created_at":"2026-01-21T14:43:24.452571542Z","created_by":"bkase"}]}
{"id":"bd-27l","title":"WS4: Add --sync-every CLI + default for CUDA","description":"Introduce --sync-every K flag; default to 64 for CUDA benchmark runs.\n\nDoD:\n- CLI arg wired; default applied only on CUDA bench.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:34:52.634288174Z","created_by":"bkase","updated_at":"2026-01-22T14:06:12.066223578Z","closed_at":"2026-01-22T14:06:12.066166554Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27l","depends_on_id":"bd-2hw","type":"parent-child","created_at":"2026-01-22T12:34:52.641518137Z","created_by":"bkase"}]}
{"id":"bd-27o","title":"WS3: Add DGX test for mem-region read","description":"Add/extend tests to read a small range (e.g., C000:C100) on CUDA and compare expected bytes.\n\nDoD:\n- CUDA test passes on DGX.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:34:51.187113675Z","created_by":"bkase","updated_at":"2026-01-22T13:51:03.557359842Z","closed_at":"2026-01-22T13:51:03.557305218Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27o","depends_on_id":"bd-11d","type":"parent-child","created_at":"2026-01-22T12:34:51.194233014Z","created_by":"bkase"}]}
{"id":"bd-27r","title":"Epic4: Tests for ROM generation + headless PyBoy smoke","description":"Implement tests/test_micro_roms.py to verify ROM generation and headless execution.\n\nTests (fast + deterministic):\n- Build ROMs into temp dir; assert files exist and non-zero.\n- Validate header checksum and global checksum against recomputed values.\n- PyBoy headless smoke: load ROMs with window=\"null\", sound_emulated=False; set_emulation_speed(0); tick a small number of frames; stop without saving.\n\nAcceptance:\n- Tests pass on CPU-only (macOS/cloud).\n- Clear failure messages for checksum mismatches or PyBoy load issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:23:09.723360864Z","created_by":"bkase","updated_at":"2026-01-21T14:45:20.516797206Z","closed_at":"2026-01-21T14:45:20.516739350Z","close_reason":"Added comprehensive tests for ROM generation and PyBoy headless smoke","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27r","depends_on_id":"bd-3tr","type":"parent-child","created_at":"2026-01-21T14:23:09.739434677Z","created_by":"bkase"}]}
{"id":"bd-289","title":"WS5: Makefile verify profiles + proper exit codes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T09:18:34.023305560Z","created_by":"bkase","updated_at":"2026-01-22T09:25:57.088758910Z","closed_at":"2026-01-22T09:25:57.088733054Z","close_reason":"Add make verify + verify-smoke (warp_vec_cpu; exit codes)","compaction_level":0,"original_size":0}
{"id":"bd-28h9","title":"WSA: Canonical action codec v1 (remove v0, make v1 default)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T13:57:59.860234150Z","created_by":"bkase","updated_at":"2026-01-27T13:58:08.711558861Z","closed_at":"2026-01-27T13:58:08.711530971Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-28i","title":"Epic3: Define run metadata schema + JSON conversion","description":"Add run metadata schema dataclasses and JSON conversion helpers (stdlib json only).\n\nScope (likely in common.py):\n- RESULT_SCHEMA_VERSION = 1.\n- Dataclasses: SystemInfo, RunConfig, RunResult (as per epic345.md).\n- run_artifact_to_json_dict(...) or to_json_dict methods with tuple->list conversion and JSON-safe values.\n- Include fields: backend/device, rom_path/sha256, stage, num_envs, frames_per_step, release_after_frames, steps, warmup_steps, actions_seed, sync_every; results: measured_steps, seconds, total_sps, per_env_sps, frames_per_sec.\n\nAcceptance:\n- json.dumps on the output dict works without custom encoders.\n- Schema keys are stable and explicit.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:15:27.955478162Z","created_by":"bkase","updated_at":"2026-01-21T14:22:12.572629882Z","closed_at":"2026-01-21T14:22:12.572602666Z","close_reason":"Added run metadata schema: SystemInfo, RunConfig, RunResult dataclasses + run_artifact_to_json_dict","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-28i","depends_on_id":"bd-2m1","type":"parent-child","created_at":"2026-01-21T14:15:27.971356841Z","created_by":"bkase"}]}
{"id":"bd-28na","title":"Fix EI delay semantics (EI_DELAY_PC ROM)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-24T10:29:11.554528221Z","created_by":"bkase","updated_at":"2026-01-24T10:29:24.421926254Z","closed_at":"2026-01-24T10:29:24.421899166Z","close_reason":"Added EI_DELAY_PC ROM + fixed IME delay","compaction_level":0,"original_size":0}
{"id":"bd-28oh","title":"m0: fix canonical state for pixel smoke","description":"Update m0 canonical config to use a Pokemon Red .state that yields non-blank env0 frames.\n\nDetails:\n- Current state in configs/m0_pokered_smoke.json yields all-zero frames in tests.\n- Switch to a state under states/ that produces at least 2 shade values when rendered.\n- Keep ROM path red.gb, frames_per_step=24, release_after_frames=8, and action list unchanged.\n\nAcceptance:\n- CPU smoke test frame invariants pass (non-constant frame).\n- CLI uses the new state by default.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:19:42.520839342Z","created_by":"bkase","updated_at":"2026-01-25T16:20:15.955291132Z","closed_at":"2026-01-25T16:20:15.955233418Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-297","title":"WS1: Add [tool.uv.sources] warp-lang override with arch-aware markers","description":"Update pyproject.toml to force Warp cu13 wheel(s) on Linux using uv sources + markers, while keeping macOS on PyPI.\\n\\nKey requirement (from M3 arch doc): keep dependencies = [\"warp-lang>=...\"] and add a tool.uv.sources override.\\n\\nSpecial constraint:\\n- DGX Spark is linux/aarch64, so markers must cover that platform.\\n\\nDoD:\\n- pyproject.toml contains a uv source override for warp-lang using marker(s) that select cu13 wheel(s) on linux/aarch64 (and optionally linux/x86_64).\\n- macOS resolution remains registry-based (no URL source selected).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T12:25:24.530295787Z","created_by":"bkase","updated_at":"2026-01-22T12:38:20.074485605Z","closed_at":"2026-01-22T12:38:20.074429909Z","close_reason":"Added uv source overrides for Linux cu13 wheels","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-297","depends_on_id":"bd-29w","type":"blocks","created_at":"2026-01-22T12:26:31.369866008Z","created_by":"bkase"},{"issue_id":"bd-297","depends_on_id":"bd-t7w","type":"parent-child","created_at":"2026-01-22T12:25:24.537614117Z","created_by":"bkase"}],"comments":[{"id":2,"issue_id":"bd-297","author":"bkase","text":"Added [tool.uv.sources] warp-lang overrides with arch-aware Linux markers for cu13 wheels (aarch64 + x86_64). Keeps macOS on PyPI.","created_at":"2026-01-22T12:38:13Z"}]}
{"id":"bd-299","title":"Story 1.3: Provide uv-only run interface","description":"Scope\n- Document canonical commands using uv run.\n- Add minimal README quickstart (uv sync, uv run pytest, uv run python -m gbxcule).\n- Add tests/test_imports.py to assert importability and __version__.\n\nAcceptance\n- uv run pytest -q passes (import test).\n- uv run python -m gbxcule prints guidance.\n\nRefs\n- history/epic1.md (Story 1.3)\n- history/m0-epics.md (Epic 1 acceptance)\n- CONSTITUTION.md (Section I: verifiable rewards; Section III: shift-left)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:37.972959111Z","created_by":"bkase","updated_at":"2026-01-21T09:21:08.121252407Z","closed_at":"2026-01-21T09:21:08.121193975Z","close_reason":"Implemented: README quickstart, tests/test_imports.py, all acceptance criteria pass","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-299","depends_on_id":"bd-2sn","type":"parent-child","created_at":"2026-01-21T09:12:37.980455451Z","created_by":"bkase"}]}
{"id":"bd-29ku","title":"m5-4: PPO-lite training CLI (logging + checkpoints)","description":"Implement a CUDA-only training script that runs rollout -> PPO update with structured logs and resume.\n\nDeliverables:\n- Add tools/rl_m5_train.py (or bench/rl/train_ppo_pixels.py) that:\n  - Uses PokeredPixelsGoalEnv (pixels-only reward/done).\n  - Asserts action space == 7.\n  - Collects rollouts on GPU, computes GAE, runs PPO update.\n  - Writes JSONL logs (one line per update + run metadata).\n  - Saves checkpoints atomically and supports --resume.\n- Include config fields: rom, state, goal_dir, N, T, lr, gamma, lambda, clip, entropy/value coefs, eval_every, seed.\n\nAcceptance:\n- A short run (e.g., --updates 1 --rollout-steps 8) completes on CUDA.\n- No host transfers in the hot loop (no .cpu()/.numpy() in rollout collection).\n- Logs and checkpoint are produced in output dir.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:32:11.082589230Z","created_by":"bkase","updated_at":"2026-01-26T06:53:37.003822450Z","closed_at":"2026-01-26T06:53:37.003757762Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-29l9","title":"M4A: Write contract doc for pixel reward + autoreset","description":"Write a concise but unambiguous M4 contract document that pins down step semantics for the pixels-only RL wrapper.\n\nContext (already implemented):\n- M1 pixels: snapshot downsampled renderer + backend pixel buffer (src/gbxcule/kernels/ppu_render_downsampled.py), WarpVec*Backend(render_pixels=True).\n- M2 torch pixels wrapper: src/gbxcule/rl/pokered_pixels_env.py (returns stacked uint8 obs, no reward).\n- M3 goal templates + matching: src/gbxcule/rl/goal_template.py, src/gbxcule/rl/goal_match.py, src/gbxcule/rl/replay_goal_template.py.\n\nDeliverable:\n- Add history/simple-rl-m4-contract.md describing:\n  - Action space is unchanged (no NOOP).\n  - Tensor contracts (dtype/shape/device):\n    - pixels: uint8[N,72,80] in [0,3]\n    - obs_stack: uint8[N,K,72,80]\n    - reward: float32[N], done/trunc: bool[N]\n  - Autoreset semantics (recommended): done/trunc refer to the transition that ended; returned obs_stack is post-reset for reset envs.\n  - Reward formula (pixel-only): dist = mean(|frame-goal|)/3, r = step_cost + alpha*(prev_dist-dist) + goal_bonus*done.\n  - Done definition: dist < tau for K consecutive steps.\n  - Truncation: episode_step >= max_steps.\n  - reset_mask = done | trunc and what must be restored on reset (emulator state + torch-side trackers + obs stack + pixel buffer consistency).\n  - \"GPU-only hot path\" definition: no .cpu() / sync inside step(); tests/tools may synchronize.\n  - M4 gates: unit tests for reward math; reset correctness test; determinism smoke gate.\n\nAcceptance:\n- Document is specific enough to derive tests and implement without ambiguity.\n- Mentions CONSTITUTION.md requirements explicitly (functional core/imperative shell, verifiable rewards, etc.).","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-26T04:49:11.441686664Z","created_by":"bkase","updated_at":"2026-01-26T04:51:32.699013112Z","closed_at":"2026-01-26T04:51:32.698954392Z","close_reason":"Contract doc added (history/simple-rl-m4-contract.md) and M4 plan tracked.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-29l9","depends_on_id":"bd-1lpa","type":"parent-child","created_at":"2026-01-26T04:49:11.458483159Z","created_by":"bkase"}]}
{"id":"bd-29w","title":"WS1: Select pinned Warp cu13 wheel URL(s) for linux/aarch64","description":"DGX Spark is arm-based (aarch64). Identify the exact Warp CUDA 13 (cu13) wheel release asset URL(s) to pin for Linux installs.\\n\\nNotes:\\n- Prefer pinning a specific Warp version (likely match current lock unless upgrading intentionally).\\n- Ensure wheel tag matches linux/aarch64 and project Python (>=3.11).\\n- Optional: also pin linux/x86_64 cu13 URL if we want to support both Linux arches.\\n\\nDoD:\\n- Concrete URL(s) recorded (aarch64 required; x86_64 decision documented).\\n- Version pin rationale documented.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T12:25:24.088190005Z","created_by":"bkase","updated_at":"2026-01-22T12:37:45.119631051Z","closed_at":"2026-01-22T12:37:45.119604731Z","close_reason":"Selected cu13 URLs (aarch64 + x86_64)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-29w","depends_on_id":"bd-t7w","type":"parent-child","created_at":"2026-01-22T12:25:24.104158733Z","created_by":"bkase"}],"comments":[{"id":1,"issue_id":"bd-29w","author":"bkase","text":"Selected Warp v1.11.0 cu13 wheel URLs (match current uv.lock version to avoid upgrade):\\n- aarch64: https://github.com/NVIDIA/warp/releases/download/v1.11.0/warp_lang-1.11.0+cu13-py3-none-manylinux_2_34_aarch64.whl\\n- x86_64: https://github.com/NVIDIA/warp/releases/download/v1.11.0/warp_lang-1.11.0+cu13-py3-none-manylinux_2_28_x86_64.whl\\nRationale: keeps macOS on PyPI; Linux (aarch64/x86_64) uses cu13.\\nSources: NVIDIA/warp install docs + release assets.","created_at":"2026-01-22T12:37:40Z"}]}
{"id":"bd-2ajs","title":"F4 MBC3 banking + deterministic RTC","description":"Implement MBC3 ROM/RAM banking and deterministic RTC behavior (no wall clock).\n\nDeliverables:\n- MBC3 write handling:\n  - 0x0000-0x1FFF RAM enable\n  - 0x2000-0x3FFF ROM bank (7-bit; bank 0 -> 1 fixup)\n  - 0x4000-0x5FFF RAM bank (0-3) or RTC reg select (0x08-0x0C)\n  - 0x6000-0x7FFF latch clock sequence (0->1 edge)\n- Deterministic RTC:\n  - time derived from emulated cycles or frames (never host time)\n  - latch snapshot registers for reads\n- Correct read/write routing in 0xA000-0xBFFF based on RAM enable + RTC select.\n\nNotes:\n- If full RTC is too large, a deterministic stub is acceptable but must be explicit and tested.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:22:24.782282470Z","created_by":"bkase","updated_at":"2026-01-24T16:03:00.924311752Z","closed_at":"2026-01-24T16:03:00.924283416Z","close_reason":"Completed (MBC3 register writes + RTC latch/tick)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ajs","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:22:24.789277192Z","created_by":"bkase"},{"issue_id":"bd-2ajs","depends_on_id":"bd-n96k","type":"blocks","created_at":"2026-01-24T15:22:24.792948010Z","created_by":"bkase"}]}
{"id":"bd-2bfr","title":"A2C WB B0: Define perf baseline + bench tool","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T14:01:32.418723305Z","created_by":"bkase","updated_at":"2026-01-27T14:07:12.029058259Z","closed_at":"2026-01-27T14:07:12.029029826Z","close_reason":"Implemented bench tool","compaction_level":0,"original_size":0,"comments":[{"id":7,"issue_id":"bd-2bfr","author":"bkase","text":"Reopened: Reopening: should remain open until implementation is complete","created_at":"2026-01-27T14:05:14Z"}]}
{"id":"bd-2bz","title":"WS1: Add DGX Spark setup docs (uv sync + provenance proof)","description":"Add docs (docs/DGX_SETUP.md or README section) describing the canonical DGX Spark install steps and how to prove Warp came from the pinned cu13 URL (PEP 610 direct_url.json).\\n\\nDoD:\\n- Doc includes commands for: uv sync, importing warp, initializing CUDA, and printing direct_url.json (if present).\\n- Doc calls out DGX Spark is linux/aarch64.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:25:33.400539982Z","created_by":"bkase","updated_at":"2026-01-22T12:40:01.054328123Z","closed_at":"2026-01-22T12:40:01.054300490Z","close_reason":"DGX Spark setup doc added","compaction_level":0,"original_size":0,"labels":["docs"],"dependencies":[{"issue_id":"bd-2bz","depends_on_id":"bd-t7w","type":"parent-child","created_at":"2026-01-22T12:25:33.420425908Z","created_by":"bkase"}],"comments":[{"id":4,"issue_id":"bd-2bz","author":"bkase","text":"Added docs/DGX_SETUP.md with uv sync, warp init, and PEP 610 direct_url.json provenance checks for linux/aarch64.","created_at":"2026-01-22T12:39:54Z"}]}
{"id":"bd-2cpt","title":"M5 Eval: D6 observability polish","description":"Add lightweight eval summary fields and keep JSON outputs stable.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-27T15:21:54.711850925Z","created_by":"bkase","updated_at":"2026-01-27T15:21:54.711850925Z","compaction_level":0,"original_size":0}
{"id":"bd-2d4","title":"WS7: Implement scaling summary script","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:43:04.096043905Z","created_by":"bkase","updated_at":"2026-01-22T14:45:30.595774247Z","closed_at":"2026-01-22T14:45:30.595748839Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2e3","title":"Workstream 3: Warp CPU subset + cycle accounting","description":"Goal: implement W3 for M2 (CPU interpreter subset + frame/cycle accounting) and pass verify vs pyboy_single on ALU_LOOP + MEM_RWB.\n\nLOCKED SPEC (opcode subset from pastraiser table):\n- 00 NOP (len=1 cyc=4 flags ----)\n- C3 JP a16 (len=3 cyc=16 flags ----)\n- 18 JR r8 (len=2 cyc=12 flags ----)\n- 3E LD A,d8 (len=2 cyc=8 flags ----)\n- 06 LD B,d8 (len=2 cyc=8 flags ----)\n- 21 LD HL,d16 (len=3 cyc=12 flags ----)\n- 3C INC A (len=1 cyc=4 flags Z0H-)\n- 04 INC B (len=1 cyc=4 flags Z0H-)\n- 23 INC HL (len=1 cyc=8 flags ----)\n- 80 ADD A,B (len=1 cyc=4 flags Z0HC)\n- 77 LD (HL),A (len=1 cyc=8 flags ----)\n- 46 LD B,(HL) (len=1 cyc=8 flags ----)\n\nFlag rules: always mask F low nibble (F &= 0xF0). INC: Z=(res==0), N=0, H=((old&0x0F)==0x0F), C unchanged. ADD: Z=(res==0), N=0, H=((A&0x0F)+(B&0x0F)>0x0F), C=(A+B>0xFF).\nPC/immediates: d16 little-endian; JR r8 signed relative to PC after fetch (PC+2).\nFrame stepping: cycles from opcode table; CYCLES_PER_FRAME=70224; maintain cycle_in_frame carry; step(frames_per_step) completes exactly that many frame boundaries (carry preserved).\n\nPlan:\n1) Add fast boot ROM file bench/roms/bootrom_fast_dmg.bin (256 bytes: JP 0x0100 then NOPs).\n2) Use bootrom_fast_dmg.bin in pyboy_single (and pyboy_vec_mp if needed) to bypass real DMG boot.\n3) Reset/ROM load semantics in warp_vec_cpu: load cartridge ROM into mem[0:rom_len], then overlay bootrom[0:0x100]. Initialize regs to 0, PC=0x0000, SP=0x0000.\n4) Implement Warp CPU state buffers (PC, SP, A,B,C,D,E,H,L,F, cycle_count, instr_count, cycle_in_frame) + per-env 64KB mem.\n5) Implement cpu_step kernel for the 12 opcodes + flags + memory reads/writes + PC updates.\n6) Implement frame stepping loop in warp_vec_cpu.step() using kernel(s); ensure determinism.\n7) Update get_cpu_state() to expose counters; normalize flags.\n8) Add unit tests for opcode behavior + flags + JR sign + cycle accounting.\n9) Add integration verify tests: pyboy_single vs warp_vec_cpu passes ALU_LOOP then MEM_RWB (frames_per_step=1, compare_every=1).\n10) Run make test / make check and fix until all tests pass.\n\nAcceptance: harness verify passes for ALU_LOOP + MEM_RWB; mismatch bundles include counters; make check <=2 minutes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:41:30.823791410Z","created_by":"bkase","updated_at":"2026-01-22T05:57:26.147256955Z","closed_at":"2026-01-22T05:57:26.147231386Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2eq","title":"WS7: bench-gpu release-after-frames default","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:52:20.348415015Z","created_by":"bkase","updated_at":"2026-01-22T14:52:44.307883037Z","closed_at":"2026-01-22T14:52:44.307828093Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2fi","title":"Workstream 1: Warp CPU bring-up (E0 plumbing)","description":"Plan: 1) Add backend warp_vec_cpu and keep warp_vec alias in registry + CLI. 2) Warp runtime singleton: import warp as wp, one-time wp.init(), CPU device, optional warmup launch. 3) Trivial Warp kernel inc_counter with per-env int32 buffer on reset. 4) Backend behavior: reset zeros counter + zero obs; step launches kernel + sync; get_cpu_state returns deterministic state from counter (pc/a/counters), fixed flags. 5) Pytest coverage (no importorskip): reset/step shapes, multi-env increments, determinism across identical runs. 6) Acceptance: uv run python bench/harness.py --backend warp_vec_cpu --rom bench/roms/out/ALU_LOOP.gb --steps 10 --warmup-steps 1 runs; identical config/seed yields same state progression; make check stays <=2 min.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T04:38:50.284370791Z","created_by":"bkase","updated_at":"2026-01-22T04:43:27.727886811Z","closed_at":"2026-01-22T04:43:27.727830123Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2gp","title":"WS1: Commit reviewed WS1 plan doc","description":"Track the reviewed WS1 spec as repo documentation.\\n\\nFiles:\\n- history/m4-workstream-1-plan.md\\n\\nDoD:\\n- File is added to git in its own commit.\\n- No other unrelated untracked history docs are accidentally committed.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-23T04:40:58.390221070Z","created_by":"bkase","updated_at":"2026-01-23T04:43:18.521535190Z","closed_at":"2026-01-23T04:43:18.521507798Z","close_reason":"Committed plan doc","compaction_level":0,"original_size":0}
{"id":"bd-2h5","title":"Epic4: Add micro-ROM suite definition","description":"Create bench/roms/suite.yaml describing the micro-ROM suite.\n\nScope:\n- suite_version + defaults (frames_per_step=24, release_after_frames=8).\n- Entries for ALU_LOOP and MEM_RWB with id, path, description, frames_per_step, release_after_frames.\n- Keep paths explicit and stable for harness consumption.\n\nAcceptance:\n- YAML is self-describing and stable; includes all required step semantics fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:23:02.611269895Z","created_by":"bkase","updated_at":"2026-01-21T14:44:14.160626136Z","closed_at":"2026-01-21T14:44:14.160599592Z","close_reason":"Added suite.yaml with ALU_LOOP and MEM_RWB entries","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2h5","depends_on_id":"bd-3tr","type":"parent-child","created_at":"2026-01-21T14:23:02.627022971Z","created_by":"bkase"}]}
{"id":"bd-2hw","title":"WS4: Harness sync policy for CUDA benchmarks","description":"Add --sync-every K policy so CUDA benchmarks are accurate under async kernel launches.\n\nDoD:\n- Default sync_every=64 on CUDA; always sync at end of measurement window; recorded in artifacts.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T12:34:51.707409420Z","created_by":"bkase","updated_at":"2026-01-22T14:09:27.593155889Z","closed_at":"2026-01-22T14:09:27.593129025Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2hw","depends_on_id":"bd-39h","type":"blocks","created_at":"2026-01-22T12:34:52.174425347Z","created_by":"bkase"}]}
{"id":"bd-2ik","title":"Epic 5: Reference baseline backend (pyboy_single)","description":"Intent: Implement the trusted single-env PyBoy backend that conforms to VecBackend, acts as correctness oracle, and provides a baseline for benchmarks.\n\nMusts (ARCHITECTURE/PRD aligned):\n- Implements VecBackend protocol exactly (reset/step/get_cpu_state/close).\n- Runs headless (window=\"null\"), CPU-only, deterministic where possible.\n- Batched outputs (num_envs=1) with correct shapes/dtypes.\n- Canonical CPU-state schema (PC/SP/A/F/B/C/D/E/H/L + flags + optional counters).\n- Fail loud if required fields not readable.\n\nDeliverables:\n- src/gbxcule/backends/pyboy_single.py\n- tests/test_pyboy_single_backend.py\n- (Optional) action mapping constants/helper in common.py\n\nAcceptance: tests validate shapes/dtypes, step semantics, get_cpu_state schema; backend closes cleanly; no hidden side effects.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:23:59.175496328Z","created_by":"bkase","updated_at":"2026-01-21T14:52:33.424243533Z","closed_at":"2026-01-21T14:52:33.424216685Z","close_reason":"Epic 5 complete: pyboy_single backend with full test coverage","compaction_level":0,"original_size":0}
{"id":"bd-2jg","title":"Story 9.2: Devlog tweet draft","description":"Scope\n- Draft devlog tweet with hypothesis, current baselines, what success looks like.\n- Include one reproducible command and a simple artifact (chart/snippet).\n\nAcceptance\n- Draft exists and is ready to post with minor edits.\n\nRefs\n- history/m0-epics.md (Story 9.2)\n- history/prd.md (Section 15: initial marketing deliverable)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-21T09:12:41.526560107Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.119911536Z","deleted_at":"2026-01-21T09:15:23.119905792Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2jg9","title":"B6: Implement rotates/shifts + CB bitops","description":"Goal: implement unprefixed rotates and full CB-prefixed bit operations.\n\nOpcode groups:\n- Unprefixed: RLCA/RLA/RRCA/RRA\n- CB: RLC/RRC/RL/RR/SLA/SRA/SWAP/SRL\n- CB: BIT/RES/SET for all regs and (HL)\n\nDeliverables:\n- New bitops.py module for CB + rotates (per template-organization rule).\n- ISA table entries mapped with correct cycle counts.\n- Micro-ROMs: shift/rotate algebra, BIT/RES/SET correctness (regs + (HL)).\n- Step-exact verify tests vs PyBoy.\n\nAcceptance criteria:\n- All CB opcodes covered in ISA table (no defaults).\n- New ROMs pass verify vs PyBoy.\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B6).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T03:23:08.469596338Z","created_by":"bkase","updated_at":"2026-01-24T07:59:48.278153340Z","closed_at":"2026-01-24T07:59:48.278127563Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2jg9","depends_on_id":"bd-ejga","type":"blocks","created_at":"2026-01-24T03:23:55.441667731Z","created_by":"bkase"}]}
{"id":"bd-2jo8","title":"m1.2: tests for downsampled pixel renderer","description":"Add CPU-fast, deterministic gates for the M1 downsampled renderer per history/m1-plan.md (M1.2).\n\nScope:\n- New test file: tests/test_ppu_downsampled_pixels.py\n- Determinism: fixed ROM + fixed action trace => identical pixel hash sequence.\n- Multi-env correctness: num_envs>=2 with divergent env behavior => pixel hashes diverge (catches missing base indexing).\n- Sanity vs env0 scanline-accurate renderer: compare downsample(frame_bg_shade_env0) with pix[0] from snapshot renderer on stable micro ROMs.\n- Optional CUDA parity test: CPU vs CUDA snapshot renderer match exactly; skip if CUDA unavailable.\n\nConstraints:\n- Tests must be fast by default; CUDA tests gated by env / availability.\n- Prefer hash/snapshot assertions over per-pixel loops.\n\nAcceptance:\n- `uv run pytest -q tests/test_ppu_downsampled_pixels.py` passes on CPU-only envs.\n- CUDA test skips cleanly when CUDA is disabled/unavailable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:28:29.744511089Z","created_by":"bkase","updated_at":"2026-01-25T16:39:01.687747023Z","closed_at":"2026-01-25T16:39:01.687719406Z","close_reason":"Added deterministic renderer tests","compaction_level":0,"original_size":0}
{"id":"bd-2ke","title":"WS2 Part 2: Add POST_STEP_DISPATCH injection","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T05:47:05.604223583Z","created_by":"bkase","updated_at":"2026-01-23T05:51:07.147578421Z","closed_at":"2026-01-23T05:51:07.147522823Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2km7","title":"F6 Harness cart-state artifacts + real-ROM verify doc","description":"Expose cartridge state in verification artifacts and add a short doc snippet for real-ROM bring-up.\n\nDeliverables:\n- Warp backend method to read cart state snapshot (bank regs, RAM enable, bootrom flag, RTC latch state).\n- Harness: when a mismatch occurs, include cart state in the JSON artifact (if available).\n- Add a brief README/docs snippet describing how to run `bench/harness.py --verify` on a user ROM with fixed action traces.\n\nNotes:\n- Keep optional: if backend lacks cart-state reads, harness should still work.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:22:53.376822983Z","created_by":"bkase","updated_at":"2026-01-24T16:36:03.241187579Z","closed_at":"2026-01-24T16:36:03.241159483Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2km7","depends_on_id":"bd-1pyq","type":"blocks","created_at":"2026-01-24T15:22:53.397022249Z","created_by":"bkase"},{"issue_id":"bd-2km7","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:22:53.393553848Z","created_by":"bkase"}]}
{"id":"bd-2kz","title":"Chore: ignore .bv/ local caches","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-22T09:18:33.132322751Z","created_by":"bkase","updated_at":"2026-01-22T09:19:20.527396911Z","closed_at":"2026-01-22T09:19:20.527340047Z","close_reason":"Ignore beads viewer cache directory","compaction_level":0,"original_size":0}
{"id":"bd-2l51","title":"D2: CPU scanline scheduler + VBlank + latch capture","description":"Goal:\n- Implement scanline-accurate PPU timing inside CPU step kernel (Milestone D D0/D2).\n\nSpec to implement (from `history/gameboy-milestone-d-plan.md`):\n- Track per-env scanline_cycle and ly (no dot timing).\n- When LCD is off (LCDC bit 7 = 0):\n  - force scanline_cycle=0, ly=0\n  - write LY=0\n  - update STAT with coarse mode=0 + coincidence\n  - no VBlank request\n- When LCD is on:\n  - advance scanline_cycle by instruction cycles\n  - on scanline boundary: ly++ (wrap 153→0)\n  - when ly transitions 143→144: set IF bit0 (VBlank)\n  - update LY and STAT at each boundary\n- STAT mode bits: coarse model (VBlank vs non-VBlank), no mode 2/3/0 timing.\n- Coincidence: STAT bit2 is set if LY==LYC; update at boundary (and optionally on LYC writes).\n\nLatch capture (env0 only):\n- At scanline start (LY becomes y), capture:\n  - LCDC, SCX, SCY, BGP into bg_*_latch_env0[y]\n- On LCD enable (LCDC 0→1), treat as scanline 0 start and capture latches for y=0.\n\nImplementation details:\n- Add ppu_scanline_cycle/ppu_ly buffers to CPU kernel signature (warp kernel args).\n- In `cpu_step_builder.py`:\n  - integrate scanline-advance logic right after instruction cycles are known (after timer_tick and before interrupt service is fine, as long as IF changes are visible before next instruction).\n  - update LY/STAT/IF using write8 or direct mem writes (preserve IF other bits).\n- Ensure HALT path also advances scanline timing because cycles still elapse.\n\nTouch points:\n- `src/gbxcule/kernels/cpu_step_builder.py`\n- `src/gbxcule/kernels/cpu_step.py` (kernel signature additions)\n- `src/gbxcule/backends/warp_vec.py` (pass new buffers)\n\nTests:\n- Add/extend `tests/test_ppu_timing.py` to assert:\n  - LY wraps 0..153 after CYCLES_PER_FRAME\n  - exactly one IF.VBlank per frame\n  - STAT mode bit = 1 for VBlank lines, 0 otherwise\n\nAcceptance:\n- Scanline timing deterministic, no dot-level timing.\n- VBlank IF is requested at LY=144 entry.\n- Latches captured for env0 at scanline start.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T11:36:15.596196762Z","created_by":"bkase","updated_at":"2026-01-24T11:48:15.435135092Z","closed_at":"2026-01-24T11:48:15.435078131Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2l51","depends_on_id":"bd-3h8s","type":"blocks","created_at":"2026-01-24T11:36:27.969492057Z","created_by":"bkase"}]}
{"id":"bd-2l5h","title":"rl-m2-ws2: pixels_torch stability + render_pixels_snapshot (no-step render)","description":"Context\\n- Implements WS2 in history/simple-rl-m2-plan.md.\\n- M1 already provides render_pixels=True and pixels_torch() for pix[N,72,80].\\n- M2 needs a reset path that can populate an initial frame stack without advancing CPU state, and must lock in pointer/stream invariants.\\n\\nDeliverables\\n1) Add render-only entry point\\n- Add a method on WarpVecCudaBackend (or base) to render pixels without stepping CPU state:\\n  - render_pixels_snapshot() (name flexible, but explicit)\\n  - launches the downsampled renderer kernel into the existing pix buffer\\n  - must work when render_pixels=True and backend is initialized\\n  - must be stream-correct when called from torch code (either internal ScopedStream or document that caller wraps it)\\n\\n2) Clarify / lock pixel-view invariants\\n- pixels_torch() must return a stable, cached torch view whose data_ptr does not change across steps/renders.\\n- Add small assertions / tests to prevent regressions (pointer stability + shape/dtype).\\n\\nAcceptance / Gates\\n- Wrapper reset can call render_pixels_snapshot() to initialize the stack without stepping.\\n- Pointer stability is verified (data_ptr constant, contents change).\\n\\nFiles likely touched\\n- src/gbxcule/backends/warp_vec.py\\n\\nNotes\\n- No action-space changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T03:14:32.893435081Z","created_by":"bkase","updated_at":"2026-01-26T03:31:05.476830737Z","closed_at":"2026-01-26T03:31:05.476803361Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2l5h","depends_on_id":"bd-3nlj","type":"blocks","created_at":"2026-01-26T03:15:19.850630502Z","created_by":"bkase"}]}
{"id":"bd-2l8","title":"Epic6: Deterministic seeding + action handling","description":"Implement deterministic seeding and canonical action handling in pyboy_vec_mp.\n\nScope:\n- Define hash64(base_seed, env_idx, rom_sha) pure helper for per-env seed derivation.\n- Record base_seed and derived seeds in backend state (for artifact reporting later).\n- Action handling matches Epic3/Epic5 mapping: noop/up/down/left/right/A/B/start/select.\n- Enforce frames_per_step/release_after_frames semantics in workers.\n\nAcceptance:\n- With fixed base_seed, generated action traces (if any) and config fields are stable.\n- Invalid action values raise ValueError with clear message.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:41:31.078517131Z","created_by":"bkase","updated_at":"2026-01-21T15:03:14.148092650Z","closed_at":"2026-01-21T15:03:14.148035562Z","close_reason":"Added hash64 for per-env seed derivation, ROM SHA computation, derived seeds stored and reported in reset info","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2l8","depends_on_id":"bd-2sm","type":"parent-child","created_at":"2026-01-21T14:41:31.086055042Z","created_by":"bkase"}]}
{"id":"bd-2m1","title":"Epic 3: Backend contract + shared types","description":"Intent: Define the single backend interface and shared types so the harness can run all backends uniformly, with stable shapes/dtypes, canonical CPU-state schema, and JSON-serializable run artifacts.\n\nMusts:\n- Protocol: reset/step/get_cpu_state/close (unidirectional step)\n- Batch semantics for all backends (pyboy_single behaves as batch of 1)\n- Explicit shapes/dtypes at boundaries (actions int32[num_envs], obs float32[num_envs, obs_dim], reward float32[num_envs], done/trunc bool[num_envs])\n- Canonical CPU state keys (PC/SP/A/F/B/C/D/E/H/L + flags + optional counters)\n- JSON-serializable specs + run metadata schema (stdlib json only)\n\nDeliverables:\n- src/gbxcule/backends/common.py\n- src/gbxcule/backends/__init__.py exports\n- tests/test_backends_common.py\n- (Optional) src/gbxcule/core/signatures.py helper for deterministic CPU-state hashing\n- pyproject.toml pyright strict config for common.py\n\nAcceptance: tests cover JSON serialization + boundary validation + flags derivation; pyright strict passes for common.py; no heavy deps.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:14:59.783023375Z","created_by":"bkase","updated_at":"2026-01-21T14:26:04.934886802Z","closed_at":"2026-01-21T14:26:04.934860674Z","close_reason":"Epic 3 complete: backend contract, shared types, run schema, tests, strict types, hash helper","compaction_level":0,"original_size":0}
{"id":"bd-2mz2","title":"m1.4: docs update for downsampled pixels","description":"Update docs/spec pointers after M1 implementation (history/m1-plan.md M1.4).\n\nScope:\n- Update history/simple-rl.md to reference the actual kernel/backend APIs:\n  - kernel file name\n  - backend flag to enable pixels\n  - accessors for pixel buffer\n  - tests that verify determinism/sanity\n\nConstraints:\n- Keep docs consistent with the implemented API and tests.\n\nAcceptance:\n- Docs accurately describe how to enable and validate M1 pixels (no stale references).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:28:42.290778896Z","created_by":"bkase","updated_at":"2026-01-25T16:40:37.827925343Z","closed_at":"2026-01-25T16:40:37.827898415Z","close_reason":"Updated M1 docs with implementation details","compaction_level":0,"original_size":0}
{"id":"bd-2nt2","title":"M5 Eval: D5 fast correctness tests","description":"Add CPU-only tests to prevent misleading eval metrics.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-27T15:21:53.457072368Z","created_by":"bkase","updated_at":"2026-01-27T15:21:53.457072368Z","compaction_level":0,"original_size":0}
{"id":"bd-2o4n","title":"m1.3: debug tool to dump downsampled pixels","description":"Add a small, non-gating debug tool to visualize downsampled pixels (history/m1-plan.md M1.3).\n\nScope:\n- Script under tools/ or bench/ that:\n  - loads ROM/state (like m0 smoke) and steps a few frames,\n  - reads pix[0] (downsampled) and writes a PNG with 4-shade palette,\n  - optional CLI args for output path / steps.\n- Use existing deps (pillow, numpy). No new dependencies.\n\nConstraints:\n- Tool is optional; should not be required for tests.\n\nAcceptance:\n- Running the script produces a PNG that visually matches expected scenes (e.g., Oak’s lab). ","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:28:36.259166482Z","created_by":"bkase","updated_at":"2026-01-25T16:39:48.244589302Z","closed_at":"2026-01-25T16:39:48.244531301Z","close_reason":"Added pixel dump tool","compaction_level":0,"original_size":0}
{"id":"bd-2og","title":"Epic 2: Makefile + commit-hook automation","description":"Goal\n- Provide fast, consistent local gates via Makefile and pre-commit hook.\n\nScope\n- Makefile targets for setup/fmt/test/roms/bench/verify/check.\n- Hook installer that runs make check; branch/GPU behavior aligned to policy.\n- Smoke target for quick sanity.\n\nAcceptance\n- make setup/test/bench/verify/check work via uv run.\n- Pre-commit hook exists and runs make check.\n- Hook output is actionable and failures are clear.\n\nRefs\n- history/m0-epics.md (Epic 2)\n- history/prd.md (Section 14: CI/commit hook requirements)\n- ARCHITECTURE.md (Sections 11.4-11.5: Makefile + hooks)\n- CONSTITUTION.md (Section II: tooling latency)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:38.040694701Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.116064110Z","deleted_at":"2026-01-21T09:15:23.116058254Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-2ok","title":"Epic 6: pyboy_vec_mp baseline backend","description":"Goal\n- Implement the CPU multiprocessing baseline backend for throughput comparison.\n\nScope\n- pyboy_vec_mp implements VecBackend contract for N envs.\n- Deterministic run artifacts; clean startup/shutdown.\n\nAcceptance\n- Backend runs N envs and returns throughput metrics for harness reporting.\n\nRefs\n- history/m0-epics.md (Epic 6)\n- history/prd.md (Section 7: backends)\n- ARCHITECTURE.md (Section 9.2: pyboy_vec_mp)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:39.543958117Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.146524990Z","deleted_at":"2026-01-21T09:15:23.146518990Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-2p9","title":"Epic 8: Verification scaffold + mismatch repro bundle","description":"Goal\n- Provide verify mode and deterministic mismatch repro bundles from day 1.\n\nScope\n- Add verify mode with ref vs dut backends.\n- Write repro bundle on mismatch and exit non-zero.\n\nAcceptance\n- Mismatch produces bundle with metadata.json, ref_state.json, dut_state.json, diff.json, repro.sh.\n- Bundle path matches bench/runs/mismatch/<timestamp>_<rom_id>_<ref>_vs_<dut>/.\n\nRefs\n- history/m0-epics.md (Epic 8)\n- history/prd.md (Section 10: mismatch automation)\n- ARCHITECTURE.md (Section 7.4: mismatch bundle)\n- CONSTITUTION.md (Sections I and V)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:40.615388578Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.142661436Z","deleted_at":"2026-01-21T09:15:23.142651931Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-2q2","title":"WS6: Record Warp wheel provenance (PEP 610 direct_url)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:26:14.234343935Z","created_by":"bkase","updated_at":"2026-01-22T14:31:20.493777527Z","closed_at":"2026-01-22T14:31:20.493721093Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2ql9","title":"WSA: Minimal tests for v1 codec + warp mapping guard","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T13:58:02.999867035Z","created_by":"bkase","updated_at":"2026-01-27T13:58:08.724445960Z","closed_at":"2026-01-27T13:58:08.724425847Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2qqh","title":"WSA: Migrate code/docs/tools to 8-action space","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T13:58:01.931512892Z","created_by":"bkase","updated_at":"2026-01-27T13:58:08.720956418Z","closed_at":"2026-01-27T13:58:08.720935889Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2r2","title":"Epic 4: Micro-ROM generation + suite definition","description":"Goal\n- Provide deterministic, license-safe micro-ROMs for correctness and performance baselines.\n\nScope\n- ROM generator producing at least two ROMs.\n- Suite YAML listing ROMs and step config metadata.\n- Tests to validate ROM generation and basic execution under PyBoy.\n\nAcceptance\n- ROMs generate into bench/roms/out/ and run headless for a small step count.\n- suite.yaml includes id/path/description and step config fields.\n\nRefs\n- history/m0-epics.md (Epic 4)\n- history/prd.md (Section 7: micro-ROM suite; Section 10: verification scope)\n- ARCHITECTURE.md (Section 10: E1-E3 micro-ROM staging)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:38.672581690Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.132322699Z","deleted_at":"2026-01-21T09:15:23.132316955Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-2s4","title":"WS5.2 E4 make targets + env knobs","description":"Add E4-specific Makefile targets and knobs. Provide bench-e4-cpu and bench-e4-gpu that run suite scaling in full_step stage (E4), produce per-ROM reports, and keep M3 targets unchanged. Introduce E4_* variables for env counts, steps, warmup, sync policy, frames_per_step, release_after_frames, baseline backend, and puffer vec backend.","acceptance_criteria":"1. Makefile has bench-e4-cpu and bench-e4-gpu targets.\n2. E4_* variables documented in Makefile and used by new targets.\n3. GPU target guards on nvidia-smi like bench-gpu.\n4. Existing M3 targets unchanged.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T07:27:32.078275039Z","created_by":"bkase","updated_at":"2026-01-23T07:33:16.075269173Z","closed_at":"2026-01-23T07:33:16.075213428Z","close_reason":"Added E4 make targets and knobs","compaction_level":0,"original_size":0}
{"id":"bd-2sm","title":"Epic 6: pyboy_vec_mp CPU multiprocessing backend","description":"Intent: ship an honest CPU multiprocessing baseline that implements VecBackend, scales across workers, and is reliable (no hangs/zombies).\n\nKey refs to read: ARCHITECTURE.md, CONSTITUTION.md, history/epic6789.md, src/gbxcule/backends/common.py, bench/roms/suite.yaml, src/gbxcule/backends/pyboy_single.py.\n\nMusts:\n- VecBackend protocol compliance with batched outputs (num_envs>=1).\n- Deterministic seeding policy (base_seed -> per-env seed) recorded in config.\n- Step semantics: frames_per_step=24, release_after_frames=8.\n- Robust process lifecycle: detect worker failure, close/join with timeouts, terminate fallback.\n\nDeliverables:\n- src/gbxcule/backends/pyboy_vec_mp.py\n- tests: MP reliability + smoke\n\nAcceptance: backend steps small workloads without hang; correct shapes/dtypes; closes cleanly; fast tests (<2 min gate).","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:41:17.337595967Z","created_by":"bkase","updated_at":"2026-01-21T15:07:20.653194673Z","closed_at":"2026-01-21T15:07:20.653168289Z","close_reason":"Epic 6 complete: pyboy_vec_mp backend with full test coverage (98 total tests)","compaction_level":0,"original_size":0}
{"id":"bd-2sn","title":"Epic 1: Repo scaffolding and uv-only workflow","description":"Goal\n- Establish repo structure, uv-only workflow, and import-safe placeholders.\n\nScope\n- Create required directory tree and placeholder modules.\n- Define pyproject.toml and uv.lock using uv-only workflow.\n- Document uv-only run interface and add minimal import test.\n\nAcceptance\n- Repo matches PRD structure and imports cleanly.\n- uv sync creates environment; uv run python -c \"import gbxcule\" succeeds.\n- README documents uv-only workflow.\n\nRefs\n- history/epic1.md (Epic 1 DoD + stories)\n- history/prd.md (Section 6: Repo structure; Section 14: CI/commit hook expectations)\n- ARCHITECTURE.md (Section 11.1: uv-only; Section 11.4: Makefile as interface)\n- CONSTITUTION.md (Sections II, IV, VI)","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:37.786288886Z","created_by":"bkase","updated_at":"2026-01-21T09:21:09.903236413Z","closed_at":"2026-01-21T09:21:09.903180413Z","close_reason":"All child stories (1.1, 1.2, 1.3) completed","compaction_level":0,"original_size":0}
{"id":"bd-2t2","title":"Epic4: Implement micro-ROM builder (deterministic + valid headers)","description":"Implement bench/roms/build_micro_rom.py with pure helpers and deterministic ROM generation.\n\nScope:\n- Pure helpers: compute_header_checksum, compute_global_checksum, sha256_bytes.\n- build_rom(title, program) builds 32KiB ROM with valid header and checksums.\n- Two deterministic program payloads: ALU_LOOP and MEM_RWB (ALU loop + WRAM R/W loop).\n- Atomic write to bench/roms/out (tmp + rename).\n- CLI wrapper prints paths, sha256, size; supports --out-dir.\n\nAcceptance:\n- Deterministic outputs for same inputs (sha256 stable).\n- Valid Nintendo logo + header/global checksum per Pan Docs.\n- No external deps beyond stdlib.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:22:55.640771582Z","created_by":"bkase","updated_at":"2026-01-21T14:43:33.932095838Z","closed_at":"2026-01-21T14:43:33.932068142Z","close_reason":"Implemented micro-ROM builder with checksums, sha256, atomic write, CLI","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2t2","depends_on_id":"bd-3tr","type":"parent-child","created_at":"2026-01-21T14:22:55.657075841Z","created_by":"bkase"}]}
{"id":"bd-2t9i","title":"Seed PPU latches from PyBoy scanline params on state load","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T14:23:48.437835739Z","created_by":"bkase","updated_at":"2026-01-25T14:26:22.922655403Z","closed_at":"2026-01-25T14:26:22.922628491Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2u0","title":"Epic7: Deterministic action generation (pure)","description":"Implement pure action generation and optional recording.\n\nScope:\n- generate_actions(step_idx, num_envs, seed, gen_name, gen_version) -> int32[num_envs].\n- Support noop + seeded_random generators; record name/version/seed in config.\n- Ensure batch semantics even for single-env.\n\nAcceptance:\n- Deterministic outputs given same inputs; no side effects.\n- Action generator metadata included in artifacts.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:42:26.281398932Z","created_by":"bkase","updated_at":"2026-01-21T15:15:38.887983067Z","closed_at":"2026-01-21T15:15:38.887927002Z","close_reason":"Implemented pure generate_actions function with noop and seeded_random generators. Added 12 tests for determinism.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2u0","depends_on_id":"bd-dcz","type":"parent-child","created_at":"2026-01-21T14:42:26.296952727Z","created_by":"bkase"}]}
{"id":"bd-2up","title":"Story 2.2: Add commit-hook(s) that call Makefile targets","description":"Scope\n- Add tools/install_git_hooks.py to install pre-commit hook.\n- Hook runs make check (or make check-main on DGX main branch per policy).\n- Document hook installation.\n\nAcceptance\n- .git/hooks/pre-commit runs make check.\n- Hook failure output is actionable.\n\nRefs\n- history/m0-epics.md (Story 2.2)\n- ARCHITECTURE.md (Section 11.5: Git hooks policy)\n- CONSTITUTION.md (Section III: shift-left)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.205862583Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.155127575Z","deleted_at":"2026-01-21T09:15:23.155121927Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2wk","title":"Story 6.1: Implement pyboy_vec_mp backend","description":"Scope\n- Implement multiprocessing backend with num_envs and num_workers.\n- Keep IPC minimal for benchmarking.\n\nAcceptance\n- reset/step/close implemented and usable by harness.\n- Deterministic artifacts for comparable runs.\n\nRefs\n- history/m0-epics.md (Story 6.1)\n- ARCHITECTURE.md (Section 9.2: implementation guidance)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:39.680092755Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.048519389Z","deleted_at":"2026-01-21T09:15:23.048513597Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2x5","title":"Story 4.3: Tests for ROM generation","description":"Scope\n- Add tests/test_micro_roms.py to generate ROMs and step PyBoy headless.\n- Assert ROM files exist in bench/roms/out/.\n\nAcceptance\n- uv run pytest -q passes and validates ROM generation.\n\nRefs\n- history/m0-epics.md (Story 4.3)\n- CONSTITUTION.md (Section III: shift-left testing)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:39.007998517Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.065243565Z","deleted_at":"2026-01-21T09:15:23.065234141Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-2xn","title":"Epic8: Mismatch repro bundle writer (atomic)","description":"Implement mismatch bundle writer in bench/harness.py or a helper module.\n\nScope:\n- MISMATCH_SCHEMA_VERSION=1 metadata.json with required keys (rom sha, backends, seeds, compare_every, step semantics, system info, commit sha).\n- Write ref_state.json, dut_state.json, diff.json, actions.jsonl, repro.sh.\n- Use temp dir + rename for atomicity.\n- repro.sh uses uv-only invocation and prefers --actions-file replay.\n\nAcceptance:\n- Bundle path: bench/runs/mismatch/<timestamp>_<rom_id>_<ref>_vs_<dut>/\n- JSON-only files; repro.sh executable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:43:02.928980797Z","created_by":"bkase","updated_at":"2026-01-21T15:28:39.109307997Z","closed_at":"2026-01-21T15:28:39.109281996Z","close_reason":"Implemented atomic mismatch bundle writer with metadata.json, ref/dut states, diff, actions.jsonl, and executable repro.sh.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2xn","depends_on_id":"bd-1pl","type":"parent-child","created_at":"2026-01-21T14:43:02.944612883Z","created_by":"bkase"}]}
{"id":"bd-2xt","title":"Epic3: Export shared types from backends package","description":"Update src/gbxcule/backends/__init__.py to re-export the shared contract and types.\n\nScope:\n- Export VecBackend, BackendSpec, ArraySpec, StepOutput, CpuState, CpuFlags, Device, Stage, and run schema dataclasses/constants.\n- Add __all__ for stable import surface.\n\nAcceptance:\n- from gbxcule.backends import VecBackend, BackendSpec works in tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:15:35.145658007Z","created_by":"bkase","updated_at":"2026-01-21T14:22:57.820749066Z","closed_at":"2026-01-21T14:22:57.820677386Z","close_reason":"Exported all shared types from backends package with __all__","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2xt","depends_on_id":"bd-2m1","type":"parent-child","created_at":"2026-01-21T14:15:35.162067854Z","created_by":"bkase"}]}
{"id":"bd-2ym","title":"WS1: Update tests + Make targets for codec-aware action ranges","description":"Update tests and Make targets to use backend-provided action range and new --action-codec flag where needed.\\n\\nImplementation:\\n- tests/conftest.py: stop importing ACTION_NOOP/NUM_ACTIONS; use backend.num_actions and simple safe valid actions\\n- Update any tests with hard-coded action indices to be codec-agnostic\\n- Makefile: if/when default codec changes, ensure verify profiles remain step-exact (esp frames_per_step=1)\\n\\nDoD:\\n- Full test suite passes.\\n- No tests assume NUM_ACTIONS==9.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:46.964052431Z","created_by":"bkase","updated_at":"2026-01-23T05:03:29.489909023Z","closed_at":"2026-01-23T05:03:29.489882495Z","close_reason":"Updated tests to use backend.num_actions","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ym","depends_on_id":"bd-1f5","type":"blocks","created_at":"2026-01-23T04:42:25.439527705Z","created_by":"bkase"},{"issue_id":"bd-2ym","depends_on_id":"bd-1ps","type":"blocks","created_at":"2026-01-23T04:42:26.604226398Z","created_by":"bkase"},{"issue_id":"bd-2ym","depends_on_id":"bd-32r","type":"blocks","created_at":"2026-01-23T04:42:24.865450970Z","created_by":"bkase"},{"issue_id":"bd-2ym","depends_on_id":"bd-3g5","type":"blocks","created_at":"2026-01-23T04:42:27.892776312Z","created_by":"bkase"},{"issue_id":"bd-2ym","depends_on_id":"bd-6df","type":"blocks","created_at":"2026-01-23T04:42:27.216101738Z","created_by":"bkase"},{"issue_id":"bd-2ym","depends_on_id":"bd-a7j","type":"blocks","created_at":"2026-01-23T04:42:25.995848113Z","created_by":"bkase"}]}
{"id":"bd-2yr","title":"Milestone A: implement MMIO read8/write8 helpers in cpu_step skeleton","description":"Goal:\n- Centralize IO side effects (JOYP, serial, ROM/RAM quirks) in read8/write8 helpers.\n- Keep instruction templates mostly pure (functional core), per Constitution.\n\nScope / Files:\n- src/gbxcule/kernels/cpu_step_builder.py: add @wp.func read8/write8 (and optional read16/write16).\n- Add SERIAL_MAX constant in skeleton (use constant from abi.py).\n- Handle:\n  * JOYP: read via joyp_read(...); writes update joyp_select.\n  * Serial: SB (0xFF01) stores byte; SC (0xFF02) triggers immediate transfer if bit7+internal clock; append to serial_buf, update serial_len, set serial_overflow on overflow, clear bit7, request IF bit3 (write IF at 0xFF0F).\n  * ROM writes ignored (0x0000-0x7FFF).\n  * Cart RAM reads return 0xFF; writes ignored (0xA000-0xBFFF) for now.\n\nAcceptance:\n- cpu_step kernel compiles with new helpers (no placeholder tokens left).\n- read8/write8 cover JOYP + serial + ROM/RAM handling.\n- No behavior changes beyond IO side effects (micro-ROM tests still pass after templates are updated).\n\nNotes:\n- Keep IF bit update simple (OR in serial bit).\n- Timing accuracy not required in Milestone A; immediate serial completion is fine.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T01:59:28.021517002Z","created_by":"bkase","updated_at":"2026-01-24T02:03:09.813269865Z","closed_at":"2026-01-24T02:03:09.813214312Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-2z2","title":"Story 1.2: Establish uv-based dependency management","description":"Scope\n- Add pyproject.toml with runtime + dev deps and uv settings.\n- Generate and commit uv.lock.\n- Configure uv environments for macOS + Linux only.\n- Document lock discipline (uv sync / uv run --locked behavior).\n\nAcceptance\n- uv sync works on macOS and Linux.\n- uv run python -c \"import gbxcule\" succeeds.\n- uv lock --check passes.\n\nRefs\n- history/epic1.md (Story 1.2)\n- history/prd.md (Section 6: Repo structure; Section 14: CI expectations)\n- ARCHITECTURE.md (Section 11.1: uv-only; Section 12: deps)\n- CONSTITUTION.md (Section IV: immutable runtime)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:37.909545271Z","created_by":"bkase","updated_at":"2026-01-21T09:21:06.392715513Z","closed_at":"2026-01-21T09:21:06.392646281Z","close_reason":"Implemented: pyproject.toml and uv.lock created, uv sync works","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2z2","depends_on_id":"bd-2sn","type":"parent-child","created_at":"2026-01-21T09:12:37.917022826Z","created_by":"bkase"}]}
{"id":"bd-3024","title":"rl-m2-ws4: smoke script + deterministic/stream tests for pixels wrapper","description":"Context\\n- Implements WS4 in history/simple-rl-m2-plan.md.\\n- Constitution requires verifiable rewards: deterministic, automated gates.\\n- M2’s key risk is stream ordering + accidental host copies.\\n\\nDeliverables\\n1) Smoke script\\n- Add tools/rl_m2_smoke.py:\\n  - runs two identical rollouts (same state + same action trace)\\n  - compares pixel-hash sequences\\n  - prints JSONL per step with: step_idx, env_idx (or aggregate), hash, maybe backend counters\\n  - exits non-zero on mismatch\\n\\n2) Tests (torch + CUDA optional)\\n- Add tests/test_rl_m2_pixels_env.py:\\n  - pytest.importorskip(\"torch\")\\n  - skip if CUDA unavailable or GBXCULE_SKIP_CUDA=1\\n  - determinism: two runs match hashes for a short trace\\n  - pointer stability: pixels_torch().data_ptr stable across steps\\n  - stream correctness: step then torch op reading pixels sees updated values without explicit global sync\\n\\n3) Keep suite fast\\n- No new always-on slow tests. RL tests must skip cleanly on CPU-only/dev CI.\\n\\nAcceptance / Gates\\n- make test remains fast (CUDA tests skipped).\\n- On a CUDA+torch machine, tests and tools/rl_m2_smoke.py pass.\\n\\nDependencies\\n- Depends on bd-3jfp (wrapper).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T03:15:00.349015646Z","created_by":"bkase","updated_at":"2026-01-26T03:44:24.677328707Z","closed_at":"2026-01-26T03:44:24.677300531Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3024","depends_on_id":"bd-3jfp","type":"blocks","created_at":"2026-01-26T03:15:22.932592166Z","created_by":"bkase"}]}
{"id":"bd-30j","title":"WS7: Cap pyboy_vec_mp workers in scaling sweep","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:42:58.577757626Z","created_by":"bkase","updated_at":"2026-01-22T14:44:00.899900378Z","closed_at":"2026-01-22T14:44:00.899844745Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-32r","title":"WS1: Add core action codec module + tests","description":"Add a pure, versioned action codec layer to make action semantics explicit and auditable.\\n\\nImplementation:\\n- Add src/gbxcule/core/action_codec.py\\n- Provide ActionCodec protocol + fixed registry\\n- Implement LegacyV0Codec (current 9-action mapping)\\n- Implement PokemonRedPufferV0Codec (7-action mapping: A,B,START,UP,DOWN,LEFT,RIGHT)\\n- Include to_pyboy_button(action) and to_joypad_mask(action) for JOYP forward-compat\\n\\nTests:\\n- Add tests/test_action_codec.py (ordering, num_actions, action_names length, mapping correctness, out-of-range behavior)\\n\\nDoD:\\n- New module is pure (no PyBoy/Warp imports).\\n- Unit tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:04.853118752Z","created_by":"bkase","updated_at":"2026-01-23T04:45:19.625862265Z","closed_at":"2026-01-23T04:45:19.625836073Z","close_reason":"Implemented action codec module and tests","compaction_level":0,"original_size":0}
{"id":"bd-33pz","title":"C3: Edge-based timers (DIV/TIMA/TMA/TAC) + overflow","description":"Context\n- Milestone C timer is edge-based (DIV-bit falling edge) per `history/gameboy-milestone-c-plan.md`.\n\nScope\n- Implement `timer_tick(cycles)` in the Warp kernel:\n  - Update `div_counter` (16-bit) by `cycles`\n  - Update `mem[0xFF04]` to match `(div_counter >> 8) & 0xFF`\n  - Compute selected DIV bit based on TAC, build `timer_in`, and count falling edges across the tick\n  - For each falling edge: increment TIMA and detect overflow\n  - Overflow handling: schedule 4-cycle delayed reload from TMA and set IF bit 2 at reload\n- Implement DIV/TAC write “glitch” rule:\n  - If an MMIO write causes `timer_in` 1->0, apply one immediate TIMA increment.\n\nDoD\n- Timer micro-ROM(s) match PyBoy for DIV/TIMA behavior (step-exact, small runs).\n\nTests\n- New: verify tests for timer ROM(s) (added in C6), plus:\n- `uv run pytest -q tests/test_warp_vec_ws3_verify.py`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T08:26:03.608192748Z","created_by":"bkase","updated_at":"2026-01-24T09:05:25.177307261Z","closed_at":"2026-01-24T09:05:25.177278829Z","close_reason":"Implemented edge-based timer tick + DIV/TAC glitch","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-33pz","depends_on_id":"bd-9e3e","type":"blocks","created_at":"2026-01-24T08:26:07.375849452Z","created_by":"bkase"},{"issue_id":"bd-33pz","depends_on_id":"bd-t2ta","type":"parent-child","created_at":"2026-01-24T08:26:03.615006094Z","created_by":"bkase"}]}
{"id":"bd-343","title":"WS4.4 Harness integration + puffer metadata","description":"Goal: wire new puffer backends into the harness and record reproducibility metadata.\n\nScope\n- bench/harness.py: register pyboy_puffer_single + pyboy_puffer_vec.\n- Extend CLI choices for --backend, --ref-backend, --dut-backend.\n- create_backend: construct puffer backends and pass action_codec, frames_per_step, release_after_frames, num_envs, num_workers.\n- get_system_info(): add pufferlib dist metadata similar to warp (dist name, version, direct_url if PEP610).\n- Add config fields for artifacts:\n  - action_schedule: {frames_per_step, release_after_frames, tick_split:[frames_per_step-1,1]}\n  - vec_backend for puffer baselines (e.g., puffer_serial or puffer_mp_sync)\n  - num_workers for puffer vec\n- Ensure sweep_config includes same fields.\n\nDoD\n- Benchmark runs produce artifacts containing puffer metadata fields when pufferlib installed.\n- Existing tests continue to pass (or skip gracefully).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:50:51.503847037Z","created_by":"bkase","updated_at":"2026-01-23T07:01:48.332199609Z","closed_at":"2026-01-23T07:01:48.332144281Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-34k","title":"Epic5: Implement get_cpu_state normalization","description":"Implement get_cpu_state(env_idx=0) using PyBoy register_file and canonical schema.\n\nScope:\n- Read PC, SP, A, F, B, C, D, E, HL; derive H/L; derive flags from F.\n- Return CpuState dict with required keys; include counters if available.\n- Validate env_idx==0 (since num_envs=1) with clear error.\n\nAcceptance:\n- Schema matches Epic3 canonical CPU state; flags correct for F bits.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:24:14.200849442Z","created_by":"bkase","updated_at":"2026-01-21T14:49:51.444941911Z","closed_at":"2026-01-21T14:49:51.444886551Z","close_reason":"get_cpu_state already implemented in bd-3lk commit with canonical CpuState schema","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-34k","depends_on_id":"bd-2ik","type":"parent-child","created_at":"2026-01-21T14:24:14.217486971Z","created_by":"bkase"}]}
{"id":"bd-35i","title":"Epic3: Add tests for common types + validation","description":"Create tests/test_backends_common.py covering Epic3 contract behavior.\n\nTests:\n- ArraySpec/BackendSpec JSON serialization (json.dumps succeeds).\n- validate_actions: wrong shape raises, float dtype raises, int64 safely casts to int32.\n- flags_from_f: property test with hypothesis for random f; flags match f & 0xF0 bits.\n- validate_step_output: wrong shapes/dtypes raise.\n- Run schema dataclasses: to_json_dict output is JSON-serializable and contains required keys.\n\nAcceptance:\n- Tests are fast (no PyBoy import).\n- Pytest failure messages are actionable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:15:40.864035488Z","created_by":"bkase","updated_at":"2026-01-21T14:24:13.060231136Z","closed_at":"2026-01-21T14:24:13.060204880Z","close_reason":"Added comprehensive tests for common types, validation, and run schema","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-35i","depends_on_id":"bd-2m1","type":"parent-child","created_at":"2026-01-21T14:15:40.879791194Z","created_by":"bkase"}]}
{"id":"bd-35l","title":"WS4: Enforce end-of-window sync + record in artifacts","description":"Always synchronize at end of measurement window and write sync_every into benchmark artifacts.\n\nDoD:\n- Artifacts include sync policy fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:34:53.108951345Z","created_by":"bkase","updated_at":"2026-01-22T14:08:58.136926010Z","closed_at":"2026-01-22T14:08:58.136898923Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-35l","depends_on_id":"bd-2hw","type":"parent-child","created_at":"2026-01-22T12:34:53.115937628Z","created_by":"bkase"}]}
{"id":"bd-35z","title":"WS4: mismatch bundle + repro mem-region","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T07:45:22.604945459Z","created_by":"bkase","updated_at":"2026-01-22T07:52:47.123336874Z","closed_at":"2026-01-22T07:52:47.123281641Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-363i","title":"D5: Harness frame-hash compare + mismatch artifacts","description":"Goal:\n- Add harness support for scanline-accurate PPU verification vs PyBoy using frame hashes.\n\nImplementation details:\n- In `bench/harness.py`:\n  - add flags: --compare-frame, --dump-frame-on-mismatch\n  - when comparing, compute hash of env0 frame_bg_shade buffer (0..3 shades)\n  - quantize PyBoy frame to 0..3 shade indices and hash (per ROM mapping)\n  - on mismatch, dump ref/dut PNGs (from shade indices) + include PPU regs (LCDC/STAT/SCX/SCY/LY/LYC/BGP/IF) in mismatch bundle\n  - optional: warmup N frames after LCD enable (1–2) before hashing\n\nTouch points:\n- `bench/harness.py`\n- (Optional) `gbxcule/backends/pyboy_single.py` or helper for frame extraction\n\nAcceptance:\n- New flags documented in CLI help.\n- Mismatch bundle includes frame hashes + optional images + PPU regs.\n- Works with scanline-accurate model (no dot timing assumptions).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T11:36:18.043678375Z","created_by":"bkase","updated_at":"2026-01-24T12:02:23.821158973Z","closed_at":"2026-01-24T12:02:23.821102621Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-363i","depends_on_id":"bd-g1pq","type":"blocks","created_at":"2026-01-24T11:36:30.722214164Z","created_by":"bkase"}]}
{"id":"bd-36ge","title":"RL M3-A: goal matcher core + reducer","description":"Implement torch-based goal matching core (functional, pixel-only). Add src/gbxcule/rl/goal_match.py with compute_dist_l1 (uint8->float32, normalized by /3.0), update_consecutive (int32 counter), done mask (K consecutive), and shape/dtype validation for frame vs goal (support [N,H,W] or [N,K,H,W] vs [H,W]/[K,H,W]). No RAM usage. No action-space changes (no NOOP). Add unit tests in tests/test_rl_goal_match.py using torch CPU and pytest.importorskip('torch'); cover threshold, reset, K-consecutive, batch behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T03:55:17.663781507Z","created_by":"bkase","updated_at":"2026-01-26T03:58:36.643748453Z","closed_at":"2026-01-26T03:58:36.643673796Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-36vo","title":"m5-2: PPO core (GAE + losses) with unit tests","description":"Implement the pure PPO math core and deterministic unit tests.\n\nDeliverables:\n- Add src/gbxcule/rl/ppo.py with:\n  - compute_gae(rewards, values, dones, last_value, gamma, lambda)\n  - ppo_losses(logits, actions, old_logprobs, returns, advantages, values, clip, value_coef, entropy_coef)\n  - helper: logprob_from_logits (no torch.distributions required).\n- Enforce dtype/shape/device checks (float32 rewards/values, bool dones, int64 actions).\n- Add tests/tests for:\n  - GAE correctness on a tiny hand-checkable example.\n  - PPO loss finite + expected shapes + clipfrac/approx_kl sanity.\n  - Gradients are finite and parameters update on a tiny model.\n\nAcceptance:\n- pytest passes with torch installed; tests skip cleanly without torch.\n- PPO core has no filesystem IO (functional core).\n- No action-space changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:31:55.327417266Z","created_by":"bkase","updated_at":"2026-01-26T06:46:04.104719627Z","closed_at":"2026-01-26T06:46:04.104645227Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-36x6","title":"M4D: Torch RL wrapper with reward/done/trunc + autoreset","description":"Add a torch-facing RL wrapper that returns (obs, reward, done, trunc, info) and autoresets via reset_mask using the ResetCache from M4C.\n\nConstraints:\n- Keep existing PokeredPixelsEnv API unchanged (used by goal template capture/replay tools).\n- Keep action space unchanged (no NOOP).\n- Hot path stays GPU-only (no .cpu() or host sync in step()).\n\nWork:\n- Add a new wrapper module/class under src/gbxcule/rl/ (e.g. pokered_pixels_goal_env.py):\n  - Inputs: rom path, start .state, goal template dir, config (frames_per_step/release_after_frames/stack_k/max_steps/reward params).\n  - Reset:\n    - backend.reset()\n    - load start state into env0 once\n    - render start pixels\n    - build ResetCache snapshot and apply to all envs (so all envs start identically without N× load_state_file)\n    - initialize obs stack to repeated start frame\n    - initialize per-env trackers: episode_step, consec_match, prev_dist (start dist)\n  - Step:\n    - backend.step_torch(actions)\n    - update obs stack (shift + append latest pixels)\n    - dist/done via goal_match\n    - reward shaping via M4B\n    - truncation via M4B + per-env episode_step\n    - compute reset_mask = done | trunc\n    - apply ResetCache for reset envs (Warp kernels)\n    - reset torch-side trackers + obs stack for reset envs (using cached start_stack), and set prev_dist back to start dist\n    - return obs_stack_u8, reward_f32, done, trunc, info where obs is post-reset for reset envs\n\nAcceptance:\n- Running a short loop yields non-constant rewards, correct resets, and no crashes.\n- Wrapper supports goal templates that are either 2D frame or 3D stack (reusing existing goal_match behavior).\n- No action-space changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T04:49:49.026217212Z","created_by":"bkase","updated_at":"2026-01-26T05:00:05.375587659Z","closed_at":"2026-01-26T05:00:05.375531498Z","close_reason":"Added PokeredPixelsGoalEnv with reward/done/trunc and autoreset.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-36x6","depends_on_id":"bd-1lpa","type":"parent-child","created_at":"2026-01-26T04:49:49.042243213Z","created_by":"bkase"}]}
{"id":"bd-373","title":"Story 5.1: Implement pyboy_single backend","description":"Scope\n- Implement src/gbxcule/backends/pyboy_single.py to match backend contract.\n- Run headless and support frames_per_step semantics.\n\nAcceptance\n- reset/step/close implemented and usable by harness.\n- get_cpu_state returns regs with stable keys.\n\nRefs\n- history/m0-epics.md (Story 5.1)\n- ARCHITECTURE.md (Sections 4, 9.1)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:39.254672839Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.129009611Z","deleted_at":"2026-01-21T09:15:23.128994155Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-37b","title":"WS5: CUDA verify MEM_RWB + mem-region","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:15:46.948783835Z","created_by":"bkase","updated_at":"2026-01-22T14:17:47.341659358Z","closed_at":"2026-01-22T14:17:47.341631534Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-37b","depends_on_id":"bd-254","type":"parent-child","created_at":"2026-01-22T14:15:46.955413392Z","created_by":"bkase"}]}
{"id":"bd-37c3","title":"F3 MBC1 banking implementation","description":"Implement MBC1 register semantics and ROM/RAM banking rules.\n\nDeliverables:\n- MBC1 write handling (0x0000-0x7FFF):\n  - 0x0000-0x1FFF RAM enable (0x0A)\n  - 0x2000-0x3FFF ROM bank low 5 bits (bank 0 -> 1 fixup)\n  - 0x4000-0x5FFF upper bits (ROM high bits or RAM bank based on mode)\n  - 0x6000-0x7FFF banking mode select (ROM vs RAM)\n- ROM mapping rules:\n  - 0x0000-0x3FFF fixed bank 0 (mode 0) or (upper<<5) (mode 1)\n  - 0x4000-0x7FFF switchable bank (upper<<5 | low5), clamped to available banks\n- RAM mapping rules:\n  - mode 0 => RAM bank 0\n  - mode 1 => RAM bank = upper bits\n\nNotes:\n- Implement clamping/masking using cart spec helpers from F0.\n- Add minimal unit tests for MBC1 mapping helpers if feasible (pure).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:22:16.782785233Z","created_by":"bkase","updated_at":"2026-01-24T15:56:42.082999120Z","closed_at":"2026-01-24T15:56:42.082942288Z","close_reason":"Completed (MBC1 register writes)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-37c3","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:22:16.789451457Z","created_by":"bkase"},{"issue_id":"bd-37c3","depends_on_id":"bd-n96k","type":"blocks","created_at":"2026-01-24T15:22:16.792319183Z","created_by":"bkase"}]}
{"id":"bd-37n","title":"WS4.3 Add pyboy_puffer_vec backend","description":"Goal: add pufferlib-vectorized CPU baseline backend using real pufferlib.\n\nScope\n- Add src/gbxcule/backends/pyboy_puffer_vec.py implementing VecBackend.\n- Lazy-import pufferlib; raise clear error if missing.\n- Build env_creator returning pufferlib.emulation.GymnasiumPufferEnv(env=PyBoyGymEnv(...)).\n- Use pufferlib.vector.make(...):\n  - backend = pufferlib.vector.Multiprocessing (default) or Serial for small tests\n  - num_envs as requested\n  - batch_size defaults to num_envs (sync semantics)\n  - zero_copy=True\n  - num_workers default: min(num_envs, os.cpu_count())\n- Implement reset/step/close; step passes actions through as int32 array.\n- get_cpu_state/read_memory raise NotImplementedError (benchmark-only).\n- Record chosen vec_backend + num_workers on instance for artifact metadata.\n\nTests (optional + skip if pufferlib missing)\n- Add a pytest that imports pufferlib and runs Serial backend with 1 env for 2-3 steps on a micro-ROM.\n\nDoD\n- Backend can run a short Serial/MP sync step loop when pufferlib is installed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:50:28.379451047Z","created_by":"bkase","updated_at":"2026-01-23T06:57:50.825974563Z","closed_at":"2026-01-23T06:57:50.825918738Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-386d","title":"E5: Enrich mismatch bundles + PPU register dumps","description":"Goal:\n- Make mismatches easy to diagnose without noisy logs; enrich structured artifacts for PPU features.\n\nDeliverables:\n- Extend mismatch bundle metadata to include:\n  - PPU registers (LCDC/STAT/LY/LYC/SCX/SCY/WX/WY/BGP/OBP0/OBP1)\n  - last-N frame hashes (if compare_frame enabled)\n  - optional OAM/VRAM region dumps (bounded)\n- Extend harness helper `_read_ppu_regs` to include new regs.\n- Ensure dumps are best-effort and do not fail the run if unavailable.\n\nFiles likely touched:\n- bench/harness.py (mismatch bundle + reg read)\n- tests/test_harness.py (if schema validation is covered)\n\nAcceptance checks:\n- `make test` (existing harness tests still pass)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T13:11:57.352143351Z","created_by":"bkase","updated_at":"2026-01-24T15:00:31.575244284Z","closed_at":"2026-01-24T15:00:31.575217612Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["artifacts","harness","milestone-e"],"dependencies":[{"issue_id":"bd-386d","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:57.370046708Z","created_by":"bkase"}]}
{"id":"bd-38j","title":"Story 7.2: Add scaling run support (data-only)","description":"Scope\n- Add --env-counts to run sequential benchmarks for multiple env sizes.\n- Emit a single JSON report aggregating results by env count.\n\nAcceptance\n- Scaling JSON includes per-env-count result entries and schema_version.\n\nRefs\n- history/m0-epics.md (Story 7.2)\n- ARCHITECTURE.md (Section 8.2: metrics)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:40.284008985Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.098487642Z","deleted_at":"2026-01-21T09:15:23.098478026Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-38ny","title":"C5: HALT idle loop + wake semantics","description":"Context\n- Timer/interrupt ROMs rely on HALT to wait for IF(Timer).\n- HALT opcode (0x76) is currently UNIMPL in ISA and must be implemented.\n\nScope\n- Add ISA spec + template for `HALT` (0x76): set `halted=1`, PC += 1, cycles=4.\n- Update cpu_step main loop:\n  - If halted, do not fetch/execute opcodes.\n  - Advance time in small quanta (4 cycles), tick timers, and check pending interrupts.\n  - Wake on (IE & IF & 0x1F) != 0 regardless of IME.\n  - If IME==1 when waking and pending!=0, service immediately.\n\nDoD\n- HALT-based timer interrupt micro-ROM behaves identically to PyBoy for small runs.\n\nTests\n- New verify tests for HALT ROM(s) (added in C6), plus:\n- `uv run pytest -q tests/test_warp_vec_ws3_verify.py`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T08:26:05.128829256Z","created_by":"bkase","updated_at":"2026-01-24T09:14:49.171212806Z","closed_at":"2026-01-24T09:14:49.171183572Z","close_reason":"Implemented HALT idle loop + wake/service semantics","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-38ny","depends_on_id":"bd-1bnu","type":"blocks","created_at":"2026-01-24T08:26:09.080921924Z","created_by":"bkase"},{"issue_id":"bd-38ny","depends_on_id":"bd-t2ta","type":"parent-child","created_at":"2026-01-24T08:26:05.135879721Z","created_by":"bkase"}]}
{"id":"bd-38o","title":"Epic 9: Docs + devlog tweet draft","description":"Intent: Make the project runnable and legible with uv-only commands, artifact locations, and a public devlog draft.\n\nKey refs to read: README.md, ARCHITECTURE.md, CONSTITUTION.md, history/prd.md, history/epic6789.md, Makefile, bench/harness.py.\n\nMusts:\n- README explains what/why, hypothesis, and success criteria.\n- uv-only install/run commands; no alternate workflows.\n- Document micro-ROM generation, bench, verify (expected failure in M0), artifact locations.\n- Include devlog tweet draft with a reproducible command and (once available) first numbers.\n\nAcceptance: All README commands exist and run; artifact paths match actual output; tweet draft present.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:43:32.941483664Z","created_by":"bkase","updated_at":"2026-01-21T15:34:35.287836410Z","closed_at":"2026-01-21T15:34:35.287782121Z","close_reason":"Epic 9 complete: README docs, devlog tweet draft, command guard test","compaction_level":0,"original_size":0}
{"id":"bd-38pq","title":"F1 Warp cartridge buffers + reset wiring","description":"Introduce explicit ROM/RAM/cart-state buffers in warp backends and reset logic.\n\nDeliverables:\n- Load ROM once (shared buffer), not per-env into 0x0000..0x7FFF mem.\n- Allocate per-env cart RAM sized from cart spec.\n- Add per-env cart state arrays (mbc_kind, ram_enable, bank regs, bootrom_enabled, rtc state placeholders).\n- Update warp kernel signature + launch inputs to include these buffers.\n- Update reset tests to reflect new memory model (ROM not mirrored in mem by default).\n\nNotes:\n- Keep CPU/CUDA parity: new buffers must exist on both devices.\n- Preserve existing trap/serial/timer/PPU state.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:21:58.519590117Z","created_by":"bkase","updated_at":"2026-01-24T15:45:31.734906869Z","closed_at":"2026-01-24T15:45:31.734878965Z","close_reason":"Completed (ROM/bootrom buffers + cart state wiring)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-38pq","depends_on_id":"bd-11xm","type":"blocks","created_at":"2026-01-24T15:21:58.529271860Z","created_by":"bkase"},{"issue_id":"bd-38pq","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:21:58.525900003Z","created_by":"bkase"}]}
{"id":"bd-395","title":"Story 2.1: Add Makefile with core targets","description":"Scope\n- Add Makefile at repo root with targets: setup, fmt, lint, test, roms, bench, smoke, verify, check, hooks, help.\n- All python invocations use uv run.\n- Exclude third_party/ and generated directories from formatting.\n\nAcceptance\n- make setup runs uv sync.\n- make lint checks formatting and lint without modifying files.\n- make fmt applies formatting and autofix.\n- make test runs pytest.\n- make help prints available targets.\n\nRefs\n- history/epic2.md (Story 2.1)\n- ARCHITECTURE.md (Section 11.4)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T11:10:10.091174740Z","created_by":"bkase","updated_at":"2026-01-21T11:11:58.695413127Z","closed_at":"2026-01-21T11:11:58.695387477Z","close_reason":"Implemented: Makefile with all core targets (setup, fmt, lint, test, roms, bench, smoke, verify, check, hooks, help)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-395","depends_on_id":"bd-1t7","type":"parent-child","created_at":"2026-01-21T11:10:10.107490146Z","created_by":"bkase"}]}
{"id":"bd-39c","title":"WS5: CUDA sync guard for state reads","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:15:50.999490507Z","created_by":"bkase","updated_at":"2026-01-22T14:19:00.745860731Z","closed_at":"2026-01-22T14:19:00.745803291Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-39c","depends_on_id":"bd-254","type":"parent-child","created_at":"2026-01-22T14:15:51.007102894Z","created_by":"bkase"}]}
{"id":"bd-39h","title":"WS2: Backend architecture (warp_vec_cuda)","description":"Introduce explicit CUDA backend without duplicating CPU code.\n\nDoD:\n- warp_vec_cuda backend runs on DGX with explicit name and device selection.\n- No unconditional synchronize in step() (bench stays async-friendly).","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-22T12:34:46.926769932Z","created_by":"bkase","updated_at":"2026-01-22T13:35:22.940065453Z","closed_at":"2026-01-22T13:35:22.940038573Z","close_reason":"Completed WS2 tasks: base refactor, CUDA backend, warmup, harness wiring, smoke test/run","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-39h","depends_on_id":"bd-t7w","type":"blocks","created_at":"2026-01-22T12:34:47.363149613Z","created_by":"bkase"}]}
{"id":"bd-3a1","title":"WS5.1 Suite scaling sweeps across all ROMs","description":"Implement full suite support for scaling sweeps in bench/harness.py. When --suite is provided with --env-counts, iterate every ROM entry in bench/roms/suite.yaml, honor per-ROM defaults (frames_per_step, release_after_frames) and any ROM-level overrides, and write outputs into per-ROM subdirectories (e.g., bench/runs/reports/<ts>_e4/<ROM_ID>/). Preserve existing --rom behavior. Log each ROM run clearly and fail fast on missing ROM paths.","acceptance_criteria":"1. harness supports --suite + --env-counts and runs all suite ROMs (not just first).\n2. per-ROM output dir is created and contains scaling artifacts for both baseline and DUT runs.\n3. suite defaults/overrides are honored for frames_per_step/release_after_frames.\n4. explicit errors for missing ROM files or empty suite.\n5. --rom path flow remains unchanged.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T07:25:56.141987578Z","created_by":"bkase","updated_at":"2026-01-23T07:30:09.552579088Z","closed_at":"2026-01-23T07:30:09.552522912Z","close_reason":"Implemented suite scaling sweeps","compaction_level":0,"original_size":0}
{"id":"bd-3ajp","title":"E4: LCD STAT interrupts (edge-triggered) + ROM + tests","description":"Goal:\n- Implement STAT interrupt requests for mode transitions + LYC=LY, edge-triggered.\n\nDeliverables:\n- Track STAT enable bits and compute edge transitions for:\n  - Mode 0, Mode 1, Mode 2\n  - LYC==LY\n- Request IF bit 1 on edge; do not spam each cycle.\n- Add per-env PPU state for previous STAT conditions (explicit buffers, no hidden globals).\n- Add micro-ROM `PPU_STAT_IRQ.gb` that:\n  - installs STAT ISR\n  - counts interrupts\n  - reports deterministically (serial or WRAM signature)\n- Add tests comparing counters vs PyBoy for fixed frames.\n\nFiles likely touched:\n- src/gbxcule/core/abi.py (new STAT edge buffers)\n- src/gbxcule/kernels/cpu_step_builder.py (PPU/STAT update)\n- bench/roms/build_micro_rom.py\n- bench/roms/suite.yaml\n- tests/test_ppu_* (STAT IRQ tests)\n\nAcceptance checks:\n- `make roms`\n- `make test` (STAT IRQ tests green)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T13:11:56.530847909Z","created_by":"bkase","updated_at":"2026-01-24T14:44:48.835109013Z","closed_at":"2026-01-24T14:44:48.835053477Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["milestone-e","ppu","stat"],"dependencies":[{"issue_id":"bd-3ajp","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:56.548870032Z","created_by":"bkase"}]}
{"id":"bd-3bm1","title":"M4B: Reward shaping + truncation helpers (torch) + unit tests","description":"Implement pixel-only reward shaping + truncation as pure Torch helpers (functional core) and add fast unit tests.\n\nNotes / existing code:\n- Distance + done building blocks already exist in src/gbxcule/rl/goal_match.py:\n  - compute_dist_l1(frame, goal)\n  - update_consecutive(consec, dist, tau=...)\n  - compute_done(consec, k_consecutive=...)\n  Keep/extend these rather than duplicating logic.\n\nWork:\n- Add reward/trunc helpers (either extend goal_match.py or add a new module under src/gbxcule/rl/):\n  - RewardShapingConfig(step_cost: float, alpha: float, goal_bonus: float)\n  - compute_reward(prev_dist, dist, done, cfg) -> reward\n  - compute_trunc(episode_step, max_steps) -> trunc (or similar)\n  - helper to validate dtypes/shapes (no silent casts; assert uint8 for pixels, float32 for dist, int32 for counters).\n- Keep Torch as an optional dependency by using dynamic import patterns (like current RL modules).\n\nTests (must be torch-optional):\n- Add tests/test_rl_reward_shaping.py that:\n  - attempts import torch; if missing, pytest.skip\n  - runs on CPU (no CUDA required)\n  - validates dist→reward math, K-consecutive, trunc boundaries, and that configs reject invalid shapes/dtypes.\n\nAcceptance:\n- Unit tests are deterministic and run in milliseconds.\n- No action-space changes (no NOOP).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T04:49:21.690068677Z","created_by":"bkase","updated_at":"2026-01-26T04:52:46.363675720Z","closed_at":"2026-01-26T04:52:46.363618392Z","close_reason":"Added reward shaping + trunc helpers and unit tests.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3bm1","depends_on_id":"bd-1lpa","type":"parent-child","created_at":"2026-01-26T04:49:21.697307723Z","created_by":"bkase"}]}
{"id":"bd-3cp","title":"B1: Kernel CB dispatch + scalable dispatch + trap","description":"Goal: make kernel generation handle CB-prefixed opcodes and avoid giant linear dispatch, with a debug/verify trap for unknown opcodes.\n\nDeliverables:\n- Generated kernel handles opcode==0xCB: fetch cb byte, pc+=2, dispatch CB table, add CB cycles.\n- Replace linear if/elif chain with a 2-level dispatch (e.g., opcode>>4 buckets).\n- Add trap path for unknown/unimplemented opcode in verify/debug: record trap_pc/opcode/kind and stop stepping env deterministically.\n- Surface trap info through get_cpu_state() and mismatch bundles.\n\nAcceptance criteria:\n- Kernel compiles with full 512-opcode coverage without excessive compile time.\n- Unknown opcode in verify/debug stops and is observable in CPU state.\n- Existing micro-ROMs still pass.\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B1).\n- Likely touched: cpu_step_builder.py, cpu_step.py, core/abi.py, backends/common.py.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T03:22:26.715347101Z","created_by":"bkase","updated_at":"2026-01-24T03:41:18.277100660Z","closed_at":"2026-01-24T03:41:18.277044932Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3cp","depends_on_id":"bd-3ul","type":"blocks","created_at":"2026-01-24T03:23:24.590985281Z","created_by":"bkase"}]}
{"id":"bd-3eaw","title":"E2: Window rendering + ROM + frame-hash tests","description":"Goal:\n- Implement DMG window rendering on top of existing BG scanline-latch renderer.\n\nDeliverables:\n- Extend PPU latches to include WX/WY (and any needed LCDC bits) under scanline-latch rules.\n- Render window when LCDC bit 5 set and LY>=WY; WX uses WX-7 rule.\n- Maintain `window_line` counter (increments per scanline with active window).\n- Composite BG vs window per pixel before sprites.\n- Add micro-ROM `PPU_WINDOW.gb` with deterministic window + BG content (no mid-scanline reg changes).\n- Add frame-hash vs PyBoy tests (env0 shade buffer).\n\nFiles likely touched:\n- src/gbxcule/core/abi.py (new latch buffers)\n- src/gbxcule/kernels/cpu_step_builder.py (latch capture)\n- src/gbxcule/kernels/ppu_step.py (render window)\n- bench/roms/build_micro_rom.py\n- bench/roms/suite.yaml\n- tests/test_ppu_* (frame-hash tests)\n\nAcceptance checks:\n- `make roms`\n- `make test` (window hash matches PyBoy)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T13:11:54.886297176Z","created_by":"bkase","updated_at":"2026-01-24T13:39:17.696608301Z","closed_at":"2026-01-24T13:39:17.696542301Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["milestone-e","ppu","window"],"dependencies":[{"issue_id":"bd-3eaw","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:54.903801208Z","created_by":"bkase"}]}
{"id":"bd-3f7","title":"Epic8: Verify mode loop + state diff (pure core)","description":"Implement verify loop in bench/harness.py and pure comparison helpers.\n\nScope:\n- CLI flags: --verify, --ref-backend, --dut-backend, --verify-steps, --compare-every, --actions-file.\n- Verify loop: generate/replay actions, step both backends, compare every K steps, fail fast on mismatch.\n- Pure helpers for normalize_cpu_state and diff_states (strict equality).\n\nAcceptance:\n- Works for env_idx=0; structure generalizes later.\n- Comparison logic is deterministic and JSON-serializable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:42:57.016598788Z","created_by":"bkase","updated_at":"2026-01-21T15:22:00.180029101Z","closed_at":"2026-01-21T15:22:00.179972300Z","close_reason":"Implemented verify mode loop with CLI args, normalize_cpu_state, diff_states pure helpers, and run_verify runner.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3f7","depends_on_id":"bd-1pl","type":"parent-child","created_at":"2026-01-21T14:42:57.023406736Z","created_by":"bkase"}]}
{"id":"bd-3g5","title":"WS1: Harness --action-codec + generator range + artifact metadata","description":"Update bench harness to be codec-aware for action generation, artifact recording, and mismatch repro.\\n\\nImplementation:\\n- bench/harness.py\\n  - Add --action-codec flag (explicit choices)\\n  - Resolve codec once per run/verify and pass into create_backend\\n  - Generate actions in [0, codec.num_actions) (no hard-coded 9)\\n  - Record action_codec metadata in artifacts and mismatch bundles\\n  - Include --action-codec in mismatch repro.sh\\n- Update harness tests accordingly\\n\\nDoD:\\n- tests/test_harness.py passes\\n- Existing JSON artifacts gain codec metadata without breaking schema consumers.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:39.142371612Z","created_by":"bkase","updated_at":"2026-01-23T05:01:19.884387805Z","closed_at":"2026-01-23T05:01:19.884331101Z","close_reason":"Added action codec flag, generator range, and artifact metadata","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3g5","depends_on_id":"bd-1ps","type":"blocks","created_at":"2026-01-23T04:42:18.675636673Z","created_by":"bkase"},{"issue_id":"bd-3g5","depends_on_id":"bd-32r","type":"blocks","created_at":"2026-01-23T04:42:17.350406869Z","created_by":"bkase"},{"issue_id":"bd-3g5","depends_on_id":"bd-6df","type":"blocks","created_at":"2026-01-23T04:42:19.279232475Z","created_by":"bkase"},{"issue_id":"bd-3g5","depends_on_id":"bd-a7j","type":"blocks","created_at":"2026-01-23T04:42:18.005974631Z","created_by":"bkase"}]}
{"id":"bd-3gw","title":"Epic 9: Documentation + initial devlog draft","description":"Goal\n- Provide README with setup/run instructions and draft the first devlog tweet.\n\nScope\n- README: premise + hypothesis, uv setup, how to run baselines, artifact locations.\n- Draft devlog tweet including why/where/what next and a reproducible command.\n\nAcceptance\n- README supports a curious developer to run a baseline via uv or make.\n- Devlog draft exists in docs/ or README.\n\nRefs\n- history/m0-epics.md (Epic 9)\n- history/prd.md (Section 15: marketing requirements)\n- ARCHITECTURE.md (Section 15: docs)\n- CONSTITUTION.md (Section VI: documentation as code)","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-21T09:12:41.134597968Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.137263490Z","deleted_at":"2026-01-21T09:15:23.137257730Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-3h6","title":"B2: Implement loads & moves family","description":"Goal: implement full SM83 load/move family to make most ROMs runnable.\n\nOpcode groups:\n- LD r,r; LD r,d8; LD rr,d16\n- LD r,(HL); LD (HL),r\n- LD (a16),A / LD A,(a16)\n- LDH (a8),A / LD A,(a8)\n- LDI/LDD variants (A <-> (HL))\n- (Optional early) PUSH/POP if it unlocks tests\n\nDeliverables:\n- Templates added in cpu_templates/loads.py (and stack.py if needed).\n- ISA table entries wired to these templates with correct cycles and lengths.\n- New micro-ROMs targeting load/addressing variants; registered in suite.yaml.\n- Step-exact verify tests vs PyBoy for each new ROM.\n\nAcceptance criteria:\n- All load/move opcodes covered in ISA table (no defaults).\n- New ROMs pass verify vs PyBoy (warp_vec_cpu vs pyboy_single).\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B2).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T03:22:34.630985017Z","created_by":"bkase","updated_at":"2026-01-24T03:54:34.938694888Z","closed_at":"2026-01-24T03:54:34.938640040Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3h6","depends_on_id":"bd-3cp","type":"blocks","created_at":"2026-01-24T03:23:32.476934187Z","created_by":"bkase"},{"issue_id":"bd-3h6","depends_on_id":"bd-m9w","type":"blocks","created_at":"2026-01-24T03:23:36.065038229Z","created_by":"bkase"}]}
{"id":"bd-3h8s","title":"D1: ABI v4 PPU scanline buffers + latches","description":"Goal:\n- Extend ABI for scanline-accurate PPU (Milestone D spec).\n\nWhy:\n- CPU kernel must track scanline timing and capture per-scanline render latches.\n- Renderer kernel consumes latches to produce env0 framebuffer; no dot-level timing.\n\nImplementation details:\n- Bump ABI_VERSION and update ABI v4 migration note in `src/gbxcule/core/abi.py`.\n- Add constants:\n  - SCREEN_W=160, SCREEN_H=144\n  - CYCLES_PER_SCANLINE=456 (if you choose to expose in ABI)\n- Add per-env PPU scanline state buffers:\n  - ppu_scanline_cycle: i32[num_envs] (0..455)\n  - ppu_ly: i32[num_envs] (0..153)\n- Add env0 per-scanline latch buffers (size SCREEN_H each):\n  - bg_lcdc_latch_env0: u8[144]\n  - bg_scx_latch_env0: u8[144]\n  - bg_scy_latch_env0: u8[144]\n  - bg_bgp_latch_env0: u8[144]\n- Add env0 framebuffer buffer:\n  - frame_bg_shade_env0: u8[SCREEN_W*SCREEN_H] (shade indices 0..3)\n- Optional (future): frame hash buffer if you want on-device hashing; do not implement here.\n\nTouch points:\n- `src/gbxcule/core/abi.py` (ABI version + new constants + migration note)\n- `src/gbxcule/backends/warp_vec.py` (new buffer fields + allocations)\n- `src/gbxcule/kernels/cpu_step.py` signature plumbing (additional buffers)\n\nAcceptance:\n- ABI version bumped with clear migration note.\n- Warp backend reset allocates new buffers without breaking existing tests.\n- No behavior change beyond buffer availability.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T11:36:14.752443298Z","created_by":"bkase","updated_at":"2026-01-24T11:41:06.707178114Z","closed_at":"2026-01-24T11:41:06.707149986Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3hk","title":"Epic6: get_cpu_state RPC + normalization","description":"Implement get_cpu_state(env_idx) routing to the owning worker and return canonical CpuState.\n\nScope:\n- Master determines worker/local index for env_idx.\n- Worker reads PyBoy register_file and returns dict with pc/sp/a/f/b/c/d/e/h/l + flags + optional counters.\n- Use shared helper for flags derivation (from common.py).\n- Clear error for invalid env_idx or missing fields.\n\nAcceptance:\n- Schema matches Epic3 canonical CPU state; flags correct for F bits.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:41:38.872164269Z","created_by":"bkase","updated_at":"2026-01-21T15:03:52.945184879Z","closed_at":"2026-01-21T15:03:52.945159535Z","close_reason":"Already implemented in Story 6.1 - master routes to worker, uses flags_from_f, raises clear errors","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3hk","depends_on_id":"bd-2sm","type":"parent-child","created_at":"2026-01-21T14:41:38.879234661Z","created_by":"bkase"}]}
{"id":"bd-3id1","title":"C1: ABI + plumbing for interrupts/timers state","description":"Context\n- We need persistent per-env state beyond `mem` to model interrupts/timers/HALT.\n\nScope\n- Bump ABI version and add new buffers:\n  - `ime` / `ime_delay` (or `ime_pending`) / `halted`\n  - `div_counter` (16-bit internal divider counter)\n  - `timer_prev_in` (prev timer_in for falling-edge detect)\n  - `tima_reload_pending` / `tima_reload_delay`\n- Plumb these through:\n  - Warp kernel signature in `src/gbxcule/kernels/cpu_step_builder.py`\n  - Kernel warmup in `src/gbxcule/kernels/cpu_step.py`\n  - Backend allocation/reset + launch args in `src/gbxcule/backends/warp_vec.py`\n\nDoD\n- Kernel compiles on CPU.\n- Existing micro-ROM verify tests still pass (no behavior change expected yet).\n\nTests\n- `uv run pytest -q tests/test_warp_vec_ws3_verify.py`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T08:26:02.212769656Z","created_by":"bkase","updated_at":"2026-01-24T08:32:07.986576671Z","closed_at":"2026-01-24T08:32:07.986548079Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3id1","depends_on_id":"bd-t2ta","type":"parent-child","created_at":"2026-01-24T08:26:02.220085128Z","created_by":"bkase"}]}
{"id":"bd-3itr","title":"M5 Eval: D4 training-time eval isolation","description":"Ensure eval uses separate env and does not desync training obs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-27T15:21:51.924175613Z","created_by":"bkase","updated_at":"2026-01-27T15:21:51.924175613Z","compaction_level":0,"original_size":0}
{"id":"bd-3iy","title":"WS4: pyboy_vec_mp read_memory IPC","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T07:45:19.039898451Z","created_by":"bkase","updated_at":"2026-01-22T07:46:45.260013184Z","closed_at":"2026-01-22T07:46:45.259958078Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3jfp","title":"rl-m2-ws3: add torch-only PokeredPixelsEnv wrapper (stacked pixels)","description":"Context\\n- Implements WS3 in history/simple-rl-m2-plan.md.\\n- This is the first torch-facing interface for RL: manages pixel stacks and calls warp_vec_cuda for stepping/rendering.\\n\\nDeliverables\\n1) New RL package\\n- Create src/gbxcule/rl/ (package) with:\\n  - __init__.py\\n  - pokered_pixels_env.py implementing the wrapper class\\n\\n2) Wrapper behavior\\n- Class: PokeredPixelsEnv (or similar explicit name).\\n- Constructor inputs (exact API flexible, but must cover):\\n  - rom_path\\n  - state_path (optional but supported; used for deterministic start)\\n  - num_envs\\n  - frames_per_step=24, release_after_frames=8\\n  - action_codec (must preserve existing action space)\\n  - stack_k=4\\n  - output dims fixed to ABI DOWNSAMPLE_H/W (72x80)\\n\\n- reset():\\n  - backend.reset()\\n  - optionally load .state into each env (slow path allowed)\\n  - call render_pixels_snapshot() to get the first frame without stepping\\n  - initialize stack_t by repeating first frame K times\\n\\n- step(actions_cuda):\\n  - validate actions tensor (device cuda, shape (N,), dtype int32/int64, range)\\n  - call backend.step_torch(actions) which also renders pixels (render_pixels=True)\\n  - update frame stack on GPU\\n  - increment episode_step tensor (plumbing for later trunc/done)\\n  - return stacked obs uint8[N,K,H,W]\\n\\n3) Functional core helpers\\n- Keep stack update / hashing helpers as pure torch functions (no backend coupling).\\n\\nAcceptance / Gates\\n- End-to-end loop works on CUDA for small N:\\n  - obs_u8 returned is torch.uint8[N,4,72,80] on cuda\\n  - no host copies in hot path\\n- Wrapper imports do not require torch unless used (torch remains optional overall).\\n\\nDependencies\\n- Depends on bd-jw9d (step_torch) and bd-2l5h (render_pixels_snapshot).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T03:14:49.176084Z","created_by":"bkase","updated_at":"2026-01-26T03:36:33.433164559Z","closed_at":"2026-01-26T03:36:33.433106975Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3jfp","depends_on_id":"bd-2l5h","type":"blocks","created_at":"2026-01-26T03:15:21.811553408Z","created_by":"bkase"},{"issue_id":"bd-3jfp","depends_on_id":"bd-jw9d","type":"blocks","created_at":"2026-01-26T03:15:20.782023330Z","created_by":"bkase"}]}
{"id":"bd-3kk","title":"Epic7: Benchmark runner + artifact writer","description":"Implement benchmark timing + artifact writing (RESULT_SCHEMA_VERSION=1).\n\nScope:\n- Pure-ish RunConfig/RunResult construction using shared dataclasses (from Epic3).\n- Warmup loop excluded from timer; measured steps timed with monotonic clock.\n- SPS math: total_env_steps_per_sec and per_env_steps_per_sec; frames_per_sec computed.\n- Write JSON artifact: bench/runs/<timestamp>/<run_id>.json with config/system/results.\n- Include ROM sha256 and git commit sha if available.\n\nAcceptance:\n- JSON validates with stdlib json; schema fields stable and complete.\n- Warmup excluded; formulas correct.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:42:20.484127649Z","created_by":"bkase","updated_at":"2026-01-21T15:12:04.394752098Z","closed_at":"2026-01-21T15:12:04.394724690Z","close_reason":"Already implemented in Story 7.1 - added git commit SHA to system info","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3kk","depends_on_id":"bd-dcz","type":"parent-child","created_at":"2026-01-21T14:42:20.499954196Z","created_by":"bkase"}]}
{"id":"bd-3lk","title":"Epic5: Implement PyBoySingle backend core","description":"Implement src/gbxcule/backends/pyboy_single.py to conform to VecBackend.\n\nScope:\n- Class PyBoySingleBackend with config: rom_path, frames_per_step=24, release_after_frames=8, obs_dim (default 32), log_level.\n- name=\"pyboy_single\", device=\"cpu\", num_envs=1, action_spec/obs_spec from common.py.\n- Lazy import PyBoy; create headless instance (window=\"null\", sound_emulated=False, set_emulation_speed(0)).\n- reset(): reinitialize emulator; return obs (float32[1, obs_dim]) + info.\n- step(actions): validate/cast int32[1]; apply action mapping (noop/up/down/left/right/A/B/start/select). Use explicit press→tick→release semantics (frames_per_step, release_after_frames). Return batched obs/reward/done/trunc arrays.\n- close(): pyboy.stop(False).\n\nAcceptance:\n- Correct shapes/dtypes and batch semantics.\n- Deterministic step semantics.\n- Clear ValueError for out-of-range actions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:24:07.814200005Z","created_by":"bkase","updated_at":"2026-01-21T14:49:38.379819709Z","closed_at":"2026-01-21T14:49:38.379761693Z","close_reason":"Implemented PyBoySingleBackend with reset, step, close methods","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3lk","depends_on_id":"bd-2ik","type":"parent-child","created_at":"2026-01-21T14:24:07.831585022Z","created_by":"bkase"}]}
{"id":"bd-3mli","title":"m1.0: GPU downsampled snapshot PPU renderer kernel","description":"Implements the M1 kernel described in history/m1-plan.md (M1.0) and history/simple-rl.md (Milestone 1).\n\nScope:\n- Add new Warp kernel file: src/gbxcule/kernels/ppu_render_downsampled.py\n- Kernel signature should accept full mem buffer and output pixel buffer (uint8). No CPU readback.\n- Render for ALL envs: thread index -> (env_idx, oy, ox). Every mem access must use base = env_idx * MEM_SIZE.\n- Downsample mapping: 160x144 -> 80x72 (nearest-neighbor sampling; deterministic).\n- Read PPU regs from mem[base + 0xFFxx] (LCDC, SCX, SCY, BGP, WX, WY, OBP0, OBP1).\n- Render snapshot BG + window + sprites; match logic from ppu_render_bg_env0 but generalized for env indexing (no scanline latches).\n- Output shade values 0..3 only (uint8).\n\nConstraints:\n- No action space changes (no NOOP).\n- No new deps.\n\nAcceptance:\n- Kernel compiles and can be launched on CPU/CUDA without crashing.\n- Pixel output respects shape/layout contract (env-major contiguous).\n- Deterministic for fixed inputs (validated in M1.2 tests).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:28:12.628130309Z","created_by":"bkase","updated_at":"2026-01-25T16:31:13.301690898Z","closed_at":"2026-01-25T16:31:13.301662801Z","close_reason":"Implemented kernel","compaction_level":0,"original_size":0}
{"id":"bd-3nlj","title":"rl-m2-ws0: torch optional deps + import guards","description":"Context\\n- Implements WS0 in history/simple-rl-m2-plan.md.\\n- Must obey CONSTITUTION.md: keep base workflows fast and hermetic-ish; torch must be optional.\\n\\nDeliverables\\n1) Add an optional dependency group for RL\\n- Update pyproject.toml: add [dependency-groups].rl with torch (and any tiny torch-adjacent deps only if truly required).\\n- Do NOT pull torch into default dependencies.\\n- Ensure uv.lock is updated so installs are reproducible.\\n\\n2) Import strategy (no hard torch dependency)\\n- RL modules must not import torch at module import time (so pyright + CPU-only test runs work without torch installed).\\n- Prefer a helper like _require_torch() (similar pattern to backends/pyboy_puffer_vec.py::_require_pufferlib).\\n- Backend helper methods that return torch tensors must raise a clear error if torch is missing.\\n\\n3) Docs-as-code\\n- Ensure the spec document history/simple-rl-m2-plan.md is tracked in git and reflects current code reality (M1 already landed).\\n\\nAcceptance / Gates\\n- make test (CPU-only, torch not installed) still passes.\\n- make typecheck still passes (no missing-import errors from torch).\\n- Installing RL deps is straightforward: uv sync --group rl.\\n\\nNotes\\n- Do not change action space / do not add NOOP (explicit user constraint).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T03:14:01.532042314Z","created_by":"bkase","updated_at":"2026-01-26T03:18:28.645332001Z","closed_at":"2026-01-26T03:18:28.645273793Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3odm","title":"RL M3-C: capture goal template CLI","description":"Implement capture CLI in src/gbxcule/rl/capture_goal_template.py (invokable as python -m). Use PokeredPixelsEnv + render_pixels path to replay a fixed actions.jsonl from a saved .state and capture final goal frame/stack. Args: --rom, --state, --actions, --output-dir, --frames-per-step (default 24), --release-after-frames (default 8), --stack-k (default 4), --action-codec (default current), --use-stack, --force, --log-jsonl. Validate action trace format (list per line), infer num_envs from trace width. Write goal_template.npy + goal_template.meta.json using goal_template module, include ROM/state/actions SHA256. Optional debug PNG if PIL available; otherwise skip silently.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T03:55:19.501677669Z","created_by":"bkase","updated_at":"2026-01-26T04:04:34.617732655Z","closed_at":"2026-01-26T04:04:34.617659950Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3ph","title":"WS5.4 Update scaling summarize/plot for puffer baseline","description":"Update bench/analysis/summarize.py and plot_scaling.py to recognize pyboy_puffer_vec as a baseline. Strengthen config mismatch checks to include release_after_frames, action_schedule, action_codec, action_generator details, and vec_backend when present. Keep backward compatibility with existing artifacts.","acceptance_criteria":"1. summarize/plot pick pyboy_puffer_vec when present; fallback to pyboy_vec_mp works.\n2. --strict fails on mismatched release_after_frames, action_schedule, action_codec, action_generator, vec_backend.\n3. scripts still work with older artifacts.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T07:27:34.960040211Z","created_by":"bkase","updated_at":"2026-01-23T07:40:51.455403890Z","closed_at":"2026-01-23T07:40:51.455377138Z","close_reason":"Updated scaling analysis for puffer baseline","compaction_level":0,"original_size":0}
{"id":"bd-3r6","title":"Milestone A: refactor CPU templates to use MMIO helpers","description":"Goal:\n- Route all instruction memory accesses through read8/write8 to keep IO semantics centralized.\n\nScope / Files:\n- src/gbxcule/kernels/cpu_templates/loads.py: replace direct mem reads/writes and JOYP special cases with read8/write8.\n- src/gbxcule/kernels/cpu_templates/jumps.py: replace immediate fetches with read8 (or read16 if added).\n- src/gbxcule/kernels/cpu_templates/alu.py: replace d8 fetches with read8.\n\nAcceptance:\n- No direct mem[...] accesses remain in template code paths used by current opcodes.\n- Existing micro-ROM verification tests remain green.\n\nNotes:\n- Keep templates API stable; only add new args if required by read8/write8 signature.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T01:59:34.533934706Z","created_by":"bkase","updated_at":"2026-01-24T02:05:05.642473417Z","closed_at":"2026-01-24T02:05:05.642416472Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3rn","title":"Story 2.3: Smoke target for developer sanity","description":"Scope\n- make smoke runs a minimal sanity check.\n- For M0 (before harness is implemented): smoke runs lint, test, and roms.\n- Writes output to bench/runs/smoke.json when harness is available.\n- Fast enough for commit hook (<20s).\n- Does not require GPU or multiprocessing.\n\nAcceptance\n- make smoke passes and returns non-zero on failure.\n- make check includes smoke target.\n\nRefs\n- history/epic2.md (Story 2.3)\n- ARCHITECTURE.md (Section 8)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T11:10:13.453486153Z","created_by":"bkase","updated_at":"2026-01-21T11:14:23.680490536Z","closed_at":"2026-01-21T11:14:23.680463159Z","close_reason":"Implemented: make smoke builds ROMs, included in make check","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3rn","depends_on_id":"bd-1t7","type":"parent-child","created_at":"2026-01-21T11:10:13.469212832Z","created_by":"bkase"}]}
{"id":"bd-3rr","title":"Milestone A: add serial buffer ABI + bump ABI_VERSION","description":"Goal:\n- Extend ABI to include per-env serial output buffers for SB/SC capture.\n- Bump ABI_VERSION and document migration note per ARCHITECTURE.md §6.2.\n\nScope / Files:\n- src/gbxcule/core/abi.py: add SERIAL_MAX constant; bump ABI_VERSION; add migration note in module docstring.\n- ARCHITECTURE.md: add short note in ABI v1 section about serial buffers and version bump.\n- cpu_step_builder skeleton needs SERIAL_MAX constant (wired in later tasks).\n\nAcceptance:\n- ABI_VERSION incremented with short, explicit migration note.\n- SERIAL_MAX defined in abi.py (used by kernels/backends).\n- Documentation updated to match ABI change.\n\nNotes:\n- Keep SERIAL_MAX modest (e.g., 1024 or 2048) to avoid large per-env buffers.\n- Do not change VecBackend protocol yet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T01:59:18.124086538Z","created_by":"bkase","updated_at":"2026-01-24T02:00:31.627546119Z","closed_at":"2026-01-24T02:00:31.627488774Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3sc","title":"Story 3.2: Standardize run metadata schema","description":"Scope\n- Define a stable JSON schema version for run artifacts.\n- Include backend name/device, ROM id/sha, steps/warmup, seeds, env count.\n- Include system info fields for reproducibility.\n\nAcceptance\n- Harness outputs include schema_version and the required fields.\n\nRefs\n- history/m0-epics.md (Story 3.2)\n- ARCHITECTURE.md (Section 8.3: run artifact schema)\n- CONSTITUTION.md (Section V: structured logs)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.564965764Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.079321423Z","deleted_at":"2026-01-21T09:15:23.079315583Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-3shn","title":"m5-5: eval CLI + RL smoke/integration tests","description":"Add evaluation script and fast smoke tests for M5.\n\nDeliverables:\n- Add tools/rl_m5_eval.py that loads a checkpoint, runs greedy policy eval, and prints JSON summary (success_rate, median_steps_to_goal, mean_return).\n- Add a tiny integration/smoke test (torch-only):\n  - Either a toy env (pure torch) or a tiny real-env CUDA smoke (skipped if no GPU).\n  - Validates end-to-end rollout+update path and finite losses.\n- Ensure tests remain fast (<2 min) and skip cleanly without torch/CUDA.\n\nAcceptance:\n- Eval CLI runs and produces JSON on a saved checkpoint.\n- New smoke test passes (or skips) without slowing the suite.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:32:18.268099757Z","created_by":"bkase","updated_at":"2026-01-26T06:56:20.762064118Z","closed_at":"2026-01-26T06:56:20.762001030Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3ssq","title":"m5-1: add RL dependency group + align torch install hints","description":"Add an explicit uv dependency group for RL/torch and align repo hints.\n\nDeliverables:\n- Add [dependency-groups].rl = [\"torch\"] in pyproject.toml.\n- Update uv.lock to include the new group (no other dependency changes).\n- Ensure existing RL modules' hint \"uv sync --group rl\" remains accurate (no code changes unless required).\n\nAcceptance:\n- \"uv sync --group rl\" is valid per pyproject + lock.\n- Base workflows (no torch) remain unchanged.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:31:47.097849852Z","created_by":"bkase","updated_at":"2026-01-26T06:42:13.901762554Z","closed_at":"2026-01-26T06:42:13.901733274Z","close_reason":"Completed (rl dependency group already present; plan updated)","compaction_level":0,"original_size":0}
{"id":"bd-3st","title":"Epic9: Devlog tweet draft","description":"Add a devlog tweet draft to README (or a small docs/ file if created).\n\nScope:\n- Why (hypothesis + constraints) + where we are today (baselines/micro-ROMs/mismatch automation).\n- What success looks like (scaling + correctness).\n- Include reproducible command (make bench or uv run python bench/harness.py ...).\n- If available, paste first JSON metric (total_env_steps_per_sec) from a real run.\n\nAcceptance:\n- Draft is concise and includes a concrete command and artifact reference.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:43:46.197961178Z","created_by":"bkase","updated_at":"2026-01-21T15:33:10.361589100Z","closed_at":"2026-01-21T15:33:10.361533612Z","close_reason":"Devlog tweet draft added to README with first numbers, hypothesis, and reproducible commands","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3st","depends_on_id":"bd-38o","type":"parent-child","created_at":"2026-01-21T14:43:46.213654980Z","created_by":"bkase"}]}
{"id":"bd-3t1","title":"Story 2.2: Add commit-hook that calls Makefile targets","description":"Scope\n- Add .githooks/ directory tracked in repo.\n- Add .githooks/pre-commit script that runs make check.\n- Add make hooks target that runs git config core.hooksPath .githooks.\n- Hook checks for uv and prints clear error if missing.\n- Hook supports SKIP_HOOKS=1 for emergencies.\n\nAcceptance\n- git config --get core.hooksPath outputs .githooks after make hooks.\n- Pre-commit hook runs make check on commit.\n- Hook failure prints actionable message (run make fmt).\n\nRefs\n- history/epic2.md (Story 2.2)\n- ARCHITECTURE.md (Section 11.5)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T11:10:11.763118459Z","created_by":"bkase","updated_at":"2026-01-21T11:14:02.186382567Z","closed_at":"2026-01-21T11:14:02.186354854Z","close_reason":"Implemented: .githooks/pre-commit, make hooks, silent on success","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3t1","depends_on_id":"bd-1t7","type":"parent-child","created_at":"2026-01-21T11:10:11.779781660Z","created_by":"bkase"}]}
{"id":"bd-3tn","title":"Epic5: Add tests for pyboy_single backend","description":"Create tests/test_pyboy_single_backend.py.\n\nTests (fast, CPU-only):\n- Backend initializes headless, reset returns obs shape (1, obs_dim) float32.\n- step with noop returns correct shapes/dtypes for obs/reward/done/trunc.\n- get_cpu_state returns canonical keys + flags with correct bit derivation.\n- invalid action index raises ValueError.\n- close() stops emulator cleanly.\n\nAcceptance:\n- Tests run in <2 minutes and provide actionable failures.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:24:19.323140875Z","created_by":"bkase","updated_at":"2026-01-21T14:52:24.792164127Z","closed_at":"2026-01-21T14:52:24.792138175Z","close_reason":"Added 33 tests covering backend init, reset, step, get_cpu_state, invalid actions, and close","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3tn","depends_on_id":"bd-2ik","type":"parent-child","created_at":"2026-01-21T14:24:19.338669508Z","created_by":"bkase"}]}
{"id":"bd-3tr","title":"Epic 4: Micro-ROM generation + suite definition","description":"Intent: Generate deterministic, license-safe micro-ROMs and a self-describing suite used for correctness and benchmarks. Ensure ROMs are valid, reproducible, and runnable in headless PyBoy.\n\nMusts (ARCHITECTURE/CONSTITUTION aligned):\n- Deterministic outputs (same generator version -> identical bytes/sha256).\n- Valid ROM headers + checksums (Nintendo logo, header/global checksum).\n- Output to bench/roms/out (gitignored) via atomic writes.\n- At least two ROMs: ALU_LOOP.gb and MEM_RWB.gb.\n- Suite file includes frames_per_step (default 24) + release_after_frames (default 8).\n- Tests are fast and reproducible; no copyrighted ROMs.\n\nDeliverables:\n- bench/roms/build_micro_rom.py\n- bench/roms/suite.yaml\n- tests/test_micro_roms.py (fully implemented)\n- (Optional) ensure bench/roms/out is ignored.\n\nAcceptance: ROM builder is pure + deterministic; checksums validated; PyBoy headless tick succeeds; suite.yaml is explicit and stable.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:22:50.054383026Z","created_by":"bkase","updated_at":"2026-01-21T14:45:48.891249142Z","closed_at":"2026-01-21T14:45:48.891223526Z","close_reason":"Epic 4 complete: ROM builder, suite.yaml, and tests all done","compaction_level":0,"original_size":0}
{"id":"bd-3ue","title":"WS4.1 Core puffer schedule + PyBoy gym env","description":"Goal: add a pure, testable puffer-style schedule helper and a minimal Gymnasium PyBoy env used by puffer backends.\n\nScope\n- Add helper in src/gbxcule/core/action_schedule.py for puffer-style press/release scheduling:\n  - validate_schedule(frames_per_step, release_after_frames)\n  - require frames_per_step >= 1 (raise ValueError)\n  - send_input(press_event)\n  - send_input(release_event, delay=release_after_frames)\n  - tick(frames_per_step - 1, render=False) if frames_per_step > 1\n  - tick(1, render=False)\n- Add src/gbxcule/backends/pyboy_gym_env.py:\n  - gymnasium.Env wrapping PyBoy headless (bootrom: bench/roms/bootrom_fast_dmg.bin)\n  - action_space: Discrete(codec.num_actions), default action_codec=\"pokemonred_puffer_v0\"\n  - observation_space: Box(shape=(obs_dim,), dtype=float32)\n  - obs matches PyBoySingleBackend register features (PC, SP, A, F, B, C, D, E, H, L normalized) with padding\n  - step uses puffer-style schedule helper with WindowEvent mapping for button names (up/down/left/right/a/b/start/select), noop when button=None\n  - reward=0.0, done=False, trunc=False\n\nTests\n- Extend tests/test_action_schedule.py with fake send_input/tick recorder to verify exact call order and tick counts for frames_per_step=1 and >1.\n\nNotes\n- Use existing action codec mapping (pokemonred_puffer_v0: A,B,START,UP,DOWN,LEFT,RIGHT). Do not change WS1 codecs here.\n\nDoD\n- Unit tests pass for new helper.\n- Gym env can reset/step without importing pufferlib.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:50:12.683330114Z","created_by":"bkase","updated_at":"2026-01-23T06:53:18.317410370Z","closed_at":"2026-01-23T06:53:18.317351537Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3ul","title":"B0: ISA spec table + coverage gate","description":"Goal: establish a single authoritative SM83 opcode spec (unprefixed + CB) and enforce 100% coverage.\n\nDeliverables:\n- New ISA table module (e.g., src/gbxcule/core/isa_sm83.py) with 256 unprefixed + 256 CB entries.\n- Each entry includes: opcode, mnemonic, length, cycles (+ conditional cycles), template fn, replacements, tags/group.\n- Helper APIs to iterate tables and to build ordered lists for kernel generation.\n- Coverage gate test that fails on missing/duplicate opcodes or any mapped to default.\n\nAcceptance criteria:\n- Tests fail if any opcode is missing or mapped to default.\n- Tables are deterministic and stable (consistent ordering).\n- ISA table references per-family template modules (no giant template file).\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B0).\n- Keep test runtime minimal (fast, unit-level).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T03:22:07.863187638Z","created_by":"bkase","updated_at":"2026-01-24T03:28:21.323566614Z","closed_at":"2026-01-24T03:28:21.323540854Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3us","title":"WS4.2 Add pyboy_puffer_single backend","description":"Goal: add a single-env PyBoy backend that matches pufferlib input timing using send_input+delay.\n\nScope\n- Add src/gbxcule/backends/pyboy_puffer_single.py implementing VecBackend.\n- Default action_codec=\"pokemonred_puffer_v0\"; resolve codec and store action_codec spec.\n- Use WindowEvent mapping + puffer-style schedule helper from WS4.1.\n- reset(): create PyBoy instance (bootrom_fast_dmg.bin), headless, speed=0, build obs.\n- step(actions): validate shape, map action->button string via codec, map to WindowEvent press/release, call schedule helper, then build obs.\n- get_cpu_state/read_memory implementations mirror pyboy_single.\n- close(): stop PyBoy instance.\n\nDoD\n- Backend instantiates and steps a micro-ROM without errors (manual smoke).\n- get_cpu_state/read_memory behave like pyboy_single.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:50:19.878726947Z","created_by":"bkase","updated_at":"2026-01-23T06:55:26.072142129Z","closed_at":"2026-01-23T06:55:26.072115425Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3v5","title":"WS3: JOYP kernel plumbing + backend action copy","description":"Goal: make Warp JOYP reads/writes functional and codec-aware with correct press/release timing, and actually feed per-step actions into the kernel.\n\nScope / changes:\n- Add a stable kernel-facing action codec id mapping (e.g., legacy_v0=0, pokemonred_puffer_v0=1) in `src/gbxcule/core/action_codec.py`.\n- Extend the Warp kernel ABI to accept `action_codec_id` (int32) and use it for JOYP action->mask mapping.\n- Implement JOYP read/write logic in the CPU templates (loads/stores) for `hl == 0xFF00`:\n  - Writes update `joyp_select[i]` (bits 4/5 only, store masked 0x30).\n  - Reads return bits 0–3 active-low from selected group(s), bits 4–5 reflect select lines, bits 6–7 read as 1.\n  - Pressed state is true iff `frames_done < release_after_frames`.\n  - Use action codec mapping for dpad vs button masks.\n- Ensure kernel has helper funcs for JOYP selection/masks (branchless if possible).\n- Update `src/gbxcule/kernels/cpu_step_builder.py` skeleton and warmup callsites to pass `action_codec_id`.\n- Update `src/gbxcule/backends/warp_vec.py`:\n  - Initialize `joyp_select` to 0x30 on reset (no selection).\n  - Copy actions to device each step (do not ignore `actions`).\n  - Pass `action_codec_id` into kernel launch.\n\nAcceptance criteria:\n- Kernel compiles with new signature and all Warp backends run `--steps 1` without crashing.\n- `warp_vec_cpu` and `warp_vec_cuda` step no longer ignore `actions`.\n- JOYP reads/writes do not require any new ROMs yet and do not break existing tests.\n\nNotes:\n- Keep changes minimal; avoid adding heavy deps.\n- Don't introduce synchronization in CUDA `step()` (only in verify paths).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:13:03.279516842Z","created_by":"bkase","updated_at":"2026-01-23T06:17:28.830975497Z","closed_at":"2026-01-23T06:17:28.830919657Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-3w5","title":"M2 WS2: ROM loading + ABI v0 memory model (warp_vec_cpu)","description":"Implement Workstream 2 (M2): ROM loading + memory model (ABI v0 real) for the Warp CPU backend.\n\nPlan\n- Prereq: Warp CPU backend exists (warp_vec_cpu) and reset()/step() run deterministically (no correctness yet).\n- Lock ABI v0 in code: make src/gbxcule/core/abi.py authoritative (MEM_SIZE=65536, offset helpers).\n- ROM ingest: read ROM bytes once; validate rom_len <= MEM_SIZE.\n- Allocate buffers per env: flat mem u8[num_envs*MEM_SIZE] + regs arrays + instr/cycle counters.\n- Reset semantics: zero buffers, copy ROM into mem[0:rom_len] per env, set deterministic bring-up regs/counters.\n- Expose memory for tests: add debug read_memory(env_idx, lo, hi) -> bytes (and write helper).\n- Tests (fast):\n  - reset loads ROM prefix\n  - multi-env isolation\n  - counter/PC progression deterministic (already covered in existing warp_vec_cpu tests)\n  - correctness vs pyboy_single is deferred to Workstream 3\n\nAcceptance\n- uv run pytest passes\n- make check remains <=2 minutes","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:10:54.452319499Z","created_by":"bkase","updated_at":"2026-01-22T05:24:36.130716547Z","closed_at":"2026-01-22T05:24:36.130685554Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-54rq","title":"Import tetris.gb from ~/Downloads and capture start-of-game save state","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:38:40.167533032Z","created_by":"bkase","updated_at":"2026-01-24T17:00:43.967896217Z","closed_at":"2026-01-24T17:00:43.967838409Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-5hz","title":"WS5.5 README: E4 scaling instructions","description":"Update README with E4 scaling workflow: new make targets, required stage (full_step), suite usage, and report output locations. Clarify baseline backend choice and how to override E4_* variables.","acceptance_criteria":"1. README documents bench-e4-cpu and bench-e4-gpu, with example commands.\n2. Notes full_step stage and suite-driven reports.\n3. Mentions E4_* overrides and output directory layout.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T07:27:36.389863299Z","created_by":"bkase","updated_at":"2026-01-23T07:41:36.644449600Z","closed_at":"2026-01-23T07:41:36.644394144Z","close_reason":"Documented E4 scaling targets","compaction_level":0,"original_size":0}
{"id":"bd-5mqa","title":"Fix v9 PyBoy LCD timing/scanline layout in state I/O","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T10:46:49.955073041Z","created_by":"bkase","updated_at":"2026-01-25T10:47:01.340345328Z","closed_at":"2026-01-25T10:47:01.340317425Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-6df","title":"WS1: Refactor PyBoyVecMpBackend to use action codec + schedule","description":"Refactor PyBoyVecMpBackend (including worker process) to interpret actions exclusively via ActionCodec and use shared schedule helpers.\\n\\nImplementation:\\n- src/gbxcule/backends/pyboy_vec_mp.py\\n  - Add action_codec to PyBoyMpConfig and validate known codec id\\n  - Pass codec id into _worker_main and resolve codec in worker\\n  - Replace action_to_button(action) with codec.to_pyboy_button(action)\\n  - Expose backend.num_actions + backend.action_codec metadata\\n\\nDoD:\\n- Existing tests still pass under default codec.\\n- No worker pickling issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:33.177661775Z","created_by":"bkase","updated_at":"2026-01-23T04:51:32.916675647Z","closed_at":"2026-01-23T04:51:32.916649423Z","close_reason":"Updated pyboy_vec_mp to use codec + schedule helpers","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-6df","depends_on_id":"bd-1f5","type":"blocks","created_at":"2026-01-23T04:42:11.294308250Z","created_by":"bkase"},{"issue_id":"bd-6df","depends_on_id":"bd-32r","type":"blocks","created_at":"2026-01-23T04:42:10.745120676Z","created_by":"bkase"},{"issue_id":"bd-6df","depends_on_id":"bd-a7j","type":"blocks","created_at":"2026-01-23T04:42:11.910845346Z","created_by":"bkase"}]}
{"id":"bd-7gva","title":"M4C: Implement ResetCache + reset_mask (Warp kernels) + tests","description":"Implement fast per-env resets by copying a cached start snapshot into selected envs on GPU (Warp), and verify correctness with deterministic tests.\n\nCurrent state:\n- src/gbxcule/core/reset_cache.py is an empty stub.\n- WarpVec*Backend already exposes the state arrays we need (_mem, _cart_state, _cart_ram, regs/counters, serial buffers, and (optionally) _pix).\n\nDesign requirements:\n- Capture a single start snapshot (env0) once after loading the start .state and rendering the start pixels.\n- Apply resets with a mask tensor/array (per-env): reset_mask[i]=1 => restore env i.\n- Keep hot path GPU-only:\n  - no reading the mask back to CPU\n  - no looping over envs in Python to call wp.copy\n  - use Warp kernels that do masked copies\n- Ensure pixel buffer consistency after reset:\n  - either rerender or (preferred) copy a cached start pixel frame into backend._pix for reset envs.\n\nImplementation outline:\n- Add Warp kernels (new module under src/gbxcule/kernels/, e.g. reset_mask.py):\n  - masked copy for uint8 strided arrays (mem/cart_ram/serial_buf/pix)\n  - masked copy for int32 per-env arrays (regs/counters)\n  - masked copy for int64 per-env arrays (cycle/instr counts)\n  - masked clear for serial len/overflow (or set from snapshot)\n- Implement ResetCache in src/gbxcule/core/reset_cache.py:\n  - from_backend(backend, env_idx=0) to capture snapshot arrays/scalars\n  - apply_mask_np(mask: np.ndarray) for CPU backend/tests\n  - apply_mask_torch(mask: torch.Tensor) for CUDA path, launching on current torch stream using warp.stream_from_torch + ScopedStream (pattern exists in WarpVecCudaBackend.step_torch).\n\nTests:\n- Add a CPU integration test (always runs):\n  - initialize WarpVecCpuBackend(num_envs>=3, render_pixels=True)\n  - capture snapshot via ResetCache\n  - mutate env1/env2 state (WRAM bytes, PC, cart_state fields, pixel buffer)\n  - apply reset_mask to env1 only and assert env1 matches snapshot while env2 remains mutated\n- Add an optional CUDA test that is skipped when CUDA unavailable.\n\nAcceptance:\n- Reset correctness test passes deterministically.\n- No action space changes.\n- Reset path does not force global synchronize in CUDA hot path.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T04:49:36.878872552Z","created_by":"bkase","updated_at":"2026-01-26T04:57:35.413000361Z","closed_at":"2026-01-26T04:57:35.412972633Z","close_reason":"Implemented ResetCache + masked reset kernels and tests.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-7gva","depends_on_id":"bd-1lpa","type":"parent-child","created_at":"2026-01-26T04:49:36.885598879Z","created_by":"bkase"}]}
{"id":"bd-85t","title":"WS2: Add CUDA backend smoke test (skipped when no GPU)","description":"Add a minimal pytest smoke test for warp_vec_cuda that is skipped when CUDA is unavailable. This guards basic init/reset/step on DGX without affecting CPU-only gates.","acceptance_criteria":"1) New test file `tests/test_warp_vec_cuda_backend.py` added.\n2) Test skips cleanly when CUDA is unavailable.\n3) On DGX, test can reset, run a few steps, and read CPU state without errors.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T13:27:27.120723261Z","created_by":"bkase","updated_at":"2026-01-22T13:33:30.882698036Z","closed_at":"2026-01-22T13:33:30.882672020Z","close_reason":"Added CUDA backend smoke pytest","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-85t","depends_on_id":"bd-39h","type":"parent-child","created_at":"2026-01-22T13:27:27.136431867Z","created_by":"bkase"}]}
{"id":"bd-8iz","title":"Bug: prevent ROM writes in warp_vec_cpu","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-22T09:18:33.576314168Z","created_by":"bkase","updated_at":"2026-01-22T09:24:16.629629038Z","closed_at":"2026-01-22T09:24:16.629601806Z","close_reason":"Match PyBoy memory map for MEM_RWB (ROM + no-cart-RAM)","compaction_level":0,"original_size":0}
{"id":"bd-920u","title":"Debug and fix any parity mismatch (modulo scanline PPU accuracy)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T16:38:48.246375988Z","created_by":"bkase","updated_at":"2026-01-25T06:21:20.453292974Z","closed_at":"2026-01-25T06:21:20.453233886Z","close_reason":"Documented START-hold parity mismatch; deferring further debugging","compaction_level":0,"original_size":0}
{"id":"bd-94r","title":"WS2 Part 3: Post-step templates (reward_v0, obs_v0)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T05:47:09.144032689Z","created_by":"bkase","updated_at":"2026-01-23T05:52:48.178508401Z","closed_at":"2026-01-23T05:52:48.178452035Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-9e3e","title":"C2: MMIO support for IF/IE + timer registers","description":"Context\n- We already have MMIO `read8/write8` with JOYP + serial capture.\n- Milestone C requires MMIO semantics for IF/IE and timer regs.\n\nScope\n- Extend MMIO handling (primarily `write8`, plus any helper needed) for:\n  - `IF=0xFF0F`: mask to bits 0..4 on write\n  - `IE=0xFFFF`: mask to bits 0..4 on write\n  - `DIV=0xFF04`: write resets internal divider counter and DIV-visible value\n  - `TIMA=0xFF05`, `TMA=0xFF06`, `TAC=0xFF07`: store bytes (mask TAC as needed)\n- Decide on DIV visibility:\n  - Keep `mem[0xFF04]` updated to `(div_counter >> 8) & 0xFF` each tick so existing `read8` callers see correct DIV.\n\nDoD\n- Writes to these regs go through MMIO and don’t break existing ROMs.\n- No regressions in existing verify suite.\n\nTests\n- `uv run pytest -q tests/test_warp_vec_ws3_verify.py`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T08:26:02.900346429Z","created_by":"bkase","updated_at":"2026-01-24T08:48:57.394422697Z","closed_at":"2026-01-24T08:48:57.394394057Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-9e3e","depends_on_id":"bd-3id1","type":"blocks","created_at":"2026-01-24T08:26:06.547275756Z","created_by":"bkase"},{"issue_id":"bd-9e3e","depends_on_id":"bd-t2ta","type":"parent-child","created_at":"2026-01-24T08:26:02.907473501Z","created_by":"bkase"}]}
{"id":"bd-a7j","title":"WS1: Thread action codec through backend contract (num_actions + metadata)","description":"Thread action codec through backend contract (without breaking existing imports).\\n\\nImplementation:\\n- Update src/gbxcule/backends/common.py\\n  - Add helper(s) to resolve action codec by id\\n  - Add backend-visible fields: num_actions and action_codec metadata (name/version)\\n  - Keep existing ACTION_* / NUM_ACTIONS exports for now (treat as legacy_v0) to avoid breaking tests and external imports\\n- Update src/gbxcule/backends/__init__.py exports accordingly\\n- Update stub_bad and warp_vec action validation to use codec-derived num_actions (even if actions are not yet interpreted by Warp)\\n\\nDoD:\\n- All existing tests still pass with default codec.\\n- Codebase has a single source of truth for action semantics (codec).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T04:41:16.815466145Z","created_by":"bkase","updated_at":"2026-01-23T04:48:36.617786745Z","closed_at":"2026-01-23T04:48:36.617729482Z","close_reason":"Added codec helpers and updated backends to use codec-derived action ranges","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-a7j","depends_on_id":"bd-32r","type":"blocks","created_at":"2026-01-23T04:41:56.936080323Z","created_by":"bkase"}]}
{"id":"bd-as9s","title":"C5: Update docs for A2C trainer","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T15:02:20.056957453Z","created_by":"bkase","updated_at":"2026-01-27T15:08:13.763867851Z","closed_at":"2026-01-27T15:08:13.763840187Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-bzeu","title":"WSA: Update Warp joypad mapping to v1 indices","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T13:58:00.907097139Z","created_by":"bkase","updated_at":"2026-01-27T13:58:08.718288967Z","closed_at":"2026-01-27T13:58:08.718266725Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-cbhf","title":"C1: Add A2C TD(0) loss core module","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T15:02:01.202226579Z","created_by":"bkase","updated_at":"2026-01-27T15:03:49.945771952Z","closed_at":"2026-01-27T15:03:49.945743888Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-cc1","title":"Epic7: Harness CLI skeleton + backend registry","description":"Implement bench/harness.py CLI skeleton and backend selection.\n\nScope:\n- argparse CLI with required flags: --backend {pyboy_single,pyboy_vec_mp}, --rom or --suite, --steps, --warmup-steps, --num-envs, --num-workers, --frames-per-step, --release-after-frames, --output-dir.\n- Validate mutually exclusive rom/suite and required args.\n- Backend registry/factory in harness or backends/__init__.py.\n- Construct backend with config and run a single benchmark.\n\nAcceptance:\n- uv run python bench/harness.py --help shows flags.\n- Running with a micro-ROM produces a JSON artifact under bench/runs/.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:42:10.154810951Z","created_by":"bkase","updated_at":"2026-01-21T15:11:19.896129084Z","closed_at":"2026-01-21T15:11:19.896074218Z","close_reason":"Implemented harness CLI with backend registry, run config, artifact writer","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-cc1","depends_on_id":"bd-dcz","type":"parent-child","created_at":"2026-01-21T14:42:10.170394745Z","created_by":"bkase"}]}
{"id":"bd-d0nn","title":"RL M3-D: replay gate CLI (exit 0/1) + failure receipt","description":"Implement replay gate in src/gbxcule/rl/replay_goal_template.py (python -m). Load goal_template + meta, ROM/state/actions, validate meta. Replay trace with PokeredPixelsEnv on CUDA. Each step: compute dist via goal_match core, update consec counter, done when consec>=K. Exit 0 if done achieved; exit 1 if trace ends without done. Support --log-jsonl for per-step metrics. On failure write a minimal receipt bundle (dist_curve.json + last_frames.npy; optional PNG grid if PIL available) to --output-dir.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T03:55:20.392047707Z","created_by":"bkase","updated_at":"2026-01-26T04:07:37.997940210Z","closed_at":"2026-01-26T04:07:37.997912786Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-dc7","title":"Story 3.1: Define backend interface contract","description":"Scope\n- Implement VecBackend protocol/base class in common.py.\n- Define StepOutput/ResetOutput dataclasses.\n- Include action_spec/obs_spec and device/num_envs metadata.\n\nAcceptance\n- Protocol includes reset, step, get_cpu_state, close.\n- Types are importable and pyright-ready in core modules.\n\nRefs\n- history/m0-epics.md (Story 3.1)\n- ARCHITECTURE.md (Section 5.1: VecBackend protocol)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.469215144Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.112834142Z","deleted_at":"2026-01-21T09:15:23.112827262Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-dcz","title":"Epic 7: Harness CLI for benchmark + reporting","description":"Intent: Implement bench/harness.py as the single CLI to run backends, measure throughput, and emit structured JSON artifacts with stable schemas.\n\nKey refs to read: ARCHITECTURE.md (run schema, step semantics), CONSTITUTION.md (functional core/imperative shell), history/epic6789.md, src/gbxcule/backends/common.py, src/gbxcule/backends/{pyboy_single,pyboy_vec_mp}.py, bench/roms/suite.yaml.\n\nMusts:\n- Unidirectional flow: RunConfig -> run -> RunResult -> write artifact.\n- Warmup excluded from timing; SPS math correct.\n- RESULT_SCHEMA_VERSION=1 artifacts under bench/runs/<timestamp>/<run_id>.json.\n- Deterministic action generation spec + seed recorded.\n- CLI supports backend, rom/suite, steps, warmup, num_envs, num_workers, frames_per_step, release_after_frames.\n\nAcceptance: Fake-backend tests validate schema + SPS math; CLI runs pyboy_single and pyboy_vec_mp on a micro-ROM; artifacts are JSON-valid and stable.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T14:42:03.277320430Z","created_by":"bkase","updated_at":"2026-01-21T15:19:55.453527628Z","closed_at":"2026-01-21T15:19:55.453500891Z","close_reason":"Epic 7 complete: Harness CLI with backend registry, benchmark runner, action generation, scaling sweeps, and schema-validated artifacts.","compaction_level":0,"original_size":0}
{"id":"bd-ejga","title":"B5: Implement control flow + stack","description":"Goal: implement control flow and stack operations with correct cycles and stack byte order.\n\nOpcode groups:\n- JP/JR (all conditions)\n- CALL/RET (all conditions)\n- RST\n- PUSH/POP (AF/BC/DE/HL) if not already covered\n\nDeliverables:\n- Templates in jumps.py + new stack.py (preferred) for push/pop/call/ret helpers.\n- ISA table entries with correct conditional cycle counts.\n- Micro-ROMs to validate call/ret/rst flow and stack contents.\n- Step-exact verify tests vs PyBoy.\n\nAcceptance criteria:\n- All control-flow/stack opcodes covered in ISA table.\n- Conditional cycles verified by PyBoy diffs.\n- New ROMs pass verify vs PyBoy.\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B5).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T03:23:00.485450176Z","created_by":"bkase","updated_at":"2026-01-24T07:14:19.216291347Z","closed_at":"2026-01-24T07:14:19.216264403Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-ejga","depends_on_id":"bd-1t5","type":"blocks","created_at":"2026-01-24T03:23:50.710254281Z","created_by":"bkase"}]}
{"id":"bd-fak","title":"Epic9: README update (why + how to run)","description":"Update README.md with concise, operational sections.\n\nScope:\n- What this is + hypothesis + success criteria.\n- uv-only install: uv sync / make setup.\n- Micro-ROM generation: make roms.\n- Baseline bench: make bench; explain JSON artifacts under bench/runs/.\n- Verify (expected to fail with stub): make verify; explain mismatch bundles + repro.sh.\n- Minimal interpretation guide: SPS vs frames/sec; warmup vs measured.\n\nAcceptance:\n- All commands listed exist in Makefile and are runnable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:43:38.780257759Z","created_by":"bkase","updated_at":"2026-01-21T15:33:04.226378233Z","closed_at":"2026-01-21T15:33:04.226323001Z","close_reason":"README updated with why+how, success criteria, artifact docs, interpretation guide","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-fak","depends_on_id":"bd-38o","type":"parent-child","created_at":"2026-01-21T14:43:38.796349415Z","created_by":"bkase"}]}
{"id":"bd-fx0","title":"WS0: Add M3 GPU gate targets to Makefile","description":"Define M3 contract variables and add verify-gpu/bench-gpu/check-gpu targets with DGX-friendly messaging.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T12:21:20.511756261Z","created_by":"bkase","updated_at":"2026-01-22T12:34:45.561409380Z","closed_at":"2026-01-22T12:22:44.697182328Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-fx0","depends_on_id":"bd-1kg","type":"blocks","created_at":"2026-01-22T12:34:45.561384884Z","created_by":"bkase"}]}
{"id":"bd-g1pq","title":"D4: Backend wiring for scanline PPU + conditional render","description":"Goal:\n- Wire scanline scheduler + latches + renderer into Warp backend.\n\nImplementation details:\n- In `src/gbxcule/backends/warp_vec.py`:\n  - allocate new buffers from D1 in reset() (ppu_scanline_cycle, ppu_ly, bg_*_latch_env0, frame_bg_shade_env0).\n  - pass scanline state + latch buffers into `cpu_step` kernel launch.\n  - add renderer kernel launch after cpu_step when needed (verification/graphics tests).\n  - define a capture policy (always render in verify mode; optional knob for bench/training).\n- In `src/gbxcule/kernels/cpu_step.py`:\n  - update warmup call signatures to include new buffers.\n  - ensure kernel cache key changes (new signature).\n\nTouch points:\n- `src/gbxcule/backends/warp_vec.py`\n- `src/gbxcule/kernels/cpu_step.py`\n- `src/gbxcule/kernels/ppu_step.py` (kernel getter or import)\n\nAcceptance:\n- Warp backend can run with new buffers without breaking existing tests.\n- Rendering can be enabled/disabled without affecting CPU correctness.\n- Env0 frame buffer is populated after render when enabled.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T11:36:17.199102512Z","created_by":"bkase","updated_at":"2026-01-24T11:55:07.171582506Z","closed_at":"2026-01-24T11:55:07.171526330Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-g1pq","depends_on_id":"bd-275o","type":"blocks","created_at":"2026-01-24T11:36:29.819680714Z","created_by":"bkase"}]}
{"id":"bd-g78","title":"B3: Implement ALU8 + flags family","description":"Goal: implement full 8-bit ALU family with correct Z/N/H/C flags.\n\nOpcode groups:\n- ADD/ADC/SUB/SBC/AND/OR/XOR/CP (r, (HL), d8)\n- INC/DEC r and INC/DEC (HL)\n- DAA, CPL, SCF, CCF\n\nDeliverables:\n- Shared flag helpers (add8/sub8/adc8/sbc8) to ensure correctness by construction.\n- ISA table entries mapped with correct cycle counts (incl. (HL) vs register).\n- New micro-ROMs for flag edge cases (half-carry, carry, zero, DAA).\n- Step-exact verify tests vs PyBoy.\n\nAcceptance criteria:\n- All ALU8 opcodes covered in ISA table (no defaults).\n- Flag-sensitive ROMs pass verify vs PyBoy.\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (B3).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T03:22:44.483919105Z","created_by":"bkase","updated_at":"2026-01-24T04:07:33.694093915Z","closed_at":"2026-01-24T04:07:33.694038187Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-g78","depends_on_id":"bd-3h6","type":"blocks","created_at":"2026-01-24T03:23:40.320161121Z","created_by":"bkase"}]}
{"id":"bd-go8h","title":"C6: Milestone C micro-ROMs + verify tests","description":"Scope\n- Add repo-owned Milestone C micro-ROMs in `bench/roms/build_micro_rom.py` and register in `bench/roms/suite.yaml`:\n  - `TIMER_DIV_BASIC.gb`: validates DIV progression + DIV reset + TIMA increments at each TAC rate.\n  - `TIMER_IRQ_HALT.gb`: enables timer+interrupts, HALTs, ISR at 0x0050 writes WRAM signature then RETI.\n  - `EI_DELAY.gb`: validates EI delay (IME enables after following instruction).\n- Add verification tests vs PyBoy (`tests/`) mirroring existing style (`tests/test_warp_vec_ws3_verify.py`).\n- Add/extend harness support if needed:\n  - optional skip-if-missing external serial ROM test: run until serial contains \"Passed\" (or chosen token)\n  - mismatch bundles: include serial snapshot (env0) to improve repro quality.\n\nDoD\n- New micro-ROMs deterministic and included in ROM build.\n- New verify tests pass locally (PyBoy vs Warp CPU).\n\nTests\n- `make roms`\n- `uv run pytest -q tests/test_micro_roms.py`\n- `uv run pytest -q tests/test_warp_vec_ws3_verify.py`\n- New: `uv run pytest -q tests/test_warp_vec_ws4_verify.py` (or similar)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T08:26:05.824357236Z","created_by":"bkase","updated_at":"2026-01-24T09:23:10.867668542Z","closed_at":"2026-01-24T09:23:10.867639885Z","close_reason":"Added timer/interrupt micro-ROMs + verify tests","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-go8h","depends_on_id":"bd-38ny","type":"blocks","created_at":"2026-01-24T08:26:09.973283785Z","created_by":"bkase"},{"issue_id":"bd-go8h","depends_on_id":"bd-t2ta","type":"parent-child","created_at":"2026-01-24T08:26:05.830575337Z","created_by":"bkase"}]}
{"id":"bd-hbgj","title":"C3: Add trainer self-test mode","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T15:02:08.933946900Z","created_by":"bkase","updated_at":"2026-01-27T15:06:37.467134056Z","closed_at":"2026-01-27T15:06:37.467105401Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-hqs","title":"Epic 5: pyboy_single reference backend","description":"Goal\n- Implement the trusted single-env reference backend for baselines and verification.\n\nScope\n- pyboy_single implements VecBackend contract.\n- Headless execution and stable get_cpu_state normalization.\n\nAcceptance\n- Backend runs N steps and returns stable cpu state dict.\n- Harness can use it as the reference backend.\n\nRefs\n- history/m0-epics.md (Epic 5)\n- history/prd.md (Section 7: backends; Section 10: verification scope)\n- ARCHITECTURE.md (Section 9.1: pyboy_single)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:39.131510679Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.105236714Z","deleted_at":"2026-01-21T09:15:23.105227098Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-i5g","title":"WS3: Add JOY_DIVERGE_PERSIST micro-ROM + suite updates","description":"Goal: add a divergence-sustaining micro-ROM that actually reads JOYP and writes a deterministic signature to WRAM, then register it in the ROM suite.\n\nScope / changes:\n- Extend `bench/roms/build_micro_rom.py` with `build_joy_diverge_persist()`:\n  - Reads JOYP (0xFF00) each outer loop, updates a persistent mode byte (WRAM).\n  - Branches on mode & 3 into 4 inner loops (ALU-heavy, stride-1, stride-17, branchy).\n  - Writes signature bytes to `0xC000:0xC010` every outer iteration.\n- Update `build_all()` to include `JOY_DIVERGE_PERSIST.gb`.\n- Update `bench/roms/suite.yaml` with a new entry (default frames_per_step=24, release_after_frames=8).\n- Update `tests/test_micro_roms.py` expectations: count of ROMs, determinism, checksum checks, PyBoy headless smoke for new ROM.\n\nAcceptance criteria:\n- `make roms` emits `bench/roms/out/JOY_DIVERGE_PERSIST.gb`.\n- Micro-ROM tests pass locally (`uv run pytest tests/test_micro_roms.py -q`).\n- PyBoy can run the new ROM headless without crashing.\n\nNotes:\n- Keep the opcode surface minimal and aligned with WS3 opcode additions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T06:13:23.023318322Z","created_by":"bkase","updated_at":"2026-01-23T06:25:18.744262697Z","closed_at":"2026-01-23T06:25:18.744235543Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-iy02","title":"M5 Eval: D3 fix rl_m5_eval CLI","description":"Update tools/rl_m5_eval.py defaults and wiring to use eval core.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-27T15:21:50.592042037Z","created_by":"bkase","updated_at":"2026-01-27T15:21:50.592042037Z","compaction_level":0,"original_size":0}
{"id":"bd-jd1","title":"Epic8: DUT stub in warp_vec backend","description":"Add a minimal DUT stub in src/gbxcule/backends/warp_vec.py to enable verify flow.\n\nScope:\n- Implement VecBackend interface for device=\"cpu\" stub that returns predictable (wrong) CPU state.\n- Step returns zero obs/reward; get_cpu_state returns zeros (or incrementing counter) with canonical keys.\n- Ensure name=\"warp_vec\" so harness uses real backend name.\n\nAcceptance:\n- Verify mode fails against pyboy_single and emits bundle.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:43:16.583924633Z","created_by":"bkase","updated_at":"2026-01-21T15:24:32.646784091Z","closed_at":"2026-01-21T15:24:32.646756539Z","close_reason":"Implemented WarpVecBackend stub with predictable (wrong) CPU state. Registered in harness with full VecBackend interface.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-jd1","depends_on_id":"bd-1pl","type":"parent-child","created_at":"2026-01-21T14:43:16.590861349Z","created_by":"bkase"}]}
{"id":"bd-jw9d","title":"rl-m2-ws1: warp_vec_cuda step_torch(actions) (GPU actions, torch stream)","description":"Context\\n- Implements WS1 in history/simple-rl-m2-plan.md.\\n- M2 hot path must be GPU-only + stream-correct: pixels→torch→actions→warp step+render→pixels.\\n- Current warp_vec backend step() path stages actions through numpy/host for CUDA; this must be avoided for RL.\\n\\nDeliverables\\n1) Add torch-actions stepping entry point\\n- Add a CUDA-only method on WarpVecCudaBackend (or base with device checks): step_torch(actions).\\n- actions input contract:\\n  - torch Tensor on CUDA\\n  - shape (num_envs,)\\n  - dtype int32 preferred (int64 acceptable if converted cheaply)\\n  - values validated: 0 <= a < num_actions\\n- Must not stage through numpy/host memory in the hot path.\\n  - Passing a torch tensor directly to wp.launch OR wrapping via wp.from_torch is acceptable.\\n  - Device-to-device copies are acceptable if unavoidable; host staging is not.\\n\\n2) Stream correctness\\n- Ensure Warp launches in this method are ordered on torch.cuda.current_stream():\\n  - use wp.ScopedStream(wp.stream_from_torch(torch.cuda.current_stream())) around step+render launches.\\n- No global wp.synchronize() in the hot path.\\n\\n3) Refactor to avoid duplication\\n- Prefer factoring the kernel launch plumbing into a shared private helper (e.g., _launch_step(actions_wp)) used by both numpy step() and step_torch().\\n\\nAcceptance / Gates\\n- A tiny CUDA smoke (manual or test) can step using torch-generated actions without calling .cpu().numpy().\\n- After step_torch(), a torch op that reads pixels_torch() on the same stream sees updated pixels (no stale reads).\\n- Existing harness usage (numpy step) remains unchanged.\\n\\nFiles likely touched\\n- src/gbxcule/backends/warp_vec.py\\n\\nNotes\\n- Do not change action space / do not add NOOP.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-26T03:14:21.734329369Z","created_by":"bkase","updated_at":"2026-01-26T03:24:58.196525963Z","closed_at":"2026-01-26T03:24:58.196468731Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-jw9d","depends_on_id":"bd-3nlj","type":"blocks","created_at":"2026-01-26T03:15:18.804797387Z","created_by":"bkase"}]}
{"id":"bd-k5g","title":"Epic3 (optional): Add CPU-state hash helper","description":"Optional but recommended: add a deterministic CPU-state hashing helper to src/gbxcule/core/signatures.py for quick determinism checks.\n\nScope:\n- Implement hash_cpu_state(state: CpuState, *, include_counters: bool = True) -> str using blake2b over a canonicalized JSON representation (sorted keys, stable ints).\n- Use stdlib only; no goldens.\n- (Optional) add a minimal unit test to ensure stable output for the same state.\n\nAcceptance:\n- Hash output is deterministic across runs and platforms for equivalent states.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T14:15:53.135954089Z","created_by":"bkase","updated_at":"2026-01-21T14:26:04.644966717Z","closed_at":"2026-01-21T14:26:04.644939277Z","close_reason":"Added hash_cpu_state helper with blake2b + tests","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-k5g","depends_on_id":"bd-2m1","type":"parent-child","created_at":"2026-01-21T14:15:53.143769728Z","created_by":"bkase"}]}
{"id":"bd-kf0n","title":"m0: Makefile targets for smoke run","description":"Add Makefile convenience target(s) for running the m0 smoke tool.\n\nDetails:\n- Add a \"m0\" target that runs tools/pokered_pixel_smoke.py with canonical config.\n- Add a \"m0-gpu\" target that forces warp_vec_cuda and documents CUDA requirement.\n- Do NOT hook into make check or existing CI gates; keep it opt-in per plan.\n- Ensure targets are self-contained (use uv run python).\n\nAcceptance:\n- make m0 works when ROM/state are present.\n- make m0-gpu errors clearly if no CUDA device.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:08:32.568050646Z","created_by":"bkase","updated_at":"2026-01-25T16:12:55.186373939Z","closed_at":"2026-01-25T16:12:55.186315665Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-kvvs","title":"m5-3: pixel CNN actor-critic + rollout buffer","description":"Add the minimal pixel policy/value model and a GPU rollout buffer.\n\nDeliverables:\n- Add src/gbxcule/rl/models.py with PixelActorCriticCNN:\n  - input uint8[N,K,H,W] -> normalize /3.0 -> Atari-ish conv trunk -> policy logits + value.\n  - num_actions must be 7 (A,B,START,UP,DOWN,LEFT,RIGHT).\n- Add src/gbxcule/rl/rollout.py with RolloutBuffer:\n  - preallocated CUDA tensors for obs_u8, actions, rewards, dones, values, logprobs.\n  - add() and as_batch()/flatten helpers.\n- Add unit tests for model output shapes/dtypes and rollout buffer shape checks.\n\nAcceptance:\n- Model forward works on CUDA when torch is available; tests skip otherwise.\n- RolloutBuffer enforces shape/dtype/device invariants.\n- No action-space changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:32:03.553463867Z","created_by":"bkase","updated_at":"2026-01-26T06:50:27.829077312Z","closed_at":"2026-01-26T06:50:27.829047088Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-lo6u","title":"WSA: Minimal tests for v1 codec + warp mapping guard","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T13:44:14.826002762Z","created_by":"bkase","updated_at":"2026-01-27T13:44:20.173896426Z","closed_at":"2026-01-27T13:44:20.173846650Z","close_reason":"Completed (plan updated in history/a2c-wa.md)","compaction_level":0,"original_size":0}
{"id":"bd-m9ps","title":"A2C WB B2: Reset/autoreset scaling check","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T14:01:34.625382611Z","created_by":"bkase","updated_at":"2026-01-27T14:08:49.161572783Z","closed_at":"2026-01-27T14:08:49.161544798Z","close_reason":"Added optional empty-reset skip and bench flag","compaction_level":0,"original_size":0,"comments":[{"id":9,"issue_id":"bd-m9ps","author":"bkase","text":"Reopened: Reopening: should remain open until implementation is complete","created_at":"2026-01-27T14:05:14Z"}]}
{"id":"bd-m9w","title":"B0a: Template organization by opcode family","description":"Goal: keep CPU templates split by opcode family (no monolithic template file) to preserve maintainability as ISA grows.\n\nDeliverables:\n- Keep existing modules focused: cpu_templates/loads.py, alu.py, jumps.py, misc.py.\n- Add new modules as needed for B-family work (recommended):\n  - cpu_templates/stack.py (PUSH/POP/CALL/RET/RST helpers)\n  - cpu_templates/bitops.py (CB ops + unprefixed rotates/shifts)\n  - optional cpu_templates/control.py (if DI/EI/HALT/STOP added later)\n- Update __init__.py exports if needed.\n- Ensure ISA table references these modules rather than aggregating in a single file.\n\nAcceptance criteria:\n- No single template file exceeds reasonable scope; each file maps cleanly to a family.\n- New templates are added to the appropriate module with consistent naming.\n\nNotes:\n- Reference plan: history/gameboy-milestone-b-plan.md (Template organization rule).\n- Can be implemented alongside B0/B2/B6 as templates are added.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T03:22:18.220406682Z","created_by":"bkase","updated_at":"2026-01-24T03:54:26.911860478Z","closed_at":"2026-01-24T03:54:26.911832350Z","close_reason":"Applied template-organization rule; loads expanded within loads.py without creating monolith. Future families will add separate modules as planned.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-m9w","depends_on_id":"bd-3ul","type":"blocks","created_at":"2026-01-24T03:23:27.832832657Z","created_by":"bkase"}]}
{"id":"bd-mxlh","title":"WSA: Replace action codec with canonical v1 (NOOP) and delete v0","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T13:44:11.718460151Z","created_by":"bkase","updated_at":"2026-01-27T13:44:20.158858343Z","closed_at":"2026-01-27T13:44:20.158798295Z","close_reason":"Completed (plan updated in history/a2c-wa.md)","compaction_level":0,"original_size":0}
{"id":"bd-my0p","title":"M5: Script PyBoy to house goal, run training, capture video","description":"Script PyBoy to reach Pallet Town house, save goal state/frames, run RL training/eval, verify via screenshots, and render MP4 of best run.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-26T09:20:37.303417325Z","created_by":"bkase","updated_at":"2026-01-26T09:20:42.939984352Z","compaction_level":0,"original_size":0}
{"id":"bd-n96k","title":"F2 MMIO cart mapping + bootrom disable","description":"Extend kernel read8/write8 to map ROM/RAM/RTC via cart state and to honor 0xFF50 bootrom disable.\n\nDeliverables:\n- read8:\n  - 0x0000-0x3FFF fixed ROM mapping (bootrom if enabled; else bank 0 or MBC1 mode-dependent bank)\n  - 0x4000-0x7FFF switchable ROM bank\n  - 0xA000-0xBFFF external RAM / RTC (RAM enable gating, open-bus behavior)\n- write8:\n  - 0x0000-0x7FFF becomes MBC control writes (delegated to MBC1/MBC3 handlers)\n  - 0xA000-0xBFFF writes to RAM/RTC when enabled\n  - 0xFF50 disables bootrom mapping deterministically\n- Add cartridge debug snapshot fields for mismatch artifacts (bank regs + RAM enable + bootrom flag).\n\nNotes:\n- Preserve existing IO side effects (timers, serial, DMA, IF/IE).\n- All instruction templates must use read8/write8 for memory access.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:22:07.840226939Z","created_by":"bkase","updated_at":"2026-01-24T15:54:27.934825458Z","closed_at":"2026-01-24T15:54:27.934797010Z","close_reason":"Completed (bootrom disable + cart ROM/RAM/RTC mapping)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-n96k","depends_on_id":"bd-1rsc","type":"parent-child","created_at":"2026-01-24T15:22:07.856025576Z","created_by":"bkase"},{"issue_id":"bd-n96k","depends_on_id":"bd-38pq","type":"blocks","created_at":"2026-01-24T15:22:07.858891142Z","created_by":"bkase"}]}
{"id":"bd-nxk","title":"Story 2.1: Add Makefile with core targets","description":"Scope\n- Add Makefile targets: setup, fmt, test, roms, bench, verify, check.\n- Ensure each target uses uv run internally.\n\nAcceptance\n- make setup runs uv sync.\n- make test runs pytest via uv.\n- make check runs fmt/test/roms/bench smoke and returns non-zero on failure.\n\nRefs\n- history/m0-epics.md (Story 2.1)\n- ARCHITECTURE.md (Section 11.4: Makefile targets)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.122863736Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.166471021Z","deleted_at":"2026-01-21T09:15:23.166461692Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-pab","title":"Story 2.3: Smoke target for developer sanity","description":"Scope\n- Add make smoke target that builds micro-ROMs and runs a short pyboy_single bench.\n- Ensure JSON output is written to bench/runs/ and failures return non-zero.\n\nAcceptance\n- make smoke produces a JSON artifact under bench/runs/.\n- make smoke exits non-zero on failure.\n\nRefs\n- history/m0-epics.md (Story 2.3)\n- ARCHITECTURE.md (Section 8: benchmarking protocol)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:38.296298809Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.057015158Z","deleted_at":"2026-01-21T09:15:23.057009190Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-q3n","title":"WS6: Add tests/docs for system info provenance","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:26:25.380889155Z","created_by":"bkase","updated_at":"2026-01-22T14:35:30.345482474Z","closed_at":"2026-01-22T14:35:30.345427272Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-qac","title":"WS7: Implement scaling plot script + matplotlib dep","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T14:43:11.348196955Z","created_by":"bkase","updated_at":"2026-01-22T14:47:49.650996799Z","closed_at":"2026-01-22T14:47:49.650970286Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-qvfo","title":"m0: deterministic tests for pixel smoke","description":"Add deterministic pytest gates for the m0 pixel-smoke pipeline.\n\nDetails:\n- Add tests/test_m0_pixel_smoke.py.\n- CPU test: load canonical ROM/state, run short fixed action trace, assert:\n  - frame length == 160*144\n  - shades in 0..3\n  - frame not constant\n  - deterministic frame hash list matches golden snapshot\n- Optional CUDA parity test (skip if CUDA unavailable): same trace, hashes/bytes match CPU.\n- Skip tests gracefully if ROM or state is missing (Pokemon Red assets are not in repo).\n- Keep runtime short (few steps only).\n\nAcceptance:\n- CPU test passes when ROM/state present.\n- CUDA parity test passes when CUDA available.\n- Tests remain fast and do not require adding to make check.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:08:25.321189965Z","created_by":"bkase","updated_at":"2026-01-25T16:12:21.890711033Z","closed_at":"2026-01-25T16:12:21.890675256Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-r49","title":"WS2 Part 5: Wire stage through warp_vec + harness","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T05:47:16.266133566Z","created_by":"bkase","updated_at":"2026-01-23T06:01:10.555365894Z","closed_at":"2026-01-23T06:01:10.555309927Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-r4e","title":"M0: Repo + harness foundation","description":"Goal\n- Deliver the M0 definition of done for repo scaffolding, baselines, harness artifacts, verification scaffold, and initial docs.\n\nM0 DoD (from source docs)\n- Repo matches required structure and is runnable via uv only.\n- Makefile targets for setup/test/bench/verify exist and work on a fresh machine.\n- Micro-ROM builder outputs at least two valid ROMs in bench/roms/out/.\n- Harness runs pyboy_single and pyboy_vec_mp baselines and emits JSON under bench/runs/.\n- Verification scaffold exists and mismatch emits a repro bundle.\n- Devlog tweet draft exists.\n- Commit-hook checks exist via Makefile target(s).\n\nAcceptance\n- All child epics (1-9) closed.\n- M0 DoD checklist above fully satisfied.\n\nRefs\n- history/m0-epics.md (M0 Definition of Done)\n- history/prd.md (Section 16: M0)\n- ARCHITECTURE.md (Sections 1, 8, 11)\n- CONSTITUTION.md (Sections I, II, VI)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-21T09:12:37.732633844Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.160071742Z","deleted_at":"2026-01-21T09:15:23.160057230Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"epic","compaction_level":0,"original_size":0}
{"id":"bd-rqci","title":"E3: Sprite rendering + ROM + frame-hash tests","description":"Goal:\n- Implement DMG OBJ sprites (8x8 + 8x16) with correct priority, flips, and palettes.\n\nDeliverables:\n- OAM evaluation per scanline (max 10 sprites; order by OAM index).\n- Sprite fetch + compose:\n  - x/y offsets (+8/+16), xflip/yflip\n  - palette select OBP0/OBP1\n  - color 0 transparent\n  - priority: if OBJ behind BG, show only when BG/Window color index == 0\n- Add micro-ROM `PPU_SPRITES.gb` (uses DMA to populate OAM; tests flips/palettes/priority/8x16).\n- Add frame-hash tests vs PyBoy on 2–3 frames.\n\nFiles likely touched:\n- src/gbxcule/core/abi.py (OBP0/OBP1 latches; optional sprite temp buffers)\n- src/gbxcule/kernels/cpu_step_builder.py (latch capture of OBP regs)\n- src/gbxcule/kernels/ppu_step.py (sprite render + compose)\n- bench/roms/build_micro_rom.py\n- bench/roms/suite.yaml\n- tests/test_ppu_* (sprite hash tests)\n\nAcceptance checks:\n- `make roms`\n- `make test` (sprite hash matches PyBoy)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T13:11:55.678250570Z","created_by":"bkase","updated_at":"2026-01-24T14:14:39.249556704Z","closed_at":"2026-01-24T14:14:39.249528912Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["milestone-e","ppu","sprites"],"dependencies":[{"issue_id":"bd-rqci","depends_on_id":"Created bd-13sy: Milestone E: Window + Sprites + STAT + DMA","type":"parent-child","created_at":"2026-01-24T13:11:55.696784016Z","created_by":"bkase"}]}
{"id":"bd-s0h","title":"Milestone A: wire serial buffers through warp_vec backends + expose read_serial","description":"Goal:\n- Extend kernel ABI to pass serial buffers to Warp kernels.\n- Expose a backend API to read serial output (CPU + CUDA).\n\nScope / Files:\n- src/gbxcule/kernels/cpu_step.py: update warmup launch args; include serial buffers in kernel signature usage.\n- src/gbxcule/backends/warp_vec.py:\n  * allocate serial_buf/serial_len/serial_overflow in reset().\n  * pass buffers in step() launch args.\n  * implement read_serial(env_idx) and optionally drain_serial(env_idx).\n  * CUDA: use pinned host buffer + wp.copy + synchronize inside read_serial only.\n\nAcceptance:\n- CPU backend can read serial bytes from env0 after stepping.\n- CUDA backend read_serial works without affecting async step() path.\n- Warmup compilation still succeeds.\n\nNotes:\n- Do not change VecBackend Protocol yet; keep methods optional via hasattr checks in harness/tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T01:59:41.492139685Z","created_by":"bkase","updated_at":"2026-01-24T02:06:58.791054989Z","closed_at":"2026-01-24T02:06:58.790999068Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-s1v","title":"Epic9 (optional): README command guard","description":"Optional: add a tiny test that asserts README make commands exist in Makefile (docs-as-code lite).\n\nScope:\n- Parse README for lines starting with `make ` and ensure targets exist.\n- Keep test fast and deterministic.\n\nAcceptance:\n- Fails when README references a missing make target.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T14:43:51.311184952Z","created_by":"bkase","updated_at":"2026-01-21T15:34:12.312345560Z","closed_at":"2026-01-21T15:34:12.312318200Z","close_reason":"Added test_docs.py with README command guard (2 tests)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-s1v","depends_on_id":"bd-38o","type":"parent-child","created_at":"2026-01-21T14:43:51.326847698Z","created_by":"bkase"}]}
{"id":"bd-sig","title":"WS5: CUDA verify ALU_LOOP smoke","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T14:15:41.212649984Z","created_by":"bkase","updated_at":"2026-01-22T14:16:52.743123440Z","closed_at":"2026-01-22T14:16:52.743097504Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-sig","depends_on_id":"bd-254","type":"parent-child","created_at":"2026-01-22T14:15:41.228455973Z","created_by":"bkase"}]}
{"id":"bd-t2ta","title":"Milestone C — Interrupts + Timers","description":"Spec + plan: `history/gameboy-milestone-c-plan.md`\n\nGoal\n- Implement DMG interrupts + timers (no PPU) with step-exact verification vs PyBoy.\n\nDoD (high level)\n- IME/IE/IF gating, priority order, vectors, EI delay, RETI sets IME.\n- Edge-based timers (DIV-bit falling edge) + TIMA overflow reload timing + IF(Timer).\n- HALT idle loop + wake semantics.\n- Repo micro-ROM suite for timers/interrupts passes vs PyBoy.\n- At least one external serial self-test ROM passes (skip-if-missing in CI).\n\nNotes\n- Milestone A/B are considered complete; serial capture + MMIO read/write already exist.\n- DI/EI/HALT opcodes are currently UNIMPL in `src/gbxcule/core/isa_sm83.py` and are completed as part of Milestone C.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-24T08:26:01.523079231Z","created_by":"bkase","updated_at":"2026-01-24T09:57:24.372302370Z","closed_at":"2026-01-24T09:57:24.372243155Z","close_reason":"All Milestone C tasks complete","compaction_level":0,"original_size":0}
{"id":"bd-t5x","title":"WS5: Update README verification docs","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-22T09:18:41.680733653Z","created_by":"bkase","updated_at":"2026-01-22T09:30:18.154110226Z","closed_at":"2026-01-22T09:30:18.154055809Z","close_reason":"Update README for M2 verification targets","compaction_level":0,"original_size":0}
{"id":"bd-t7w","title":"WS1: DGX packaging (aarch64): force Warp cu13 via uv","description":"Milestone 3 WS1: make Linux/DGX installs deterministic by forcing a Warp CUDA 13 (cu13) wheel via uv. DGX Spark is arm-based (aarch64), so the pinned wheel URL(s) and uv markers must cover linux/aarch64 (and ideally linux/x86_64 too).\\n\\nDoD:\\n- `uv sync` on DGX installs Warp from the pinned cu13 wheel URL (prove via PEP 610 direct_url.json + warp import/init).\\n- `uv sync` on macOS still works from PyPI with no special steps.\\n\\nDeliverables:\\n- pyproject.toml: [tool.uv.sources] override(s) for warp-lang with appropriate markers\\n- updated uv.lock\\n- optional DGX setup docs","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-22T12:24:16.618907944Z","created_by":"bkase","updated_at":"2026-01-22T13:13:30.440933446Z","closed_at":"2026-01-22T13:13:30.440905782Z","close_reason":"WS1 complete: cu13 pinning + docs + macOS/DGX validation","compaction_level":0,"original_size":0}
{"id":"bd-th6","title":"Story 7.3: Deterministic action generation","description":"Scope\n- Add --actions-seed and record action generator name/version + seed.\n- Actions can be noop for micro-ROMs but must be reproducible.\n\nAcceptance\n- JSON artifacts record actions seed and generator metadata.\n\nRefs\n- history/m0-epics.md (Story 7.3)\n- ARCHITECTURE.md (Section 1.1: determinism; Section 4.1: frames per step)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:40.442791668Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.084081414Z","deleted_at":"2026-01-21T09:15:23.084075718Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
{"id":"bd-ty39","title":"Allow Warp backend to load banked ROMs >64KB","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T09:46:00.809546267Z","created_by":"bkase","updated_at":"2026-01-25T09:46:38.594599101Z","closed_at":"2026-01-25T09:46:38.594570556Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-w3ob","title":"C4: Add A2C smoke tests","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T15:02:12.613498139Z","created_by":"bkase","updated_at":"2026-01-27T15:07:25.306339960Z","closed_at":"2026-01-27T15:07:25.306312329Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"bd-wg6","title":"Epic6: Robust close/join + worker failure handling","description":"Harden multiprocessing lifecycle in pyboy_vec_mp.\n\nScope:\n- Implement close() that sends CLOSE, joins workers with timeout, terminates if needed.\n- Detect worker crashes (broken pipe / EOF) and raise immediately with context.\n- Ensure child processes are cleaned even on errors during step/reset.\n\nAcceptance:\n- No zombie workers after tests; close() is idempotent and bounded.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T14:41:45.022148757Z","created_by":"bkase","updated_at":"2026-01-21T15:05:02.073985548Z","closed_at":"2026-01-21T15:05:02.073930428Z","close_reason":"Added broken pipe/EOF detection, timeout on recv, __del__ cleanup, and close() on errors","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-wg6","depends_on_id":"bd-2sm","type":"parent-child","created_at":"2026-01-21T14:41:45.040535522Z","created_by":"bkase"}]}
{"id":"bd-x9y","title":"Epic4 (optional): Ensure bench/roms/out is gitignored","description":"Optional: verify bench/roms/out is gitignored; add to .gitignore if missing.\n\nAcceptance:\n- Generated ROMs are not tracked in git.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T14:23:16.250178210Z","created_by":"bkase","updated_at":"2026-01-21T14:45:48.499927396Z","closed_at":"2026-01-21T14:45:48.499871204Z","close_reason":"bench/roms/out and .hypothesis already gitignored","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-x9y","depends_on_id":"bd-3tr","type":"parent-child","created_at":"2026-01-21T14:23:16.266581287Z","created_by":"bkase"}]}
{"id":"bd-yun","title":"Story 8.1: Add --verify mode scaffold","description":"Scope\n- Harness supports --verify with ref backend pyboy_single and a stub dut backend.\n- Comparison loop runs for N steps with step-exact compares.\n\nAcceptance\n- verify mode exits non-zero on mismatch and prints summary.\n\nRefs\n- history/m0-epics.md (Story 8.1)\n- ARCHITECTURE.md (Section 7.2: compare policy)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-21T09:12:40.783882011Z","created_by":"bkase","updated_at":"2026-01-21T09:15:23.150406480Z","deleted_at":"2026-01-21T09:15:23.150396768Z","deleted_by":"bkase","delete_reason":"trim to epic1 M0 scope","original_type":"task","compaction_level":0,"original_size":0}
